function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let src_url_equal_anchor;function src_url_equal(e,t){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=t,e===src_url_equal_anchor.href}function is_empty(e){return 0===Object.keys(e).length}function action_destroyer(e){return e&&is_function(e.destroy)?e.destroy:noop}const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function attr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function set_custom_element_data(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:attr(e,t,n)}function children(e){return Array.from(e.childNodes)}function set_style(e,t,n,r){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function toggle_class(e,t,n){e.classList[n?"add":"remove"](t)}function custom_event(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class HtmlTag{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=svg_element(t.nodeName):this.e=element(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)insert(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}function attribute_to_object(e){const t={};for(const n of e)t[n.name]=n.value;return t}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function createEventDispatcher(){const e=get_current_component();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=custom_event(t,n,{cancelable:r});return i.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(e){render_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(0!==flushidx)return;const e=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){const t=[],n=[];render_callbacks.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),render_callbacks=t}const outroing=new Set;function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function mount_component(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||add_render_callback((()=>{const t=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...t):run_all(t),e.$$.on_mount=[]})),o.forEach(add_render_callback)}function destroy_component(e,t){const n=e.$$;null!==n.fragment&&(flush_render_callbacks(n.after_update),run_all(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,n,r,i,o,a,c=[-1]){const s=current_component;set_current_component(e);const u=e.$$={fragment:null,ctx:[],props:o,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:blank_object(),dirty:c,skip_bound:!1,root:t.target||s.$$.root};a&&a(u.root);let l=!1;if(u.ctx=n?n(e,t.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return u.ctx&&i(u.ctx[t],u.ctx[t]=o)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](o),l&&make_dirty(e,t)),n})):[],u.update(),l=!0,run_all(u.before_update),u.fragment=!!r&&r(u.ctx),t.target){if(t.hydrate){const e=children(t.target);u.fragment&&u.fragment.l(e),e.forEach(detach)}else u.fragment&&u.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(s)}let SvelteElement;function add(e,t){return{x:e.x+t.x,y:e.y+t.y}}function subtract(e,t){return{x:e.x-t.x,y:e.y-t.y}}function scale(e,t){return{x:e.x*t,y:e.y*t}}function rotate(e,t,n={x:0,y:0}){const r=e.x-n.x,i=e.y-n.y;return{x:n.x+r*Math.cos(t)-i*Math.sin(t),y:n.y+i*Math.cos(t)+r*Math.sin(t)}}function direction(e){const t=Math.atan(e.x/e.y);return e.y>0?t+Math.PI:t}function length(e){return Math.sqrt(e.x*e.x+e.y*e.y)}"function"==typeof HTMLElement&&(SvelteElement=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(run).filter(is_function);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){run_all(this.$$.on_disconnect)}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){if(!is_function(t))return noop;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var vector={add:add,subtract:subtract,sub:subtract,scale:scale,rotate:rotate,direction:direction,length:length,len:length};class magneticLines{rotatePoint(e,t,n){const r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}calcMagneticLine(e,t,n,r){let i,o,a,c,s,u=r.x,l=r.y,f=r.width,h=r.height,m=r.rotation,p=u+f/2,d=l+h/2;if("side"===t)"top"===e?(i=this.rotatePoint(0,-h/2,m),o=m,s=f+1e3):"right"===e?(i=this.rotatePoint(f/2,0,m),o=m+Math.PI/2,s=h+1e3):"bottom"===e?(i=this.rotatePoint(0,h/2,m),o=m+Math.PI,s=f+1e3):"left"===e&&(i=this.rotatePoint(-f/2,0,m),o=m-Math.PI/2,s=h+1e3),a=p+i.x,c=d+i.y;else if("center"===t){a=p,c=d,"horizontal"===n?o=m:"vertical"===n?o=m+Math.PI/2:"aligned"===n&&(o=m);s=Math.hypot(f,h)+1e3}return{x_line:a,y_line:c,lineLength:s,theta_line:o}}rotatePositionBackToOriginal(e,t){let n=this.centerX,r=this.centerY;const i=e.x,o=e.y,a=e.width,c=e.height,s=i+a/2,u=o+c/2;return{x:n+(s-n)*Math.cos(t)-(u-r)*Math.sin(t)-a/2,y:r+(s-n)*Math.sin(t)+(u-r)*Math.cos(t)-c/2,width:a,height:c,rotation:t}}rotateBoxesToZero(e,t){let n=0,r=0;return e.forEach((e=>{n+=e.x+e.width/2,r+=e.y+e.height/2})),n/=e.length,r/=e.length,this.centerX=n,this.centerY=r,e.forEach((e=>{let i=e.x+e.width/2,o=e.y+e.height/2,a=n+(i-n)*Math.cos(-t)-(o-r)*Math.sin(-t),c=r+(i-n)*Math.sin(-t)+(o-r)*Math.cos(-t);e.x=a-e.width/2,e.y=c-e.height/2,e.rotation=0})),e}}function warpImage(e,t,n,r){var i=e.naturalWidth,o=e.naturalHeight,a=[{x:0,y:0},{x:i,y:0},{x:i,y:o},{x:0,y:o}];const c=-r,s=Math.cos(c),u=Math.sin(c);let[l,f]=getCenterFromCorners$1(a);r&&(a=a.map((({x:e,y:t})=>{const n=e-l,r=t-f;return{x:n*s-r*u+l,y:n*u+r*s+f}})));var h=computeHomography(a,t),m=[{x:0,y:0},{x:i,y:0},{x:i,y:o},{x:0,y:o}],p=Math.min(...m.map((e=>e.x))),d=Math.max(...m.map((e=>e.x))),g=Math.min(...m.map((e=>e.y))),y=Math.max(...m.map((e=>e.y)));n.width=Math.ceil(d-p),n.height=Math.ceil(y-g);var x=invertHomography(h),v=document.createElement("canvas");v.width=i,v.height=o;var _=v.getContext("2d");_.drawImage(e,0,0,i,o);for(var b=_.getImageData(0,0,i,o).data,w=n.getContext("2d"),k=w.createImageData(n.width,n.height),$=k.data,M=0;M<n.height;M++)for(var T=0;T<n.width;T++){var A=applyHomography(x,T+p,M+g),j=A.x,S=A.y;if(j>=0&&j<i&&S>=0&&S<o){var E=sampleBilinear(b,i,o,j,S),C=4*(M*n.width+T);$[C]=E[0],$[C+1]=E[1],$[C+2]=E[2],$[C+3]=E[3]}}w.putImageData(k,0,0)}function getCenterFromCorners$1(e){const t=e[0],n=e[2];return[(t.x+n.x)/2,(t.y+n.y)/2]}function computeHomography(e,t){for(var n=[],r=0;r<4;r++){var i=e[r].x,o=e[r].y,a=t[r].x,c=t[r].y;n.push([-i,-o,-1,0,0,0,i*a,o*a,a]),n.push([0,0,0,-i,-o,-1,i*c,o*c,c])}var s=solveHomography(n);return[[s[0],s[1],s[2]],[s[3],s[4],s[5]],[s[6],s[7],s[8]]]}function solveHomography(e){for(var t=[],n=[],r=0;r<e.length;r++)t.push(e[r].slice(0,8)),n.push(-e[r][8]);var i=solveLinearSystem(t,n);return i.push(1),i}function solveLinearSystem(e,t){for(var n=e.length,r=e[0].length,i=0;i<n;i++)e[i].push(t[i]);for(var o=0;o<r;o++){var a=o,c=Math.abs(e[o][o]);for(i=o+1;i<n;i++)Math.abs(e[i][o])>c&&(c=Math.abs(e[i][o]),a=i);if(a!==o){var s=e[o];e[o]=e[a],e[a]=s}for(i=o+1;i<n;i++)for(var u=e[i][o]/e[o][o],l=o;l<=r;l++)e[i][l]-=u*e[o][l]}var f=new Array(r);for(i=r-1;i>=0;i--){f[i]=e[i][r]/e[i][i];for(o=i-1;o>=0;o--)e[o][r]-=e[o][i]*f[i]}return f}function invertHomography(e){var t=e[0][0]*(e[1][1]*e[2][2]-e[2][1]*e[1][2])-e[0][1]*(e[1][0]*e[2][2]-e[2][0]*e[1][2])+e[0][2]*(e[1][0]*e[2][1]-e[2][0]*e[1][1]);if(0===t)throw new Error("Homography matrix is singular and cannot be inverted.");var n=1/t;return[[(e[1][1]*e[2][2]-e[2][1]*e[1][2])*n,(e[0][2]*e[2][1]-e[0][1]*e[2][2])*n,(e[0][1]*e[1][2]-e[0][2]*e[1][1])*n],[(e[1][2]*e[2][0]-e[1][0]*e[2][2])*n,(e[0][0]*e[2][2]-e[0][2]*e[2][0])*n,(e[1][0]*e[0][2]-e[0][0]*e[1][2])*n],[(e[1][0]*e[2][1]-e[2][0]*e[1][1])*n,(e[2][0]*e[0][1]-e[0][0]*e[2][1])*n,(e[0][0]*e[1][1]-e[1][0]*e[0][1])*n]]}function applyHomography(e,t,n){var r=e[2][0]*t+e[2][1]*n+e[2][2];return{x:(e[0][0]*t+e[0][1]*n+e[0][2])/r,y:(e[1][0]*t+e[1][1]*n+e[1][2])/r}}function sampleBilinear(e,t,n,r,i){var o=Math.floor(r),a=Math.floor(i),c=o+1,s=a+1,u=r-o,l=i-a,f=function(e,r){return e=Math.max(0,Math.min(t-1,e)),4*((r=Math.max(0,Math.min(n-1,r)))*t+e)},h=getPixel(e,f(o,a)),m=getPixel(e,f(c,a)),p=getPixel(e,f(o,s)),d=getPixel(e,f(c,s)),g=interpolateColor(h,m,u),y=interpolateColor(p,d,u);return interpolateColor(g,y,l)}function getPixel(e,t){return[e[t],e[t+1],e[t+2],e[t+3]]}function interpolateColor(e,t,n){for(var r=[],i=0;i<4;i++)r[i]=e[i]*(1-n)+t[i]*n;return r}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e){var t={exports:{}};return e(t,t.exports),t.exports}var numeric1_2_6=createCommonjsModule((function(module,exports){var numeric=exports;void 0!==commonjsGlobal&&(commonjsGlobal.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i;for(void 0===t&&(t=15),r=.5,n=new Date;;){for(i=r*=2;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;if(new Date-n>t)break}for(i=r;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;return 1e3*(3*r-1)/(new Date-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;t<n;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(e<0)return"-"+t(-e);if(isFinite(e)){var n=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,i=(r=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}var n=[];return function e(r){var i;if(void 0===r)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof r)return n.push('"'+r+'"'),!1;if("boolean"==typeof r)return n.push(r.toString()),!1;if("number"==typeof r){var o=t(r),a=r.toPrecision(numeric.precision),c=parseFloat(r.toString()).toString(),s=[o,a,c,parseFloat(a).toString(),parseFloat(c).toString()];for(i=1;i<s.length;i++)s[i].length<o.length&&(o=s[i]);return n.push(Array(numeric.precision+8-o.length).join(" ")+o),!1}if(null===r)return n.push("null"),!1;if("function"==typeof r){n.push(r.toString());var u=!1;for(i in r)r.hasOwnProperty(i)&&(u?n.push(",\n"):n.push("\n{"),u=!0,n.push(i),n.push(": \n"),e(r[i]));return u&&n.push("}\n"),!0}if(r instanceof Array){if(r.length>numeric.largeArray)return n.push("...Large Array..."),!0;u=!1;for(n.push("["),i=0;i<r.length;i++)i>0&&(n.push(","),u&&n.push("\n ")),u=e(r[i]);return n.push("]"),!0}for(i in n.push("{"),u=!1,r)r.hasOwnProperty(i)&&(u&&n.push(",\n"),u=!0,n.push(i),n.push(": \n"),e(r[i]));return n.push("}"),!0}(e),n.join("")},numeric.parseDate=function(e){return function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseFloat=function(e){return function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseCSV=function(e){var t,n,r,i=e.split("\n"),o=[],a=/(([^'",]*)|('[^']*')|("[^"]*")),/g,c=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,s=0;for(n=0;n<i.length;n++){var u,l=(i[n]+",").match(a);if(l.length>0){for(o[s]=[],t=0;t<l.length;t++)u=(r=l[t]).substr(0,r.length-1),c.test(u)?o[s][t]=parseFloat(u):o[s][t]=u;s++}}return o},numeric.toCSV=function(e){var t,n,r,i,o,a=numeric.dim(e);for(r=a[0],a[1],o=[],t=0;t<r;t++){for(i=[],n=0;n<r;n++)i[n]=e[t][n].toString();o[t]=i.join(", ")}return o.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=-1;for(e.length,r=t;r<n;r++)o=o>>>8^i[255&(o^e[r])];return~o}var n,r,i,o,a,c,s,u,l,f,h=e[0].length,m=e[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,m>>24&255,m>>16&255,m>>8&255,255&m,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(f=t(p,12,29),p[29]=f>>24&255,p[30]=f>>16&255,p[31]=f>>8&255,p[32]=255&f,n=1,r=0,s=0;s<h;s++){for(s<h-1?p.push(0):p.push(1),a=3*m+1+(0===s)&255,c=3*m+1+(0===s)>>8&255,p.push(a),p.push(c),p.push(255&~a),p.push(255&~c),0===s&&p.push(0),u=0;u<m;u++)for(i=0;i<3;i++)r=(r+(n=(n+(a=(a=e[i][s][u])>255?255:a<0?0:Math.round(a)))%65521))%65521,p.push(a);p.push(0)}return l=(r<<16)+n,p.push(l>>24&255),p.push(l>>16&255),p.push(l>>8&255),p.push(255&l),o=p.length-41,p[33]=o>>24&255,p[34]=o>>16&255,p[35]=o>>8&255,p[36]=255&o,f=t(p,37),p.push(f>>24&255),p.push(f>>16&255),p.push(f>>8&255),p.push(255&f),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+function(e){var t,n,r,i,o,a,c,s=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";for(t=0;t<s;t+=3)o=((3&(n=e[t]))<<4)+((r=e[t+1])>>4),a=((15&r)<<2)+((i=e[t+2])>>6),c=63&i,t+1>=s?a=c=64:t+2>=s&&(c=64),l+=u.charAt(n>>2)+u.charAt(o)+u.charAt(a)+u.charAt(c);return l}(p)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?numeric._dim(e):[e.length,t.length]:[e.length]:[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if((i=t.length)!==n.length)return!1;for(r=0;r<i;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){void 0===n&&(n=0);var r,i=e[n],o=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)o[r+1]=t,o[r]=t;return-1===r&&(o[0]=t),o}for(r=i-1;r>=0;r--)o[r]=numeric.rep(e,t,n+1);return o},numeric.dotMMsmall=function(e,t){var n,r,i,o,a,c,s,u,l,f,h;for(o=e.length,a=t.length,c=t[0].length,s=Array(o),n=o-1;n>=0;n--){for(u=Array(c),l=e[n],i=c-1;i>=0;i--){for(f=l[a-1]*t[a-1][i],r=a-2;r>=1;r-=2)h=r-1,f+=l[r]*t[r][i]+l[h]*t[h][i];0===r&&(f+=l[0]*t[0][i]),u[i]=f}s[n]=u}return s},numeric._getCol=function(e,t,n){var r;for(r=e.length-1;r>0;--r)n[r]=e[r][t],n[--r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,o=numeric._getCol,a=t.length,c=Array(a),s=e.length,u=t[0].length,l=new Array(s),f=numeric.dotVV;for(--a,r=--s;-1!==r;--r)l[r]=Array(u);for(r=--u;-1!==r;--r)for(o(t,r,c),i=s;-1!==i;--i)n=e[i],l[i][r]=f(n,c);return l},numeric.dotMV=function(e,t){var n,r=e.length;t.length;var i=Array(r),o=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=o(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,o,a,c,s;for(i=e.length,o=t[0].length,a=Array(o),r=o-1;r>=0;r--){for(c=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)s=n-1,c+=e[n]*t[n][r]+e[s]*t[s][r];0===n&&(c+=e[0]*t[0][r]),a[r]=c}return a},numeric.dotVV=function(e,t){var n,r,i=e.length,o=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,o+=e[n]*t[n]+e[r]*t[r];return 0===n&&(o+=e[0]*t[0]),o},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,o=e.length,a=Array(o);for(t=o-1;t>=0;t--){for(i=Array(o),n=t+2,r=o-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),a[t]=i}return a},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],r[--t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){void 0===n&&(n="");var r,i,o=[],a=/\[i\]$/,c="",s=!1;for(r=0;r<e.length;r++)a.test(e[r])?c=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(s=!0),o.push(i);return o[e.length]="_s",o[e.length+1]="_k",o[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+c+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(s?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric.pointwise2=function(e,t,n){void 0===n&&(n="");var r,i,o=[],a=/\[i\]$/,c="",s=!1;for(r=0;r<e.length;r++)a.test(e[r])?c=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(s=!0),o.push(i);return o[e.length]="var _n = "+c+".length;\nvar i"+(s?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,o)},numeric._biforeach=function e(t,n,r,i,o){var a;if(i!==r.length-1)for(a=r[i]-1;a>=0;a--)e("object"==typeof t?t[a]:t,"object"==typeof n?n[a]:n,r,i+1,o);else o(t,n)},numeric._biforeach2=function e(t,n,r,i,o){if(i===r.length-1)return o(t,n);var a,c=r[i],s=Array(c);for(a=c-1;a>=0;--a)s[a]=e("object"==typeof t?t[a]:t,"object"==typeof n?n[a]:n,r,i+1,o);return s},numeric._foreach=function e(t,n,r,i){var o;if(r!==n.length-1)for(o=n[r]-1;o>=0;o--)e(t[o],n,r+1,i);else i(t)},numeric._foreach2=function e(t,n,r,i){if(r===n.length-1)return i(t);var o,a=n[r],c=Array(a);for(o=a-1;o>=0;o--)c[o]=e(t[o],n,r+1,i);return c},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,o,a,c,s=numeric.dim(e),u=Math.abs,l=s[0],f=s[1],h=numeric.clone(e),m=numeric.identity(l);for(a=0;a<f;++a){var p=-1,d=-1;for(o=a;o!==l;++o)(c=u(h[o][a]))>d&&(p=o,d=c);for(n=h[p],h[p]=h[a],h[a]=n,i=m[p],m[p]=m[a],m[a]=i,e=n[a],c=a;c!==f;++c)n[c]/=e;for(c=f-1;-1!==c;--c)i[c]/=e;for(o=l-1;-1!==o;--o)if(o!==a){for(t=h[o],r=m[o],e=t[a],c=a+1;c!==f;++c)t[c]-=n[c]*e;for(c=f-1;c>0;--c)r[c]-=i[c]*e,r[--c]-=i[c]*e;0===c&&(r[0]-=i[0]*e)}}return m},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,o,a,c,s,u,l=t[0],f=1,h=numeric.clone(e);for(r=0;r<l-1;r++){for(i=r,n=r+1;n<l;n++)Math.abs(h[n][r])>Math.abs(h[i][r])&&(i=n);for(i!==r&&(s=h[i],h[i]=h[r],h[r]=s,f*=-1),o=h[r],n=r+1;n<l;n++){for(c=(a=h[n])[r]/o[r],i=r+1;i<l-1;i+=2)u=i+1,a[i]-=o[i]*c,a[u]-=o[u]*c;i!==l&&(a[i]-=o[i]*c)}if(0===o[r])return 0;f*=o[r]}return f*h[r][r]},numeric.transpose=function(e){var t,n,r,i,o,a=e.length,c=e[0].length,s=Array(c);for(n=0;n<c;n++)s[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=c-1;n>=1;--n)(o=s[n])[t]=i[n],o[t-1]=r[n],(o=s[--n])[t]=i[n],o[t-1]=r[n];0===n&&((o=s[0])[t]=i[0],o[t-1]=r[0])}if(0===t){for(r=e[0],n=c-1;n>=1;--n)s[n][0]=r[n],s[--n][0]=r[n];0===n&&(s[0][0]=r[0])}return s},numeric.negtranspose=function(e){var t,n,r,i,o,a=e.length,c=e[0].length,s=Array(c);for(n=0;n<c;n++)s[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=c-1;n>=1;--n)(o=s[n])[t]=-i[n],o[t-1]=-r[n],(o=s[--n])[t]=-i[n],o[t-1]=-r[n];0===n&&((o=s[0])[t]=-i[0],o[t-1]=-r[0])}if(0===t){for(r=e[0],n=c-1;n>=1;--n)s[n][0]=-r[n],s[--n][0]=-r[n];0===n&&(s[0][0]=-r[0])}return s},numeric._random=function e(t,n){var r,i,o=t[n],a=Array(o);if(n===t.length-1){for(i=Math.random,r=o-1;r>=1;r-=2)a[r]=i(),a[r-1]=i();return 0===r&&(a[0]=i()),a}for(r=o-1;r>=0;r--)a[r]=e(t,n+1);return a},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if(void 0===n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];var r,i=Array(n);for(r=--n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){var r=numeric.dim(e);return function e(i,o){var a,c=t[o],s=n[o]-c,u=Array(s);if(o===r.length-1){for(a=s;a>=0;a--)u[a]=i[a+c];return u}for(a=s;a>=0;a--)u[a]=e(i[a+c],o+1);return u}(e,0)},numeric.setBlock=function(e,t,n,r){var i=numeric.dim(e);return function e(r,o,a){var c,s=t[a],u=n[a]-s;if(a===i.length-1)for(c=u;c>=0;c--)r[c+s]=o[c];for(c=u;c>=0;c--)e(r[c+s],o[c],a+1)}(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,o,a,c=t.length,s=n.length,u=Array(c);for(r=c-1;-1!==r;--r)for(u[r]=Array(s),o=u[r],a=e[t[r]],i=s-1;-1!==i;--i)o[i]=a[n[i]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,o,a,c=t[0],s=t[1];for(n=0,r=0,i=0;i<c;++i)n+=e[i][0].length;for(o=0;o<s;++o)r+=e[0][o][0].length;var u=Array(n);for(i=0;i<n;++i)u[i]=Array(r);var l,f,h,m,p,d=0;for(i=0;i<c;++i){for(l=r,o=s-1;-1!==o;--o)for(l-=(a=e[i][o])[0].length,h=a.length-1;-1!==h;--h)for(p=a[h],f=u[d+h],m=p.length-1;-1!==m;--m)f[l+m]=p[m];d+=e[i][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,o,a,c,s=n[0],u=r[0],l=Array(s);for(o=s-1;o>=0;o--){for(i=Array(u),c=e[o],a=u-1;a>=3;--a)i[a]=c*t[a],i[--a]=c*t[a],i[--a]=c*t[a],i[--a]=c*t[a];for(;a>=0;)i[a]=c*t[a],--a;l[o]=i}return l},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){var o;if(numeric.indexOf,"string"!=typeof i)for(o in i="",numeric)numeric.hasOwnProperty(o)&&(e.indexOf(o)>=0||t.indexOf(o)>=0||n.indexOf(o)>=0||r.indexOf(o)>=0)&&o.length>1&&(i+="var "+o+" = numeric."+o+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var t=numeric.div;return this.y?new numeric.T(t(this.x,e.x),t(this.y,e.x)):new numeric.T(t(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,o,a,c,s,u,l,f,h,m,p,d,g,y,x,v=e.x.length,_=numeric.identity(v),b=numeric.rep([v,v],0),w=numeric.clone(e.x),k=numeric.clone(e.y);for(u=0;u<v;u++){for(h=(p=w[u][u])*p+(d=k[u][u])*d,f=u,l=u+1;l<v;l++)(m=(p=w[l][u])*p+(d=k[l][u])*d)>h&&(f=l,h=m);for(f!==u&&(x=w[u],w[u]=w[f],w[f]=x,x=k[u],k[u]=k[f],k[f]=x,x=_[u],_[u]=_[f],_[f]=x,x=b[u],b[u]=b[f],b[f]=x),t=w[u],n=k[u],o=_[u],a=b[u],p=t[u],d=n[u],l=u+1;l<v;l++)g=t[l],y=n[l],t[l]=(g*p+y*d)/h,n[l]=(y*p-g*d)/h;for(l=0;l<v;l++)g=o[l],y=a[l],o[l]=(g*p+y*d)/h,a[l]=(y*p-g*d)/h;for(l=u+1;l<v;l++){for(r=w[l],i=k[l],c=_[l],s=b[l],p=r[u],d=i[u],f=u+1;f<v;f++)g=t[f],y=n[f],r[f]-=g*p-y*d,i[f]-=y*p+g*d;for(f=0;f<v;f++)g=o[f],y=a[f],c[f]-=g*p-y*d,s[f]-=y*p+g*d}}for(u=v-1;u>0;u--)for(o=_[u],a=b[u],l=u-1;l>=0;l--)for(c=_[l],s=b[l],p=w[l][u],d=k[l][u],f=v-1;f>=0;f--)g=o[f],y=a[f],c[f]-=p*g-d*y,s[f]-=p*y+d*g;return new numeric.T(_,b)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,o=e.length;if(r){for(;i<o;)n=n[t=e[i]],r=r[t],i++;return new numeric.T(n,r)}for(;i<o;)n=n[t=e[i]],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,o=0,a=e.length,c=t.x,s=t.y;if(0===a)return s?this.y=s:i&&(this.y=void 0),this.x=r,this;if(s){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);o<a-1;)r=r[n=e[o]],i=i[n],o++;return r[n=e[o]]=c,i[n]=s,this}if(i){for(;o<a-1;)r=r[n=e[o]],i=i[n],o++;return r[n=e[o]]=c,i[n]=c instanceof Array?numeric.rep(numeric.dim(c),0):0,this}for(;o<a-1;)r=r[n=e[o]],o++;return r[n=e[o]]=c,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,o=Array(i),a=this.x,c=this.y;for(n=e;n<=t;n++)o[n-e]=a[n];if(c){for(r=Array(i),n=e;n<=t;n++)r[n-e]=c[n];return new numeric.T(o,r)}return new numeric.T(o)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,o=this.y,a=n.x,c=n.y;for(r=e;r<=t;r++)i[r]=a[r-e];if(c)for(o||(o=numeric.rep(numeric.dim(i),0),this.y=o),r=e;r<=t;r++)o[r]=c[r-e];else if(o)for(r=e;r<=t;r++)o[r]=numeric.rep([a[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,o=t.y;return n[e]=i,o?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=o):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,o=numeric.setBlock,a=n.x,c=n.y;if(c)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),o(r,e,t,a),o(i,e,t,c),this;o(r,e,t,a),i&&o(i,e,t,numeric.rep(numeric.dim(a),0))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,o=numeric.rep;return i?new n(o(e,r),o(e,i)):new n(o(e,r))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,r=numeric.diag;return n?new numeric.T(r(t),r(n)):new numeric.T(r(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=(e[0]>=0?1:-1)*numeric.norm2(e);t[0]+=n;var r=numeric.norm2(t);if(0===r)throw new Error("eig: internal error");return numeric.div(t,r)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,o,a,c,s,u,l,f,h=t[0],m=numeric.clone(e),p=numeric.identity(h);for(r=0;r<h-2;r++){for(o=Array(h-r-1),n=r+1;n<h;n++)o[n-r-1]=m[n][r];if(numeric.norm2(o)>0){for(a=numeric.house(o),c=numeric.getBlock(m,[r+1,r],[h-1,h-1]),s=numeric.tensor(a,numeric.dot(a,c)),n=r+1;n<h;n++)for(u=m[n],l=s[n-r-1],i=r;i<h;i++)u[i]-=2*l[i-r];for(c=numeric.getBlock(m,[0,r+1],[h-1,h-1]),s=numeric.tensor(numeric.dot(c,a),a),n=0;n<h;n++)for(u=m[n],l=s[n],i=r+1;i<h;i++)u[i]-=2*l[i-r-1];for(c=Array(h-r-1),n=r+1;n<h;n++)c[n-r-1]=p[n];for(s=numeric.tensor(a,numeric.dot(a,c)),n=r+1;n<h;n++)for(f=p[n],l=s[n-r-1],i=0;i<h;i++)f[i]-=2*l[i]}}return{H:m,Q:p}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(e,t){void 0===t&&(t=1e4),e=numeric.clone(e),numeric.clone(e);var n,r,i,o,a,c,s,u,l,f,h,m,p,d,g,y,x,v,_=numeric.dim(e)[0],b=numeric.identity(_);if(_<3)return{Q:b,B:[[0,_-1]]};var w=numeric.epsilon;for(v=0;v<t;v++){for(y=0;y<_-1;y++)if(Math.abs(e[y+1][y])<w*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var k=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),$=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[_-1,_-1]),t);for(m=Array(y+1),g=0;g<=y;g++)m[g]=b[g];for(p=numeric.dot(k.Q,m),g=0;g<=y;g++)b[g]=p[g];for(m=Array(_-y-1),g=y+1;g<_;g++)m[g-y-1]=b[g];for(p=numeric.dot($.Q,m),g=y+1;g<_;g++)b[g]=p[g-y-1];return{Q:b,B:k.B.concat(numeric.add($.B,y+1))}}var M,T,A;if(i=e[_-2][_-2],o=e[_-2][_-1],a=e[_-1][_-2],u=i+(c=e[_-1][_-1]),s=i*c-o*a,l=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*s)M=.5*(u+Math.sqrt(u*u-4*s)),T=.5*(u-Math.sqrt(u*u-4*s)),l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,M+T)),numeric.diag(numeric.rep([3],M*T)));else l=numeric.add(numeric.sub(numeric.dot(l,l),numeric.mul(l,u)),numeric.diag(numeric.rep([3],s)));for(n=[l[0][0],l[1][0],l[2][0]],r=numeric.house(n),m=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,m)),g=0;g<3;g++)for(h=e[g],d=p[g],x=0;x<_;x++)h[x]-=2*d[x];for(m=numeric.getBlock(e,[0,0],[_-1,2]),p=numeric.tensor(numeric.dot(m,r),r),g=0;g<_;g++)for(h=e[g],d=p[g],x=0;x<3;x++)h[x]-=2*d[x];for(m=[b[0],b[1],b[2]],p=numeric.tensor(r,numeric.dot(r,m)),g=0;g<3;g++)for(f=b[g],d=p[g],x=0;x<_;x++)f[x]-=2*d[x];for(y=0;y<_-2;y++){for(x=y;x<=y+1;x++)if(Math.abs(e[x+1][x])<w*(Math.abs(e[x][x])+Math.abs(e[x+1][x+1]))){k=numeric.QRFrancis(numeric.getBlock(e,[0,0],[x,x]),t),$=numeric.QRFrancis(numeric.getBlock(e,[x+1,x+1],[_-1,_-1]),t);for(m=Array(x+1),g=0;g<=x;g++)m[g]=b[g];for(p=numeric.dot(k.Q,m),g=0;g<=x;g++)b[g]=p[g];for(m=Array(_-x-1),g=x+1;g<_;g++)m[g-x-1]=b[g];for(p=numeric.dot($.Q,m),g=x+1;g<_;g++)b[g]=p[g-x-1];return{Q:b,B:k.B.concat(numeric.add($.B,x+1))}}for(A=Math.min(_-1,y+3),n=Array(A-y),g=y+1;g<=A;g++)n[g-y-1]=e[g][y];for(r=numeric.house(n),m=numeric.getBlock(e,[y+1,y],[A,_-1]),p=numeric.tensor(r,numeric.dot(r,m)),g=y+1;g<=A;g++)for(h=e[g],d=p[g-y-1],x=y;x<_;x++)h[x]-=2*d[x-y];for(m=numeric.getBlock(e,[0,y+1],[_-1,A]),p=numeric.tensor(numeric.dot(m,r),r),g=0;g<_;g++)for(h=e[g],d=p[g],x=y+1;x<=A;x++)h[x]-=2*d[x-y-1];for(m=Array(A-y),g=y+1;g<=A;g++)m[g-y-1]=b[g];for(p=numeric.tensor(r,numeric.dot(r,m)),g=y+1;g<=A;g++)for(f=b[g],d=p[g-y-1],x=0;x<_;x++)f[x]-=2*d[x]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,o,a,c,s,u,l,f,h,m,p,d,g,y,x=numeric.toUpperHessenberg(e),v=numeric.QRFrancis(x.H,t),_=numeric.T,b=e.length,w=v.B,k=numeric.dot(v.Q,numeric.dot(x.H,numeric.transpose(v.Q))),$=new _(numeric.dot(v.Q,x.Q)),M=w.length,T=Math.sqrt;for(r=0;r<M;r++)if((n=w[r][0])===w[r][1]);else{if(o=n+1,a=k[n][n],c=k[n][o],s=k[o][n],u=k[o][o],0===c&&0===s)continue;(f=(l=-a-u)*l-4*(a*u-c*s))>=0?((g=(a-(h=l<0?-.5*(l-T(f)):-.5*(l+T(f))))*(a-h)+c*c)>(y=s*s+(u-h)*(u-h))?(p=(a-h)/(g=T(g)),d=c/g):(p=s/(y=T(y)),d=(u-h)/y),i=new _([[d,-p],[p,d]]),$.setRows(n,o,i.dot($.getRows(n,o)))):(h=-.5*l,m=.5*T(-f),(g=(a-h)*(a-h)+c*c)>(y=s*s+(u-h)*(u-h))?(p=(a-h)/(g=T(g+m*m)),d=c/g,h=0,m/=g):(p=s/(y=T(y+m*m)),d=(u-h)/y,h=m/y,m=0),i=new _([[d,-p],[p,d]],[[h,m],[m,-h]]),$.setRows(n,o,i.dot($.getRows(n,o))))}var A=$.dot(e).dot($.transjugate()),j=(b=e.length,numeric.T.identity(b));for(o=0;o<b;o++)if(o>0)for(r=o-1;r>=0;r--){var S=A.get([r,r]),E=A.get([o,o]);numeric.neq(S.x,E.x)||numeric.neq(S.y,E.y)?(h=A.getRow(r).getBlock([r],[o-1]),m=j.getRow(o).getBlock([r],[o-1]),j.set([o,r],A.get([r,o]).neg().sub(h.dot(m)).div(S.sub(E)))):j.setRow(o,j.getRow(r))}for(o=0;o<b;o++)h=j.getRow(o),j.setRow(o,h.div(h.norm2()));return j=j.transpose(),j=$.transjugate().dot(j),{lambda:A.getDiag(),E:j}},numeric.ccsSparse=function(e){var t,n,r,i=e.length,o=[];for(n=i-1;-1!==n;--n)for(r in t=e[n]){for(r=parseInt(r);r>=o.length;)o[o.length]=0;0!==t[r]&&o[r]++}var a=o.length,c=Array(a+1);for(c[0]=0,n=0;n<a;++n)c[n+1]=c[n]+o[n];var s=Array(c[a]),u=Array(c[a]);for(n=i-1;-1!==n;--n)for(r in t=e[n])0!==t[r]&&(o[r]--,s[c[r]+o[r]]=n,u[c[r]+o[r]]=t[r]);return[c,s,u]},numeric.ccsFull=function(e){var t,n,r,i,o=e[0],a=e[1],c=e[2],s=numeric.ccsDim(e),u=s[0],l=s[1],f=numeric.rep([u,l],0);for(t=0;t<l;t++)for(r=o[t],i=o[t+1],n=r;n<i;++n)f[a[n]][t]=c[n];return f},numeric.ccsTSolve=function(e,t,n,r,i){var o,a,c,s,u,l,f,h=e[0],m=e[1],p=e[2],d=h.length-1,g=Math.max,y=0;function x(e){var t;if(0===n[e]){for(n[e]=1,t=h[e];t<h[e+1];++t)x(m[t]);i[y]=e,++y}}for(void 0===r&&(n=numeric.rep([d],0)),void 0===r&&(r=numeric.linspace(0,n.length-1)),void 0===i&&(i=[]),o=r.length-1;-1!==o;--o)x(r[o]);for(i.length=y,o=i.length-1;-1!==o;--o)n[i[o]]=0;for(o=r.length-1;-1!==o;--o)a=r[o],n[a]=t[a];for(o=i.length-1;-1!==o;--o){for(a=i[o],c=h[a],s=g(h[a+1],c),u=c;u!==s;++u)if(m[u]===a){n[a]/=p[u];break}for(f=n[a],u=c;u!==s;++u)(l=m[u])!==a&&(n[l]-=f*p[u])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,o){var a,c,s,u=0,l=i.length,f=this.k,h=this.k1,m=this.j;if(0===r[e])for(r[e]=1,m[0]=e,f[0]=c=t[e],h[0]=s=t[e+1];;)if(c>=s){if(i[l]=m[u],0===u)return;++l,c=f[--u],s=h[u]}else 0===r[a=o[n[c]]]?(r[a]=1,f[u]=c,m[++u]=a,c=t[a],h[u]=s=t[a+1]):++c},numeric.ccsLPSolve=function(e,t,n,r,i,o,a){var c=e[0],s=e[1],u=e[2];c.length;var l,f,h,m,p,d,g,y,x,v=t[0],_=t[1],b=t[2];for(f=v[i],h=v[i+1],r.length=0,l=f;l<h;++l)a.dfs(o[_[l]],c,s,n,r,o);for(l=r.length-1;-1!==l;--l)n[r[l]]=0;for(l=f;l!==h;++l)n[m=o[_[l]]]=b[l];for(l=r.length-1;-1!==l;--l){for(p=c[m=r[l]],d=c[m+1],g=p;g<d;++g)if(o[s[g]]===m){n[m]/=u[g];break}for(x=n[m],g=p;g<d;++g)(y=o[s[g]])!==m&&(n[y]-=x*u[g])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,o,a,c,s,u=e[0].length-1,l=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],h=l[0],m=l[1],p=l[2],d=f[0],g=f[1],y=f[2],x=numeric.rep([u],0),v=numeric.rep([u],0),_=numeric.ccsLPSolve,b=Math.abs,w=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),$=new numeric.ccsDFS(u);for(void 0===t&&(t=1),n=0;n<u;++n){for(_(l,e,x,v,n,k,$),o=-1,a=-1,r=v.length-1;-1!==r;--r)(i=v[r])<=n||(c=b(x[i]))>o&&(a=i,o=c);for(b(x[n])<t*o&&(r=w[n],o=w[a],w[n]=o,k[o]=n,w[a]=r,k[r]=a,o=x[n],x[n]=x[a],x[a]=o),o=h[n],a=d[n],s=x[n],m[o]=w[n],p[o]=1,++o,r=v.length-1;-1!==r;--r)c=x[i=v[r]],v[r]=0,x[i]=0,i<=n?(g[a]=i,y[a]=c,++a):(m[o]=w[i],p[o]=c/s,++o);h[n+1]=o,d[n+1]=a}for(r=m.length-1;-1!==r;--r)m[r]=k[m[r]];return{L:l,U:f,P:w,Pinv:k}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,o,a){var c,s,u,l=0,f=i.length,h=this.k,m=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,h[0]=s=t[o[e]],m[0]=u=t[o[e]+1];;){if(isNaN(s))throw new Error("Ow!");if(s>=u){if(i[f]=o[p[l]],0===l)return;++f,s=h[--l],u=m[l]}else 0===r[c=n[s]]?(r[c]=1,h[l]=s,p[++l]=c,s=t[c=o[c]],m[l]=u=t[c+1]):++s}},numeric.ccsLPSolve0=function(e,t,n,r,i,o,a,c){var s=e[0],u=e[1],l=e[2];s.length;var f,h,m,p,d,g,y,x,v,_=t[0],b=t[1],w=t[2];for(h=_[i],m=_[i+1],r.length=0,f=h;f<m;++f)c.dfs(b[f],s,u,n,r,o,a);for(f=r.length-1;-1!==f;--f)n[a[p=r[f]]]=0;for(f=h;f!==m;++f)n[p=b[f]]=w[f];for(f=r.length-1;-1!==f;--f){for(x=a[p=r[f]],d=s[p],g=s[p+1],y=d;y<g;++y)if(u[y]===x){n[x]/=l[y];break}for(v=n[x],y=d;y<g;++y)n[u[y]]-=v*l[y];n[x]=v}},numeric.ccsLUP0=function(e,t){var n,r,i,o,a,c,s,u=e[0].length-1,l=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],h=l[0],m=l[1],p=l[2],d=f[0],g=f[1],y=f[2],x=numeric.rep([u],0),v=numeric.rep([u],0),_=numeric.ccsLPSolve0,b=Math.abs,w=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),$=new numeric.ccsDFS0(u);for(void 0===t&&(t=1),n=0;n<u;++n){for(_(l,e,x,v,n,k,w,$),o=-1,a=-1,r=v.length-1;-1!==r;--r)(i=v[r])<=n||(c=b(x[w[i]]))>o&&(a=i,o=c);for(b(x[w[n]])<t*o&&(r=w[n],o=w[a],w[n]=o,k[o]=n,w[a]=r,k[r]=a),o=h[n],a=d[n],s=x[w[n]],m[o]=w[n],p[o]=1,++o,r=v.length-1;-1!==r;--r)c=x[w[i=v[r]]],v[r]=0,x[w[i]]=0,i<=n?(g[a]=i,y[a]=c,++a):(m[o]=w[i],p[o]=c/s,++o);h[n+1]=o,d[n+1]=a}for(r=m.length-1;-1!==r;--r)m[r]=k[m[r]];return{L:l,U:f,P:w,Pinv:k}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],o=r[1];void 0===t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),void 0===n?n=numeric.linspace(0,o-1):"number"==typeof n&&(n=[n]);var a,c,s,u,l=t.length,f=n.length,h=numeric.rep([o],0),m=[],p=[],d=[h,m,p],g=e[0],y=e[1],x=e[2],v=numeric.rep([i],0),_=0,b=numeric.rep([i],0);for(c=0;c<f;++c){var w=g[u=n[c]],k=g[u+1];for(a=w;a<k;++a)b[s=y[a]]=1,v[s]=x[a];for(a=0;a<l;++a)b[t[a]]&&(m[_]=a,p[_]=v[t[a]],++_);for(a=w;a<k;++a)b[s=y[a]]=0;h[c+1]=_}return d},numeric.ccsDot=function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],c=t[2],s=numeric.ccsDim(e),u=numeric.ccsDim(t),l=s[0];s[1];var f,h,m,p,d,g,y,x,v,_,b,w=u[1],k=numeric.rep([l],0),$=numeric.rep([l],0),M=Array(l),T=numeric.rep([w],0),A=[],j=[],S=[T,A,j];for(m=0;m!==w;++m){for(p=o[m],d=o[m+1],v=0,h=p;h<d;++h)for(_=a[h],b=c[h],g=n[_],y=n[_+1],f=g;f<y;++f)0===$[x=r[f]]&&(M[v]=x,$[x]=1,v+=1),k[x]=k[x]+i[f]*b;for(d=(p=T[m])+v,T[m+1]=d,h=v-1;-1!==h;--h)b=p+h,f=M[h],A[b]=f,j[b]=k[f],$[f]=0,k[f]=0;T[m+1]=T[m]+v}return S},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U;e.P;var i=t[0],o=!1;"object"!=typeof i&&(i=(t=[[0,t.length],numeric.linspace(0,t.length-1),t])[0],o=!0);var a,c,s,u,l,f,h=t[1],m=t[2],p=n[0].length-1,d=i.length-1,g=numeric.rep([p],0),y=Array(p),x=numeric.rep([p],0),v=Array(p),_=numeric.rep([d+1],0),b=[],w=[],k=numeric.ccsTSolve,$=0;for(a=0;a<d;++a){for(l=0,s=i[a],u=i[a+1],c=s;c<u;++c)f=e.Pinv[h[c]],v[l]=f,x[f]=m[c],++l;for(v.length=l,k(n,x,g,v,y),c=v.length-1;-1!==c;--c)x[v[c]]=0;if(k(r,g,x,y,v),o)return x;for(c=y.length-1;-1!==c;--c)g[y[c]]=0;for(c=v.length-1;-1!==c;--c)f=v[c],b[$]=f,w[$]=x[f],x[f]=0,++$;_[a+1]=$}return[_,b,w]},numeric.ccsbinop=function(e,t){return void 0===t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],o=numeric.sup(r)+1,a=n.length,c=numeric.rep([o],0),s=Array(a),u=Array(a),l=numeric.rep([o],0);for(t=0;t<a;++t)l[r[t]]++;for(t=0;t<o;++t)c[t+1]=c[t]+l[t];var f,h,m=c.slice(0);for(t=0;t<a;++t)s[f=m[h=r[t]]]=n[t],u[f]=i[t],m[h]=m[h]+1;return[c,s,u]},numeric.ccsGather=function(e){var t,n,r,i,o,a=e[0],c=e[1],s=e[2],u=a.length-1,l=c.length,f=Array(l),h=Array(l),m=Array(l);for(o=0,t=0;t<u;++t)for(r=a[t],i=a[t+1],n=r;n!==i;++n)h[o]=t,f[o]=c[n],m[o]=s[n],++o;return[f,h,m]},numeric.sdim=function e(t,n,r){if(void 0===n&&(n=[]),"object"!=typeof t)return n;var i;for(i in void 0===r&&(r=0),r in n||(n[r]=0),t.length>n[r]&&(n[r]=t.length),t)t.hasOwnProperty(i)&&e(t[i],n,r+1);return n},numeric.sclone=function e(t,n,r){void 0===n&&(n=0),void 0===r&&(r=numeric.sdim(t).length);var i,o=Array(t.length);if(n===r-1){for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);return o}for(i in t)t.hasOwnProperty(i)&&(o[i]=e(t[i],n+1,r));return o},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];for(t in e.length,e)if(e.hasOwnProperty(t))for(n in r=e[t])r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n]);return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n=e.length;t.length;var r,i,o,a,c,s,u,l=numeric.stranspose(t),f=l.length,h=Array(n);for(o=n-1;o>=0;o--){for(u=[],r=e[o],c=f-1;c>=0;c--){for(a in s=0,i=l[c],r)r.hasOwnProperty(a)&&a in i&&(s+=r[a]*i[a]);s&&(u[c]=s)}h[o]=u}return h},numeric.sdotMV=function(e,t){var n,r,i,o,a=e.length,c=Array(a);for(r=a-1;r>=0;r--){for(i in o=0,n=e[r])n.hasOwnProperty(i)&&t[i]&&(o+=n[i]*t[i]);o&&(c[r]=o)}return c},numeric.sdotVM=function(e,t){var n,r,i,o,a=[];for(n in e)if(e.hasOwnProperty(n))for(r in i=t[n],o=e[n],i)i.hasOwnProperty(r)&&(a[r]||(a[r]=0),a[r]+=o*i[r]);return a},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length;switch(1e3*n+r){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,o=e[0].length,a=e.length,c=[];for(n=o-1;n>=0;--n)if(e[a-1][n]){for(i=c,r=0;r<a-2;r++)i[t=e[r][n]]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return c},numeric.sgather=function e(t,n,r){var i,o,a;for(o in void 0===n&&(n=[]),void 0===r&&(r=[]),i=r.length,t)if(t.hasOwnProperty(o))if(r[i]=parseInt(o),"number"==typeof(a=t[o])){if(a){if(0===n.length)for(o=i+1;o>=0;--o)n[o]=[];for(o=i;o>=0;--o)n[o].push(r[o]);n[i+1].push(a)}}else e(a,n,r);return r.length>i&&r.pop(),n},numeric.cLU=function(e){var t,n,r,i,o,a,c=e[0],s=e[1],u=e[2],l=c.length,f=0;for(t=0;t<l;t++)c[t]>f&&(f=c[t]);f++;var h,m=Array(f),p=Array(f),d=numeric.rep([f],1/0),g=numeric.rep([f],-1/0);for(r=0;r<l;r++)t=c[r],(n=s[r])<d[t]&&(d[t]=n),n>g[t]&&(g[t]=n);for(t=0;t<f-1;t++)g[t]>g[t+1]&&(g[t+1]=g[t]);for(t=f-1;t>=1;t--)d[t]<d[t-1]&&(d[t-1]=d[t]);for(t=0;t<f;t++)p[t]=numeric.rep([g[t]-d[t]+1],0),m[t]=numeric.rep([t-d[t]],0),t-d[t]+1,g[t]-t+1;for(r=0;r<l;r++)p[t=c[r]][s[r]-d[t]]=u[r];for(t=0;t<f-1;t++)for(i=t-d[t],v=p[t],n=t+1;d[n]<=t&&n<f;n++)if(o=t-d[n],a=g[t]-t,h=(_=p[n])[o]/v[i]){for(r=1;r<=a;r++)_[r+o]-=h*v[r+i];m[n][t-d[n]]=h}var y,x,v=[],_=[],b=[],w=[],k=[],$=[];for(l=0,y=0,t=0;t<f;t++){for(i=d[t],o=g[t],x=p[t],n=t;n<=o;n++)x[n-i]&&(v[l]=t,_[l]=n,b[l]=x[n-i],l++);for(x=m[t],n=i;n<t;n++)x[n-i]&&(w[y]=t,k[y]=n,$[y]=x[n-i],y++);w[y]=t,k[y]=t,$[y]=1,y++}return{U:[v,_,b],L:[w,k,$]}},numeric.cLUsolve=function(e,t){var n=e.L,r=e.U,i=numeric.clone(t),o=n[0],a=n[1],c=n[2],s=r[0],u=r[1],l=r[2],f=s.length;o.length;var h,m,p=i.length;for(m=0,h=0;h<p;h++){for(;a[m]<h;)i[h]-=c[m]*i[a[m]],m++;m++}for(m=f-1,h=p-1;h>=0;h--){for(;u[m]>h;)i[h]-=l[m]*i[u[m]],m--;i[h]/=l[m],m--}return i},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,o=numeric.rep(e,-1);if("function"!=typeof t)if("L"===t)t=function(t,n){return t>=e[0]/2||n<e[1]/2};else t=function(e,t){return!0};for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(o[n][r]=i,i++);return o},numeric.cdelsq=function(e){var t,n,r,i,o,a=[[-1,0],[0,-1],[0,1],[1,0]],c=numeric.dim(e),s=c[0],u=c[1],l=[],f=[],h=[];for(t=1;t<s-1;t++)for(n=1;n<u-1;n++)if(!(e[t][n]<0)){for(r=0;r<4;r++)i=t+a[r][0],o=n+a[r][1],e[i][o]<0||(l.push(e[t][n]),f.push(e[i][o]),h.push(-1));l.push(e[t][n]),f.push(e[t][n]),h.push(4)}return[l,f,h]},numeric.cdotMV=function(e,t){var n,r,i,o=e[0],a=e[1],c=e[2],s=o.length;for(i=0,r=0;r<s;r++)o[r]>i&&(i=o[r]);for(i++,n=numeric.rep([i],0),r=0;r<s;r++)n[o[r]]+=c[r]*t[a[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var n,r,i,o=this.x,a=this.yl,c=this.yr,s=this.kl,u=this.kr,l=numeric.add,f=numeric.sub,h=numeric.mul;n=f(h(s[t],o[t+1]-o[t]),f(c[t+1],a[t])),r=l(h(u[t+1],o[t]-o[t+1]),f(c[t+1],a[t]));var m=(i=(e-o[t])/(o[t+1]-o[t]))*(1-i);return l(l(l(h(1-i,a[t]),h(i,c[t+1])),h(n,m*(1-i))),h(r,m*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,o=i.length,a=Math.floor;for(t=0,n=o-1;n-t>1;)i[r=a((t+n)/2)]<=e?t=r:n=r;return this._at(e,t)}o=e.length;var c,s=Array(o);for(c=o-1;-1!==c;--c)s[c]=this.at(e[c]);return s},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,o=this.yr,a=this.kl,c=this.kr,s=i.length,u=a,l=c,f=Array(s),h=Array(s),m=numeric.add,p=numeric.mul,d=numeric.div,g=numeric.sub;for(e=s-1;-1!==e;--e)t=r[e+1]-r[e],n=g(o[e+1],i[e]),f[e]=d(m(p(n,6),p(a[e],-4*t),p(c[e+1],-2*t)),t*t),h[e+1]=d(m(p(n,-6),p(a[e],2*t),p(c[e+1],4*t)),t*t);return new numeric.Spline(r,u,l,f,h)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,o=this.kl,a=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],o=[o],a=[a]);var c,s,u,l,f,h,m,p,d,g,y,x,v,_,b,w,k,$,M,T,A,j,S,E=r.length,C=n.length-1,P=(t=Array(E),Math.sqrt);for(c=0;c!==E;++c){for(l=r[c],f=i[c],h=o[c],m=a[c],p=[],s=0;s!==C;s++){for(s>0&&f[s]*l[s]<0&&p.push(n[s]),w=n[s+1]-n[s],n[s],y=l[s],x=f[s+1],d=h[s]/w,v=(g=m[s+1]/w)+3*y+2*d-3*x,_=3*(g+d+2*(y-x)),(b=e(d-g+3*(y-x))+12*g*y)<=0?k=($=v/_)>n[s]&&$<n[s+1]?[n[s],$,n[s+1]]:[n[s],n[s+1]]:($=(v-P(b))/_,M=(v+P(b))/_,k=[n[s]],$>n[s]&&$<n[s+1]&&k.push($),M>n[s]&&M<n[s+1]&&k.push(M),k.push(n[s+1])),A=k[0],$=this._at(A,s),u=0;u<k.length-1;u++)if(j=k[u+1],M=this._at(j,s),0!==$)if(0===M||$*M>0)A=j,$=M;else{for(var L=0;!((S=($*j-M*A)/($-M))<=A||S>=j);)if((T=this._at(S,s))*M>0)j=S,M=T,-1===L&&($*=.5),L=-1;else{if(!(T*$>0))break;A=S,$=T,1===L&&(M*=.5),L=1}p.push(S),A=k[u+1],$=this._at(A,s)}else p.push(A),A=j,$=M;0===M&&p.push(j)}t[c]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,o=e.length,a=[],c=[],s=[],u=numeric.sub,l=numeric.mul,f=numeric.add;for(i=o-2;i>=0;i--)c[i]=e[i+1]-e[i],s[i]=u(t[i+1],t[i]);"string"!=typeof n&&"string"!=typeof r||(n=r="periodic");var h=[[],[],[]];switch(typeof n){case"undefined":a[0]=l(3/(c[0]*c[0]),s[0]),h[0].push(0,0),h[1].push(0,1),h[2].push(2/c[0],1/c[0]);break;case"string":a[0]=f(l(3/(c[o-2]*c[o-2]),s[o-2]),l(3/(c[0]*c[0]),s[0])),h[0].push(0,0,0),h[1].push(o-2,0,1),h[2].push(1/c[o-2],2/c[o-2]+2/c[0],1/c[0]);break;default:a[0]=n,h[0].push(0),h[1].push(0),h[2].push(1)}for(i=1;i<o-1;i++)a[i]=f(l(3/(c[i-1]*c[i-1]),s[i-1]),l(3/(c[i]*c[i]),s[i])),h[0].push(i,i,i),h[1].push(i-1,i,i+1),h[2].push(1/c[i-1],2/c[i-1]+2/c[i],1/c[i]);switch(typeof r){case"undefined":a[o-1]=l(3/(c[o-2]*c[o-2]),s[o-2]),h[0].push(o-1,o-1),h[1].push(o-2,o-1),h[2].push(1/c[o-2],2/c[o-2]);break;case"string":h[1][h[1].length-1]=0;break;default:a[o-1]=r,h[0].push(o-1),h[1].push(o-1),h[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var m=Array(a.length);if("string"==typeof n)for(i=m.length-1;-1!==i;--i)m[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(h)),a[i]),m[i][o-1]=m[i][0];else for(i=m.length-1;-1!==i;--i)m[i]=numeric.cLUsolve(numeric.cLU(h),a[i]);return m="number"==typeof t[0]?m[0]:numeric.transpose(m),new numeric.Spline(e,t,t,m,m)},numeric.fftpow2=function e(t,n){var r=t.length;if(1!==r){var i,o,a=Math.cos,c=Math.sin,s=Array(r/2),u=Array(r/2),l=Array(r/2),f=Array(r/2);for(o=r/2,i=r-1;-1!==i;--i)l[--o]=t[i],f[o]=n[i],--i,s[o]=t[i],u[o]=n[i];e(s,u),e(l,f),o=r/2;var h,m,p,d=-6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--o&&(o=r/2-1),m=a(h=d*i),p=c(h),t[i]=s[o]+m*l[o]-p*f[o],n[i]=u[o]+m*f[o]+p*l[o]}},numeric._ifftpow2=function e(t,n){var r=t.length;if(1!==r){var i,o,a=Math.cos,c=Math.sin,s=Array(r/2),u=Array(r/2),l=Array(r/2),f=Array(r/2);for(o=r/2,i=r-1;-1!==i;--i)l[--o]=t[i],f[o]=n[i],--i,s[o]=t[i],u[o]=n[i];e(s,u),e(l,f),o=r/2;var h,m,p,d=6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--o&&(o=r/2-1),m=a(h=d*i),p=c(h),t[i]=s[o]+m*l[o]-p*f[o],n[i]=u[o]+m*f[o]+p*l[o]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){var i,o,a,c,s;for(numeric.fftpow2(e,t),numeric.fftpow2(n,r),i=e.length-1;-1!==i;--i)o=e[i],c=t[i],a=n[i],s=r[i],e[i]=o*a-c*s,t[i]=o*s+c*a;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,a=o(2),c=Math.ceil(o(2*i-1)/a),s=Math.pow(2,c),u=numeric.rep([s],0),l=numeric.rep([s],0),f=Math.cos,h=Math.sin,m=-3.141592653589793/i,p=numeric.rep([s],0),d=numeric.rep([s],0);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)d[e]=r[e];for(u[0]=1,e=1;e<=s/2;e++)t=m*e*e,u[e]=f(t),l[e]=h(t),u[s-e]=f(t),l[s-e]=h(t);var g=new numeric.T(p,d),y=new numeric.T(u,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),(g=g.mul(y)).x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,o=Math.log,a=o(2),c=Math.ceil(o(2*i-1)/a),s=Math.pow(2,c),u=numeric.rep([s],0),l=numeric.rep([s],0),f=Math.cos,h=Math.sin,m=3.141592653589793/i,p=numeric.rep([s],0),d=numeric.rep([s],0);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)d[e]=r[e];for(u[0]=1,e=1;e<=s/2;e++)t=m*e*e,u[e]=f(t),l[e]=h(t),u[s-e]=f(t),l[s-e]=h(t);var g=new numeric.T(p,d),y=new numeric.T(u,l);return g=g.mul(y),numeric.convpow2(g.x,g.y,numeric.clone(y.x),numeric.neg(y.y)),(g=g.mul(y)).x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,o,a,c=Math.max,s=numeric.clone(t),u=Array(n);numeric.div,numeric.sub;c=Math.max;var l,f,h,m,p,d,g=Math.abs,y=Math.min,x=0;for(i=0;i<n;i++)for(var v=c(1e-6*r,1e-8);;){if(++x>20)throw new Error("Numerical gradient fails");if(s[i]=t[i]+v,o=e(s),s[i]=t[i]-v,a=e(s),s[i]=t[i],isNaN(o)||isNaN(a))v/=16;else{if(u[i]=(o-a)/(2*v),l=t[i]-v,f=t[i],h=t[i]+v,m=(o-r)/v,p=(r-a)/v,d=c(g(u[i]),g(r),g(o),g(a),g(l),g(f),g(h),1e-8),!(y(c(g(m-u[i]),g(p-u[i]),g(m-p))/d,v/d)>.001))break;v/=16}}return u},numeric.uncmin=function(e,t,n,r,i,o,a){var c=numeric.gradient;void 0===a&&(a={}),void 0===n&&(n=1e-8),void 0===r&&(r=function(t){return c(e,t)}),void 0===i&&(i=1e3);var s,u,l=(t=numeric.clone(t)).length,f=e(t);if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var h=Math.max,m=numeric.norm2;n=h(n,numeric.epsilon);var p,d,g,y=a.Hinv||numeric.identity(l),x=numeric.dot;numeric.inv;var v,_,b,w,k,$,M,T=numeric.sub,A=numeric.add,j=numeric.tensor,S=numeric.div,E=numeric.mul,C=numeric.all,P=numeric.isFinite,L=numeric.neg,q=0,N="";for(d=r(t);q<i;){if("function"==typeof o&&o(q,t,f,d,y)){N="Callback returned true";break}if(!C(P(d))){N="Gradient has Infinity or NaN";break}if(!C(P(p=L(x(y,d))))){N="Search direction has Infinity or NaN";break}if((M=m(p))<n){N="Newton step smaller than tol";break}for($=1,u=x(d,p),_=t;q<i&&!($*M<n)&&(_=A(t,v=E(p,$)),(s=e(_))-f>=.1*$*u||isNaN(s));)$*=.5,++q;if($*M<n){N="Line search step size smaller than tol";break}if(q===i){N="maxit reached during line search";break}k=x(b=T(g=r(_),d),v),w=x(y,b),y=T(A(y,E((k+x(b,w))/(k*k),j(v,v))),S(A(j(w,v),j(v,w)),k)),t=_,f=s,d=g,++q}return{solution:t,f:f,gradient:d,invHessian:y,iterations:q,message:N}},numeric.Dopri=function(e,t,n,r,i,o,a){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=a,this.message=o},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,o,a,c,s,u=this,l=u.x,f=u.y,h=u.f,m=u.ymid;l.length;var p,d,g,y=numeric.add,x=numeric.mul,v=numeric.sub;return r=l[t],i=l[t+1],a=f[t],c=f[t+1],o=r+.5*(i-r),s=m[t],p=v(h[t],x(a,1/(r-o)+2/(r-i))),d=v(h[t+1],x(c,1/(i-o)+2/(i-r))),y(y(y(y(x(a,(g=[n(e-i)*(e-o)/n(r-i)/(r-o),n(e-r)*n(e-i)/n(r-o)/n(i-o),n(e-r)*(e-o)/n(i-r)/(i-o),(e-r)*n(e-i)*(e-o)/n(r-i)/(r-o),(e-i)*n(e-r)*(e-o)/n(r-i)/(i-o)])[0]),x(s,g[1])),x(c,g[2])),x(p,g[3])),x(d,g[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var o=e.length,a=Array(o);for(t=o-1;-1!==t;--t)a[t]=this.at(e[t]);return a}var c=this.x;for(t=0,n=c.length-1;n-t>1;)c[r=i(.5*(t+n))]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,o,a){void 0===i&&(i=1e-6),void 0===o&&(o=1e3);var c,s,u,l,f,h,m,p,d,g,y,x,v,_=[e],b=[n],w=[r(e,n)],k=[],$=[3/40,9/40],M=[44/45,-56/15,32/9],T=[19372/6561,-25360/2187,64448/6561,-212/729],A=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],j=[35/384,0,500/1113,125/192,-2187/6784,11/84],S=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,5618549.5/235043384],E=[.2,.3,.8,8/9,1,1],C=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],P=0,L=(t-e)/10,q=0,N=numeric.add,V=numeric.mul,F=Math.min,R=Math.abs,O=numeric.norminf,B=Math.pow,D=numeric.any,I=numeric.lt,z=numeric.and;numeric.sub;var U=new numeric.Dopri(_,b,w,k,-1,"");for("function"==typeof a&&(y=a(e,n));e<t&&q<o;)if(++q,e+L>t&&(L=t-e),c=r(e+E[0]*L,N(n,V(.2*L,w[P]))),s=r(e+E[1]*L,N(N(n,V($[0]*L,w[P])),V($[1]*L,c))),u=r(e+E[2]*L,N(N(N(n,V(M[0]*L,w[P])),V(M[1]*L,c)),V(M[2]*L,s))),l=r(e+E[3]*L,N(N(N(N(n,V(T[0]*L,w[P])),V(T[1]*L,c)),V(T[2]*L,s)),V(T[3]*L,u))),f=r(e+E[4]*L,N(N(N(N(N(n,V(A[0]*L,w[P])),V(A[1]*L,c)),V(A[2]*L,s)),V(A[3]*L,u)),V(A[4]*L,l))),h=r(e+L,d=N(N(N(N(N(n,V(w[P],L*j[0])),V(s,L*j[2])),V(u,L*j[3])),V(l,L*j[4])),V(f,L*j[5]))),(g="number"==typeof(m=N(N(N(N(N(V(w[P],L*C[0]),V(s,L*C[2])),V(u,L*C[3])),V(l,L*C[4])),V(f,L*C[5])),V(h,L*C[6])))?R(m):O(m))>i){if(e+(L=.2*L*B(i/g,.25))===e){U.msg="Step size became too small";break}}else{if(k[P]=N(N(N(N(N(N(n,V(w[P],L*S[0])),V(s,L*S[2])),V(u,L*S[3])),V(l,L*S[4])),V(f,L*S[5])),V(h,L*S[6])),_[++P]=e+L,b[P]=d,w[P]=h,"function"==typeof a){var H,X,Y=e,Q=e+.5*L;if(x=a(Q,k[P-1]),D(v=z(I(y,0),I(0,x)))||(Y=Q,y=x,x=a(Q=e+L,d),v=z(I(y,0),I(0,x))),D(v)){for(var Z,J,G=0,W=1,K=1;;){if("number"==typeof y)X=(K*x*Y-W*y*Q)/(K*x-W*y);else for(X=Q,p=y.length-1;-1!==p;--p)y[p]<0&&x[p]>0&&(X=F(X,(K*x[p]*Y-W*y[p]*Q)/(K*x[p]-W*y[p])));if(X<=Y||X>=Q)break;J=a(X,H=U._at(X,P-1)),D(Z=z(I(y,0),I(0,J)))?(Q=X,x=J,v=Z,K=1,-1===G?W*=.5:W=1,G=-1):(Y=X,y=J,W=1,1===G?K*=.5:K=1,G=1)}return d=U._at(.5*(e+X),P-1),U.f[P]=r(X,H),U.x[P]=X,U.y[P]=H,U.ymid[P-1]=d,U.events=v,U.iterations=q,U}}e+=L,n=d,y=x,L=F(.8*L*B(i/g,.25),4*L)}return U.iterations=q,U},numeric.LU=function(e,t){t=t||!1;var n,r,i,o,a,c,s,u,l,f=Math.abs,h=e.length,m=h-1,p=new Array(h);for(t||(e=numeric.clone(e)),i=0;i<h;++i){for(s=i,l=f((c=e[i])[i]),r=i+1;r<h;++r)l<(o=f(e[r][i]))&&(l=o,s=r);for(p[i]=s,s!=i&&(e[i]=e[s],e[s]=c,c=e[i]),a=c[i],n=i+1;n<h;++n)e[n][i]/=a;for(n=i+1;n<h;++n){for(u=e[n],r=i+1;r<m;++r)u[r]-=u[i]*c[r],u[++r]-=u[i]*c[r];r===m&&(u[r]-=u[i]*c[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,i,o,a,c=e.LU,s=c.length,u=numeric.clone(t),l=e.P;for(n=s-1;-1!==n;--n)u[n]=t[n];for(n=0;n<s;++n)for(i=l[n],l[n]!==n&&(a=u[n],u[n]=u[i],u[i]=a),o=c[n],r=0;r<n;++r)u[n]-=u[r]*o[r];for(n=s-1;n>=0;--n){for(o=c[n],r=n+1;r<s;++r)u[n]-=u[r]*o[r];u[n]/=o[n]}return u},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,o,a,c,s,u=numeric.dim(e),l=u[0],f=u[1],h=numeric.identity(l),m=Array(l),p=Math.abs,d=numeric.diveq;for(e=numeric.clone(e),t=0;t<l;++t){for(r=0,o=e[t],a=h[t],n=1;n<f;++n)p(o[r])<p(o[n])&&(r=n);for(m[t]=r,d(a,o[r]),d(o,o[r]),n=0;n<l;++n)if(n!==t){for(s=(c=e[n])[r],i=f-1;-1!==i;--i)c[i]-=o[i]*s;for(c=h[n],i=l-1;-1!==i;--i)c[i]-=a[i]*s}}return{I:h,A:e,P:m}},numeric.__solveLP=function(e,t,n,r,i,o,a){var c=numeric.sum;numeric.log;var s,u=numeric.mul,l=numeric.sub,f=numeric.dot,h=numeric.div,m=numeric.add,p=e.length,d=n.length,g=!1,y=1;numeric.transpose(t),numeric.svd;var x=numeric.transpose;numeric.leq;var v=Math.sqrt,_=Math.abs;numeric.muleq,numeric.norminf,numeric.any;var b,w=Math.min,k=numeric.all,$=numeric.gt,M=Array(p),T=Array(d);numeric.rep([d],1);var A,j,S=numeric.solve,E=l(n,f(t,o)),C=f(e,e);for(A=0;A<i;++A){var P,L;for(P=d-1;-1!==P;--P)T[P]=h(t[P],E[P]);var q=x(T);for(P=p-1;-1!==P;--P)M[P]=c(q[P]);y=.25*_(C/f(e,M));var N=100*v(C/f(M,M));for((!isFinite(y)||y>N)&&(y=N),j=m(e,u(y,M)),b=f(q,T),P=p-1;-1!==P;--P)b[P][P]+=1;L=S(b,h(j,y),!0);var V=h(E,f(t,L)),F=1;for(P=d-1;-1!==P;--P)V[P]<0&&(F=w(F,-.999*V[P]));if(s=l(o,u(L,F)),!k($(E=l(n,f(t,s)),0)))return{solution:o,message:"",iterations:A};if(o=s,y<r)return{solution:s,message:"",iterations:A};if(a){var R=f(e,j),O=f(t,j);for(g=!0,P=d-1;-1!==P;--P)if(R*O[P]<0){g=!1;break}}else g=!(o[p-1]>=0);if(g)return{solution:s,message:"Unbounded",iterations:A}}return{solution:o,message:"maximum iteration count exceeded",iterations:A}},numeric._solveLP=function(e,t,n,r,i){var o=e.length,a=n.length;numeric.sum,numeric.log,numeric.mul;var c=numeric.sub,s=numeric.dot;numeric.div,numeric.add;var u=numeric.rep([o],0).concat([1]),l=numeric.rep([a,1],-1),f=numeric.blockMatrix([[t,l]]),h=n,m=numeric.rep([o],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(u,f,h,r,i,m,!1),d=numeric.clone(p.solution);if(d.length=o,numeric.inf(c(n,s(t,d)))<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var g=numeric.__solveLP(e,t,n,r,i-p.iterations,d,!0);return g.iterations+=p.iterations,g},numeric.solveLP=function(e,t,n,r,i,o,a){if(void 0===a&&(a=1e3),void 0===o&&(o=numeric.epsilon),void 0===r)return numeric._solveLP(e,t,n,o,a);var c,s=r.length,u=r[0].length,l=t.length,f=numeric.echelonize(r),h=numeric.rep([u],0),m=f.P,p=[];for(c=m.length-1;-1!==c;--c)h[m[c]]=1;for(c=u-1;-1!==c;--c)0===h[c]&&p.push(c);var d=numeric.getRange,g=numeric.linspace(0,s-1),y=numeric.linspace(0,l-1),x=d(r,g,p),v=d(t,y,m),_=d(t,y,p),b=numeric.dot,w=numeric.sub,k=b(v,f.I),$=w(_,b(k,x)),M=w(n,b(k,i)),T=Array(m.length),A=Array(p.length);for(c=m.length-1;-1!==c;--c)T[c]=e[m[c]];for(c=p.length-1;-1!==c;--c)A[c]=e[p[c]];var j=w(A,b(T,b(f.I,x))),S=numeric._solveLP(j,$,M,o,a),E=S.solution;if(E!=E)return S;var C=b(f.I,w(i,b(x,E))),P=Array(e.length);for(c=m.length-1;-1!==c;--c)P[m[c]]=C[c];for(c=p.length-1;-1!==c;--c)P[p[c]]=E[c];return{solution:P,message:S.message,iterations:S.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var t,n,r,i,o=0,a=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],c=e.length,s=0,u={},l=[],f=0,h={},m=0,p=[],d=[],g=[];function y(n){throw new Error("MPStoLP: "+n+"\nLine "+t+": "+e[t]+"\nCurrent state: "+a[o]+"\n")}for(t=0;t<c;++t){var x=(r=e[t]).match(/\S*/g),v=[];for(n=0;n<x.length;++n)""!==x[n]&&v.push(x[n]);if(0!==v.length){for(n=0;n<a.length&&r.substr(0,a[n].length)!==a[n];++n);if(n<a.length){if(o=n,1===n&&(i=v[1]),6===n)return{name:i,c:p,A:numeric.transpose(d),b:g,rows:u,vars:h}}else switch(o){case 0:case 1:y("Unexpected line");case 2:switch(v[0]){case"N":0===s?s=v[1]:y("Two or more N rows");break;case"L":u[v[1]]=f,l[f]=1,g[f]=0,++f;break;case"G":u[v[1]]=f,l[f]=-1,g[f]=0,++f;break;case"E":u[v[1]]=f,l[f]=0,g[f]=0,++f;break;default:y("Parse error "+numeric.prettyPrint(v))}break;case 3:h.hasOwnProperty(v[0])||(h[v[0]]=m,p[m]=0,d[m]=numeric.rep([f],0),++m);var _=h[v[0]];for(n=1;n<v.length;n+=2)if(v[n]!==s){var b=u[v[n]];d[_][b]=(l[b]<0?-1:1)*parseFloat(v[n+1])}else p[_]=parseFloat(v[n+1]);break;case 4:for(n=1;n<v.length;n+=2)g[u[v[n]]]=(l[u[v[n]]]<0?-1:1)*parseFloat(v[n+1]);break;case 5:break;case 6:y("Internal error")}}}y("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,o,a){function c(e){var t,r,i=this,o=e.length,a=0,c=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(e=[o++]);a<n;)i.S[a]=a++;for(a=0;a<n;a++)c=l(c+(t=i.S[a])+e[a%o]),r=i.S[c],i.S[a]=r,i.S[c]=t;i.g=function(e){var t=i.S,r=l(i.i+1),o=t[r],a=l(i.j+o),c=t[a];t[r]=c,t[a]=o;for(var s=t[l(o+c)];--e;)r=l(r+1),c=t[a=l(a+(o=t[r]))],t[r]=c,t[a]=o,s=s*n+t[l(o+c)];return i.i=r,i.j=a,s},i.g(n)}function s(e,t,n,r,i){if(n=[],i=typeof e,t&&"object"==i)for(r in e)if(r.indexOf("S")<5)try{n.push(s(e[r],t-1))}catch(e){}return n.length?n:e+("string"!=i?"\0":"")}function u(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[l(r)]=l((n^=19*t[l(r)])+e.charCodeAt(r));for(r in e="",t)e+=String.fromCharCode(t[r]);return e}function l(e){return 255&e}t.seedrandom=function(r,l){var f,h=[];return r=u(s(l?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),h),u((f=new c(h)).S,e),t.random=function(){for(var e=f.g(6),t=a,r=0;e<i;)e=(e+r)*n,t*=n,r=f.g(1);for(;e>=o;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},a=t.pow(n,6),i=t.pow(2,i),o=2*i,u(t.random(),e)}([],numeric.seedrandom,256,0,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;n<i;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;t<i;t++)r[t-1]=n(e[t]);return r}function r(e,t,n,r,i,o,a,c,s,u,l,f,h,m,p,d){var g,y,x,v,_,b,w,k,$,M,T,A,j,S,E,C,P,L,q,N,V,F,R,O,B,D,I;j=Math.min(r,u),x=2*r+j*(j+5)/2+2*u+1,O=1e-60;do{B=1+.1*(O+=O),D=1+.2*O}while(B<=1||D<=1);for(g=1;g<=r;g+=1)p[g]=t[g];for(g=r+1;g<=x;g+=1)p[g]=0;for(g=1;g<=u;g+=1)f[g]=0;if(_=[],0===d[1]){if(function(e,t,n,r){var i,o,a,c,s,u;for(o=1;o<=n;o+=1){if(r[1]=o,u=0,(a=o-1)<1){if((u=e[o][o]-u)<=0)break;e[o][o]=Math.sqrt(u)}else{for(c=1;c<=a;c+=1){for(s=e[c][o],i=1;i<c;i+=1)s-=e[i][o]*e[i][c];s/=e[c][c],e[c][o]=s,u+=s*s}if((u=e[o][o]-u)<=0)break;e[o][o]=Math.sqrt(u)}r[1]=0}}(e,0,r,_),0!==_[1])return void(d[1]=2);!function(e,t,n,r){var i,o,a,c;for(o=1;o<=n;o+=1){for(c=0,i=1;i<o;i+=1)c+=e[i][o]*r[i];r[o]=(r[o]-c)/e[o][o]}for(a=1;a<=n;a+=1)for(r[o=n+1-a]=r[o]/e[o][o],c=-r[o],i=1;i<o;i+=1)r[i]=r[i]+c*e[i][o]}(e,0,r,t),function(e,t,n){var r,i,o,a,c;for(o=1;o<=n;o+=1){for(e[o][o]=1/e[o][o],c=-e[o][o],r=1;r<o;r+=1)e[r][o]=c*e[r][o];if(n<(a=o+1))break;for(i=a;i<=n;i+=1)for(c=e[o][i],e[o][i]=0,r=1;r<=o;r+=1)e[r][i]=e[r][i]+c*e[r][o]}}(e,0,r)}else{for(y=1;y<=r;y+=1)for(i[y]=0,g=1;g<=y;g+=1)i[y]=i[y]+e[g][y]*t[g];for(y=1;y<=r;y+=1)for(t[y]=0,g=y;g<=r;g+=1)t[y]=t[y]+e[y][g]*i[g]}for(o[1]=0,y=1;y<=r;y+=1)for(i[y]=t[y],o[1]=o[1]+p[y]*i[y],p[y]=0,g=y+1;g<=r;g+=1)e[g][y]=0;for(o[1]=-o[1]/2,d[1]=0,S=(M=($=(T=(k=(w=r)+r)+j)+j+1)+j*(j+1)/2)+u,g=1;g<=u;g+=1){for(C=0,y=1;y<=r;y+=1)C+=a[y][g]*a[y][g];p[S+g]=Math.sqrt(C)}function z(){for(m[1]=m[1]+1,x=M,g=1;g<=u;g+=1){for(x+=1,C=-c[g],y=1;y<=r;y+=1)C+=a[y][g]*i[y];if(Math.abs(C)<O&&(C=0),g>l)p[x]=C;else if(p[x]=-Math.abs(C),C>0){for(y=1;y<=r;y+=1)a[y][g]=-a[y][g];c[g]=-c[g]}}for(g=1;g<=h;g+=1)p[M+f[g]]=0;for(A=0,E=0,g=1;g<=u;g+=1)p[M+g]<E*p[S+g]&&(A=g,E=p[M+g]/p[S+g]);return 0===A?999:0}function U(){for(g=1;g<=r;g+=1){for(C=0,y=1;y<=r;y+=1)C+=e[y][g]*a[y][A];p[g]=C}for(v=w,g=1;g<=r;g+=1)p[v+g]=0;for(y=h+1;y<=r;y+=1)for(g=1;g<=r;g+=1)p[v+g]=p[v+g]+e[g][y]*p[y];for(F=!0,g=h;g>=1;g-=1){for(C=p[g],v=(x=$+g*(g+3)/2)-g,y=g+1;y<=h;y+=1)C-=p[x]*p[k+y],x+=y;if(C/=p[v],p[k+g]=C,f[g]<l)break;if(C<0)break;F=!1,b=g}if(!F)for(P=p[T+b]/p[k+b],g=1;g<=h&&!(f[g]<l)&&!(p[k+g]<0);g+=1)(E=p[T+g]/p[k+g])<P&&(P=E,b=g);for(C=0,g=w+1;g<=w+r;g+=1)C+=p[g]*p[g];if(Math.abs(C)<=O){if(F)return d[1]=1,999;for(g=1;g<=h;g+=1)p[T+g]=p[T+g]-P*p[k+g];return p[T+h+1]=p[T+h+1]+P,700}for(C=0,g=1;g<=r;g+=1)C+=p[w+g]*a[g][A];for(L=-p[M+A]/C,R=!0,F||P<L&&(L=P,R=!1),g=1;g<=r;g+=1)i[g]=i[g]+L*p[w+g],Math.abs(i[g])<O&&(i[g]=0);for(o[1]=o[1]+L*C*(L/2+p[T+h+1]),g=1;g<=h;g+=1)p[T+g]=p[T+g]-L*p[k+g];if(p[T+h+1]=p[T+h+1]+L,!R){for(C=-c[A],y=1;y<=r;y+=1)C+=i[y]*a[y][A];if(A>l)p[M+A]=C;else if(p[M+A]=-Math.abs(C),C>0){for(y=1;y<=r;y+=1)a[y][A]=-a[y][A];c[A]=-c[A]}return 700}for(f[h+=1]=A,x=$+(h-1)*h/2+1,g=1;g<=h-1;g+=1)p[x]=p[g],x+=1;if(h===r)p[x]=p[r];else{for(g=r;g>=h+1&&0!==p[g]&&(q=Math.max(Math.abs(p[g-1]),Math.abs(p[g])),N=Math.min(Math.abs(p[g-1]),Math.abs(p[g])),E=p[g-1]>=0?Math.abs(q*Math.sqrt(1+N*N/(q*q))):-Math.abs(q*Math.sqrt(1+N*N/(q*q))),q=p[g-1]/E,N=p[g]/E,1!==q);g-=1)if(0===q)for(p[g-1]=N*E,y=1;y<=r;y+=1)E=e[y][g-1],e[y][g-1]=e[y][g],e[y][g]=E;else for(p[g-1]=E,V=N/(1+q),y=1;y<=r;y+=1)E=q*e[y][g-1]+N*e[y][g],e[y][g]=V*(e[y][g-1]+E)-e[y][g],e[y][g-1]=E;p[x]=p[h]}return 0}function H(){if(0===p[v=(x=$+b*(b+1)/2+1)+b])return 798;if(q=Math.max(Math.abs(p[v-1]),Math.abs(p[v])),N=Math.min(Math.abs(p[v-1]),Math.abs(p[v])),E=p[v-1]>=0?Math.abs(q*Math.sqrt(1+N*N/(q*q))):-Math.abs(q*Math.sqrt(1+N*N/(q*q))),q=p[v-1]/E,N=p[v]/E,1===q)return 798;if(0===q){for(g=b+1;g<=h;g+=1)E=p[v-1],p[v-1]=p[v],p[v]=E,v+=g;for(g=1;g<=r;g+=1)E=e[g][b],e[g][b]=e[g][b+1],e[g][b+1]=E}else{for(V=N/(1+q),g=b+1;g<=h;g+=1)E=q*p[v-1]+N*p[v],p[v]=V*(p[v-1]+E)-p[v],p[v-1]=E,v+=g;for(g=1;g<=r;g+=1)E=q*e[g][b]+N*e[g][b+1],e[g][b+1]=V*(e[g][b]+E)-e[g][b+1],e[g][b]=E}return 0}function X(){for(v=x-b,g=1;g<=b;g+=1)p[v]=p[x],x+=1,v+=1;return p[T+b]=p[T+b+1],f[b]=f[b+1],(b+=1)<h?797:0}function Y(){return p[T+h]=p[T+h+1],p[T+h+1]=0,f[h]=0,h-=1,m[2]=m[2]+1,0}for(h=0,m[1]=0,m[2]=0,I=0;;){if(999===(I=z()))return;for(;0!==(I=U());){if(999===I)return;if(700===I)if(b===h)Y();else{for(;H(),797===(I=X()););Y()}}}}e.solveQP=function(e,i,o,a,c,s){e=t(e),i=t(i),o=t(o);var u,l,f,h,m,p=[],d=[],g=[],y=[],x=[];if(c=c||0,s=s?t(s):[void 0,0],a=a?t(a):[],l=e.length-1,f=o[1].length-1,!a)for(u=1;u<=f;u+=1)a[u]=0;for(u=1;u<=f;u+=1)d[u]=0;for(h=Math.min(l,f),u=1;u<=l;u+=1)g[u]=0;for(p[1]=0,u=1;u<=2*l+h*(h+5)/2+2*f+1;u+=1)y[u]=0;for(u=1;u<=2;u+=1)x[u]=0;return r(e,i,0,l,g,p,o,a,0,f,c,d,0,x,y,s),m="",1===s[1]&&(m="constraints are inconsistent, no solution!"),2===s[1]&&(m="matrix D in quadratic function is not positive definite!"),{solution:n(g),value:n(p),unconstrained_solution:n(i),iterations:n(x),iact:n(d),message:m}}}(numeric),numeric.svd=function(e){var t,n=numeric.epsilon,r=1e-64/n,i=0,o=0,a=0,c=0,s=0,u=numeric.clone(e),l=u.length,f=u[0].length;if(l<f)throw"Need more rows than columns";var h=new Array(f),m=new Array(f);for(o=0;o<f;o++)h[o]=m[o]=0;var p=numeric.rep([f,f],0);function d(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var g=0,y=0,x=0,v=0,_=0,b=0,w=0;for(o=0;o<f;o++){for(h[o]=y,w=0,s=o+1,a=o;a<l;a++)w+=u[a][o]*u[a][o];if(w<=r)y=0;else for(g=u[o][o],y=Math.sqrt(w),g>=0&&(y=-y),x=g*y-w,u[o][o]=g-y,a=s;a<f;a++){for(w=0,c=o;c<l;c++)w+=u[c][o]*u[c][a];for(g=w/x,c=o;c<l;c++)u[c][a]+=g*u[c][o]}for(m[o]=y,w=0,a=s;a<f;a++)w+=u[o][a]*u[o][a];if(w<=r)y=0;else{for(g=u[o][o+1],y=Math.sqrt(w),g>=0&&(y=-y),x=g*y-w,u[o][o+1]=g-y,a=s;a<f;a++)h[a]=u[o][a]/x;for(a=s;a<l;a++){for(w=0,c=s;c<f;c++)w+=u[a][c]*u[o][c];for(c=s;c<f;c++)u[a][c]+=w*h[c]}}(_=Math.abs(m[o])+Math.abs(h[o]))>v&&(v=_)}for(o=f-1;-1!=o;o+=-1){if(0!=y){for(x=y*u[o][o+1],a=s;a<f;a++)p[a][o]=u[o][a]/x;for(a=s;a<f;a++){for(w=0,c=s;c<f;c++)w+=u[o][c]*p[c][a];for(c=s;c<f;c++)p[c][a]+=w*p[c][o]}}for(a=s;a<f;a++)p[o][a]=0,p[a][o]=0;p[o][o]=1,y=h[o],s=o}for(o=f-1;-1!=o;o+=-1){for(s=o+1,y=m[o],a=s;a<f;a++)u[o][a]=0;if(0!=y){for(x=u[o][o]*y,a=s;a<f;a++){for(w=0,c=s;c<l;c++)w+=u[c][o]*u[c][a];for(g=w/x,c=o;c<l;c++)u[c][a]+=g*u[c][o]}for(a=o;a<l;a++)u[a][o]=u[a][o]/y}else for(a=o;a<l;a++)u[a][o]=0;u[o][o]+=1}for(n*=v,c=f-1;-1!=c;c+=-1)for(var k=0;k<50;k++){var $=!1;for(s=c;-1!=s;s+=-1){if(Math.abs(h[s])<=n){$=!0;break}if(Math.abs(m[s-1])<=n)break}if(!$){i=0,w=1;var M=s-1;for(o=s;o<c+1&&(g=w*h[o],h[o]=i*h[o],!(Math.abs(g)<=n));o++)for(x=d(g,y=m[o]),m[o]=x,i=y/x,w=-g/x,a=0;a<l;a++)_=u[a][M],b=u[a][o],u[a][M]=_*i+b*w,u[a][o]=-_*w+b*i}if(b=m[c],s==c){if(b<0)for(m[c]=-b,a=0;a<f;a++)p[a][c]=-p[a][c];break}if(k>=49)throw"Error: no convergence.";for(v=m[s],y=d(g=(((_=m[c-1])-b)*(_+b)+((y=h[c-1])-(x=h[c]))*(y+x))/(2*x*_),1),g=g<0?((v-b)*(v+b)+x*(_/(g-y)-x))/v:((v-b)*(v+b)+x*(_/(g+y)-x))/v,i=1,w=1,o=s+1;o<c+1;o++){for(y=h[o],_=m[o],x=w*y,y*=i,b=d(g,x),h[o-1]=b,g=v*(i=g/b)+y*(w=x/b),y=-v*w+y*i,x=_*w,_*=i,a=0;a<f;a++)v=p[a][o-1],b=p[a][o],p[a][o-1]=v*i+b*w,p[a][o]=-v*w+b*i;for(b=d(g,x),m[o-1]=b,g=(i=g/b)*y+(w=x/b)*_,v=-w*y+i*_,a=0;a<l;a++)_=u[a][o-1],b=u[a][o],u[a][o-1]=_*i+b*w,u[a][o]=-_*w+b*i}h[s]=0,h[c]=g,m[c]=v}for(o=0;o<m.length;o++)m[o]<n&&(m[o]=0);for(o=0;o<f;o++)for(a=o-1;a>=0;a--)if(m[a]<m[o]){for(i=m[a],m[a]=m[o],m[o]=i,c=0;c<u.length;c++)t=u[c][o],u[c][o]=u[c][a],u[c][a]=t;for(c=0;c<p.length;c++)t=p[c][o],p[c][o]=p[c][a],p[c][a]=t;o=a}return{U:u,S:m,V:p}}}));const{window:window_1$1}=globals;function get_each_context$1(e,t,n){const r=e.slice();return r[30]=t[n].x,r[31]=t[n].y,r[33]=n,r}function create_each_block$1(e){let t,n,r;function i(){return e[18](e[33])}return{c(){t=element("div"),attr(t,"class","corner"),set_style(t,"left",e[30]-5+"px"),set_style(t,"top",e[31]-5+"px")},m(e,o){insert(e,t,o),n||(r=listen(t,"mousedown",i),n=!0)},p(n,r){e=n,16&r[0]&&set_style(t,"left",e[30]-5+"px"),16&r[0]&&set_style(t,"top",e[31]-5+"px")},d(e){e&&detach(t),n=!1,r()}}}function create_fragment$3(e){let t,n,r,i,o,a,c,s,u,l,f,h,m=e[4],p=[];for(let t=0;t<m.length;t+=1)p[t]=create_each_block$1(get_each_context$1(e,m,t));return{c(){t=element("div"),n=element("div"),r=element("img"),o=space();for(let e=0;e<p.length;e+=1)p[e].c();a=space(),c=element("canvas"),s=space(),u=element("img"),this.c=noop,set_style(r,"opacity",e[0]/100),set_style(r,"transform",e[6]),src_url_equal(r.src,i=e[2])||attr(r,"src",i),set_style(n,"position","relative"),set_style(n,"width","100%"),set_style(n,"height","100% "),attr(t,"class","container"),attr(c,"width","1000"),attr(c,"height","1000"),src_url_equal(u.src,l=e[2])||attr(u,"src",l),set_style(u,"visibility","hidden")},m(i,l){insert(i,t,l),append(t,n),append(n,r),e[17](r),append(n,o);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(n,null);e[19](t),insert(i,a,l),insert(i,c,l),e[20](c),insert(i,s,l),insert(i,u,l),e[21](u),f||(h=[listen(window_1$1,"pointermove",e[10]),listen(window_1$1,"pointerup",e[9])],f=!0)},p(e,t){if(1&t[0]&&set_style(r,"opacity",e[0]/100),64&t[0]&&set_style(r,"transform",e[6]),4&t[0]&&!src_url_equal(r.src,i=e[2])&&attr(r,"src",i),272&t[0]){let r;for(m=e[4],r=0;r<m.length;r+=1){const i=get_each_context$1(e,m,r);p[r]?p[r].p(i,t):(p[r]=create_each_block$1(i),p[r].c(),p[r].m(n,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=m.length}4&t[0]&&!src_url_equal(u.src,l=e[2])&&attr(u,"src",l)},i:noop,o:noop,d(n){n&&detach(t),e[17](null),destroy_each(p,n),e[19](null),n&&detach(a),n&&detach(c),e[20](null),n&&detach(s),n&&detach(u),e[21](null),f=!1,run_all(h)}}}function getCenterFromCorners(e){const t=e[0],n=e[2];return[(t.x+n.x)/2,(t.y+n.y)/2]}function instance$3(e,t,n){let r,{imageurl:i=""}=t,{position:o}=t,{resultCanvas:a}=t,{layerimagedata:c}=t,{zoom:s=100}=t,{ratio:u=window.devicePixelRatio}=t,{opacity:l=100}=t;function f(e){return e/(parseFloat(s)/100/u)}let h,m,p=0,d=[{x:0,y:0},{x:400,y:0},{x:400,y:300},{x:0,y:300}],g=[...d],y=!1,x=null,v="";function _(e,t){y=!0,x=e}function b(){const e=function(e,t,n){const r=-n,i=Math.cos(r),o=Math.sin(r);let[a,c]=getCenterFromCorners(e);const s=e.map((({x:e,y:t})=>{const n=e-a,r=t-c;return{x:n*i-r*o+a,y:n*o+r*i+c}})),u=[];for(let e=0;e<8;e++)u[e]=[];for(let e=0;e<4;e++)u[e][0]=u[e+4][3]=s[e].x,u[e][1]=u[e+4][4]=s[e].y,u[e][2]=u[e+4][5]=1,u[e][3]=u[e][4]=u[e][5]=0,u[e+4][0]=u[e+4][1]=u[e+4][2]=0,u[e][6]=-s[e].x*t[e].x,u[e][7]=-s[e].y*t[e].x,u[e+4][6]=-s[e].x*t[e].y,u[e+4][7]=-s[e].y*t[e].y;const l=[t[0].x,t[1].x,t[2].x,t[3].x,t[0].y,t[1].y,t[2].y,t[3].y],f=numeric1_2_6.solve(u,l).concat(1);return`matrix3d(${f[0]}, ${f[3]}, 0, ${f[6]}, ${f[1]}, ${f[4]}, 0, ${f[7]}, 0, 0, 1, 0, ${f[2]}, ${f[5]}, 0, 1)`}(d,g,p);n(6,v=e)}return e.$$set=e=>{"imageurl"in e&&n(2,i=e.imageurl),"position"in e&&n(11,o=e.position),"resultCanvas"in e&&n(1,a=e.resultCanvas),"layerimagedata"in e&&n(12,c=e.layerimagedata),"zoom"in e&&n(13,s=e.zoom),"ratio"in e&&n(14,u=e.ratio),"opacity"in e&&n(0,l=e.opacity)},e.$$.update=()=>{6145&e.$$.dirty[0]&&!o&&c&&(n(11,o={}),n(11,o.x=c._x,o),n(11,o.y=c._y,o),n(11,o.width=c._width,o),n(11,o.height=c._height,o),o.opacity&&n(0,l=o.opacity),n(0,l=o.position??l)),2049&e.$$.dirty[0]&&o&&(n(0,l=o.position??l),d=[{x:0,y:0},{x:o.width,y:0},{x:o.width,y:o.height},{x:0,y:o.height}],n(4,g=[...d]),n(16,p=o.rotation||0),b(),n(5,h.style.top=o.y+"px",h),n(5,h.style.left=o.x+"px",h),n(5,h.style.width=o.width+"px",h),n(5,h.style.height=o.height+"px",h)),65536&e.$$.dirty[0]&&p&&b()},[l,a,i,r,g,h,v,m,_,function(){y=!1,x=null},function(e){if(!y||null===x)return;const t=h.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top;n(4,g=g.map(((e,t)=>t===x?{x:r,y:i}:e))),b()},o,c,s,u,function(){!function(){let e=g.map((e=>(e.x=f(e.x),e.y=f(e.y),e)));warpImage(m,e,a,p)}()},p,function(e){binding_callbacks[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},e=>_(e),function(e){binding_callbacks[e?"unshift":"push"]((()=>{h=e,n(5,h),n(11,o),n(0,l),n(12,c)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{a=e,n(1,a)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{m=e,n(7,m)}))}]}class FourCornersTransformation extends SvelteElement{constructor(e){super();const t=document.createElement("style");t.textContent=".container{position:absolute;left:0px;top:0px;width:100%;height:100%;transform:rotate(0rad)}img{position:absolute;top:0;left:0;width:100%;height:100%;transform-origin:top left;user-select:none}.corner{position:absolute;width:10px;height:10px;background-color:red;border-radius:50%;cursor:pointer;user-select:none}",this.shadowRoot.appendChild(t),init(this,{target:this.shadowRoot,props:attribute_to_object(this.attributes),customElement:!0},instance$3,create_fragment$3,safe_not_equal,{imageurl:2,position:11,resultCanvas:1,layerimagedata:12,zoom:13,ratio:14,opacity:0,csstoimage:15},null,[-1,-1]),e&&(e.target&&insert(e.target,this,e.anchor),e.props&&(this.$set(e.props),flush()))}static get observedAttributes(){return["imageurl","position","resultCanvas","layerimagedata","zoom","ratio","opacity","csstoimage"]}get imageurl(){return this.$$.ctx[2]}set imageurl(e){this.$$set({imageurl:e}),flush()}get position(){return this.$$.ctx[11]}set position(e){this.$$set({position:e}),flush()}get resultCanvas(){return this.$$.ctx[1]}set resultCanvas(e){this.$$set({resultCanvas:e}),flush()}get layerimagedata(){return this.$$.ctx[12]}set layerimagedata(e){this.$$set({layerimagedata:e}),flush()}get zoom(){return this.$$.ctx[13]}set zoom(e){this.$$set({zoom:e}),flush()}get ratio(){return this.$$.ctx[14]}set ratio(e){this.$$set({ratio:e}),flush()}get opacity(){return this.$$.ctx[0]}set opacity(e){this.$$set({opacity:e}),flush()}get csstoimage(){return this.$$.ctx[15]}}function clickOutside(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function create_if_block_1$1(e){let t,n,r,i,o,a,c,s;return{c(){t=element("div"),n=element("fds-image-editor-button"),r=space(),i=element("fds-image-editor-button"),o=space(),a=element("fds-image-editor-button"),a.textContent="Coordinates",set_custom_element_data(n,"icon","flipHorizontal"),set_custom_element_data(n,"title","Flip Horizontal"),set_custom_element_data(i,"icon","flipVertical"),set_custom_element_data(i,"title","Flip Vertical"),set_custom_element_data(a,"type","button"),set_style(t,"display","flex"),set_style(t,"align-items","center")},m(u,l){insert(u,t,l),append(t,n),append(t,r),append(t,i),append(t,o),append(t,a),c||(s=[listen(n,"click",e[4]),listen(i,"click",e[5]),listen(a,"click",e[6])],c=!0)},p:noop,d(e){e&&detach(t),c=!1,run_all(s)}}}function create_if_block$1(e){let t,n,r,i,o,a,c,s,u,l,f,h,m,p,d,g,y,x,v,_,b,w,k,$,M,T,A,j,S,E,C,P,L;return{c(){t=element("div"),n=element("div"),r=element("div"),i=element("label"),i.textContent="x:",o=space(),a=element("input"),s=space(),u=element("div"),l=element("label"),l.textContent="y:",f=space(),h=element("input"),p=space(),d=element("div"),g=element("label"),g.textContent="width:",y=space(),x=element("input"),_=space(),b=element("div"),w=element("label"),w.textContent="height:",k=space(),$=element("input"),T=space(),A=element("div"),j=element("label"),j.textContent="rotation:",S=space(),E=element("input"),attr(i,"for","x"),attr(i,"class","more-label"),a.value=c=e[0].x,attr(a,"type","text"),attr(a,"class","formInput"),attr(a,"placeholder",""),set_style(a,"font-size","12px"),set_style(a,"width","220px"),set_style(a,"display","inline-block"),attr(r,"class","formLine"),attr(l,"for","y"),attr(l,"class","more-label"),h.value=m=e[0].y,attr(h,"type","text"),attr(h,"class","formInput"),attr(h,"placeholder",""),set_style(h,"font-size","12px"),set_style(h,"width","220px"),set_style(h,"display","inline-block"),attr(u,"class","formLine"),attr(g,"for","width"),attr(g,"class","more-label"),x.value=v=e[0].width,attr(x,"type","text"),attr(x,"class","formInput"),attr(x,"placeholder",""),set_style(x,"font-size","12px"),set_style(x,"width","220px"),set_style(x,"display","inline-block"),attr(d,"class","formLine"),attr(w,"for","height"),attr(w,"class","more-label"),$.value=M=e[0].height,attr($,"type","text"),attr($,"class","formInput"),attr($,"placeholder",""),set_style($,"font-size","12px"),set_style($,"width","220px"),set_style($,"display","inline-block"),attr(b,"class","formLine"),attr(j,"for","rotation"),attr(j,"class","more-label"),E.value=C=180*e[0].rotation/Math.PI,attr(E,"type","text"),attr(E,"class","formInput"),attr(E,"placeholder",""),set_style(E,"font-size","12px"),set_style(E,"width","220px"),set_style(E,"display","inline-block"),attr(A,"class","formLine"),attr(n,"class","formLine"),attr(t,"class","editcoord")},m(c,m){insert(c,t,m),append(t,n),append(n,r),append(r,i),append(r,o),append(r,a),append(n,s),append(n,u),append(u,l),append(u,f),append(u,h),append(n,p),append(n,d),append(d,g),append(d,y),append(d,x),append(n,_),append(n,b),append(b,w),append(b,k),append(b,$),append(n,T),append(n,A),append(A,j),append(A,S),append(A,E),P||(L=[listen(a,"change",e[7]),listen(h,"change",e[8]),listen(x,"change",e[9]),listen($,"change",e[10]),listen(E,"change",e[11]),action_destroyer(clickOutside.call(null,t)),listen(t,"click_outside",handleClickOutside)],P=!0)},p(e,t){1&t&&c!==(c=e[0].x)&&a.value!==c&&(a.value=c),1&t&&m!==(m=e[0].y)&&h.value!==m&&(h.value=m),1&t&&v!==(v=e[0].width)&&x.value!==v&&(x.value=v),1&t&&M!==(M=e[0].height)&&$.value!==M&&($.value=M),1&t&&C!==(C=180*e[0].rotation/Math.PI)&&E.value!==C&&(E.value=C)},d(e){e&&detach(t),P=!1,run_all(L)}}}function create_fragment$2(e){let t,n,r=e[0]&&create_if_block_1$1(e),i=e[1]&&e[0]&&create_if_block$1(e);return{c(){t=element("div"),r&&r.c(),n=space(),i&&i.c(),this.c=noop,attr(t,"class","show"),set_style(t,"display","inline-flex")},m(e,o){insert(e,t,o),r&&r.m(t,null),append(t,n),i&&i.m(t,null)},p(e,[o]){e[0]?r?r.p(e,o):(r=create_if_block_1$1(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),e[1]&&e[0]?i?i.p(e,o):(i=create_if_block$1(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i:noop,o:noop,d(e){e&&detach(t),r&&r.d(),i&&i.d()}}}function handleClickOutside(){}function instance$2(e,t,n){let r=get_current_component().$$.root.host,{coordinates:i={x:0,y:0,width:0,height:0,rotation:0}}=t;function o(e,t){r.dispatchEvent(new CustomEvent("change",{detail:{name:e,value:t}}))}let{editcoord:a}=t;return e.$$set=e=>{"coordinates"in e&&n(0,i=e.coordinates),"editcoord"in e&&n(1,a=e.editcoord)},[i,a,o,function(){n(0,i)},()=>{o("flipHorizontal")},()=>{o("flipVertical")},()=>{n(1,a=!a),o("editcoord",a)},e=>{n(0,i.x=e.target.value,i),n(0,i),o("x",e.target.value)},e=>{n(0,i.y=e.target.value,i),n(0,i),o("y",e.target.value)},e=>{n(0,i.width=e.target.value,i),n(0,i),o("width",e.target.value)},e=>{n(0,i.height=e.target.value,i),n(0,i),o("height",e.target.value)},e=>{n(0,i.rotation=e.target.value,i),n(0,i),o("rotation",parseInt(e.target.value)*(Math.PI/180))}]}customElements.define("fds-image-transform-corners",FourCornersTransformation);class Dialog extends SvelteElement{constructor(e){super();const t=document.createElement("style");t.textContent='*{box-sizing:border-box}.editcoord{min-width:330px;min-height:100px;box-shadow:0 0 1rem 0 rgba(255, 255, 255, .2);border-radius:8px;background-color:rgba(0, 0, 0, .65);backdrop-filter:blur(10px);color:rgba(255, 255, 255, 0.6);position:absolute;left:0px;top:50px;padding:14px;font-family:"Segoe UI", Roboto, system-ui;z-index:2000}.formLine{displaY:block;margin-bottom:20px}.formInput{width:100%;outline:0;border:0;border-bottom:2px solid rgba(255, 255, 255, 0.2);padding:5px;font-size:14px;font-weight:normal;border-radius:3px;color:rgba(255, 255, 255, 0.9);margin-bottom:10px;display:block;background:none;font-family:system-ui, "Segoe UI", Roboto}.formInput::placeholder{font-weight:normal;opacity:0.5;color:rgba(255, 255, 255, 0.7)}.formLine{margin-bottom:5px}.show{display:block}',this.shadowRoot.appendChild(t),init(this,{target:this.shadowRoot,props:attribute_to_object(this.attributes),customElement:!0},instance$2,create_fragment$2,safe_not_equal,{coordinates:0,editcoord:1,refresh:3},null),e&&(e.target&&insert(e.target,this,e.anchor),e.props&&(this.$set(e.props),flush()))}static get observedAttributes(){return["coordinates","editcoord","refresh"]}get coordinates(){return this.$$.ctx[0]}set coordinates(e){this.$$set({coordinates:e}),flush()}get editcoord(){return this.$$.ctx[1]}set editcoord(e){this.$$set({editcoord:e}),flush()}get refresh(){return this.$$.ctx[3]}}function create_fragment$1(e){let t,n,r,i,o,a,c,s;return{c(){t=element("div"),n=element("div"),r=element("fds-image-editor-button"),r.textContent="Done",i=space(),o=element("div"),a=element("fds-image-editor-button"),a.textContent="Cancel",this.c=noop,set_custom_element_data(r,"type","button"),set_style(n,"display","flex"),set_style(n,"align-items","center"),set_custom_element_data(a,"type","button"),set_style(o,"display","flex"),set_style(o,"align-items","center"),attr(t,"class","show"),set_style(t,"display","inline-flex")},m(u,l){insert(u,t,l),append(t,n),append(n,r),append(t,i),append(t,o),append(o,a),c||(s=[listen(r,"click",e[1]),listen(a,"click",e[2])],c=!0)},p:noop,i:noop,o:noop,d(e){e&&detach(t),c=!1,run_all(s)}}}function instance$1(e){let t=get_current_component().$$.root.host;function n(e,n){t.dispatchEvent(new CustomEvent("change",{detail:{name:e,value:n}}))}return[n,()=>{n("csstoimage")},()=>{n("changeview",!0)}]}customElements.define("fds-coord-dialog",Dialog);class DialogFourCorners extends SvelteElement{constructor(e){super();const t=document.createElement("style");t.textContent="*{box-sizing:border-box}.show{display:block}",this.shadowRoot.appendChild(t),init(this,{target:this.shadowRoot,props:attribute_to_object(this.attributes),customElement:!0},instance$1,create_fragment$1,safe_not_equal,{},null),e&&e.target&&insert(e.target,this,e.anchor)}}customElements.define("fds-four-corners-dialog",DialogFourCorners);const{window:window_1}=globals;function get_each_context(e,t,n){const r=e.slice();return r[77]=t[n],r}function create_if_block(e){let t,n,r,i,o,a,c,s,u,l,f,h,m,p,d,g,y,x,v,_,b,w;function k(e,t){return e[2]?create_if_block_4:create_else_block}let $=k(e),M=$(e),T=e[5]&&create_if_block_2(e),A=e[4]&&create_if_block_1(),j=e[11],S=[];for(let t=0;t<j.length;t+=1)S[t]=create_each_block(get_each_context(e,j,t));return{c(){t=element("div"),n=element("div"),r=element("div"),M.c(),i=space(),o=element("div"),o.innerHTML="<slot></slot>",a=space(),c=element("div"),s=element("div"),s.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',u=space(),l=element("div"),l.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',f=space(),h=element("div"),h.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',m=space(),p=element("div"),p.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',d=space(),T&&T.c(),y=space(),x=element("div"),v=space(),A&&A.c(),_=space();for(let e=0;e<S.length;e+=1)S[e].c();attr(r,"class","contents"),set_style(r,"opacity",e[0].opacity/100),set_style(o,"width","80px"),set_style(o,"height","50px"),set_style(o,"position","sticky"),set_style(o,"z-index","5"),set_style(o,"bottom","0px"),set_style(o,"left","0px"),set_style(o,"align-self","flex-end"),attr(s,"class","handle corner top right"),attr(l,"class","handle corner bottom right"),attr(h,"class","handle corner bottom left"),attr(p,"class","handle corner top left"),attr(c,"class","frame"),attr(n,"class","free-transform"),attr(n,"style",g=e[12]?e[1].style:null),toggle_class(n,"noclicks",!e[7]),attr(x,"class","fullwidthheight"),set_style(x,"display","none"),attr(t,"class","faded transform-area")},m(g,k){insert(g,t,k),append(t,n),append(n,r),M.m(r,null),append(n,i),append(n,o),append(n,a),append(n,c),append(c,s),e[39](s),append(c,u),append(c,l),e[40](l),append(c,f),append(c,h),e[41](h),append(c,m),append(c,p),e[42](p),append(c,d),T&&T.m(c,null),e[44](n),append(t,y),append(t,x),append(t,v),A&&A.m(t,null),append(t,_);for(let e=0;e<S.length;e+=1)S[e]&&S[e].m(t,null);e[45](t),b||(w=[listen(n,"pointerdown",e[20]),listen(t,"pointerup",e[22]),listen(t,"click",e[24])],b=!0)},p(e,i){if($===($=k(e))&&M?M.p(e,i):(M.d(1),M=$(e),M&&(M.c(),M.m(r,null))),1&i[0]&&set_style(r,"opacity",e[0].opacity/100),e[5]?T?T.p(e,i):(T=create_if_block_2(e),T.c(),T.m(c,null)):T&&(T.d(1),T=null),4098&i[0]&&g!==(g=e[12]?e[1].style:null)&&attr(n,"style",g),128&i[0]&&toggle_class(n,"noclicks",!e[7]),e[4]?A||(A=create_if_block_1(),A.c(),A.m(t,_)):A&&(A.d(1),A=null),2048&i[0]){let n;for(j=e[11],n=0;n<j.length;n+=1){const r=get_each_context(e,j,n);S[n]?S[n].p(r,i):(S[n]=create_each_block(r),S[n].c(),S[n].m(t,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=j.length}},d(n){n&&detach(t),M.d(),e[39](null),e[40](null),e[41](null),e[42](null),T&&T.d(),e[44](null),A&&A.d(),destroy_each(S,n),e[45](null),b=!1,run_all(w)}}}function create_else_block(e){let t,n;return{c(){t=element("img"),set_style(t,"width","100%"),set_style(t,"height","100%"),src_url_equal(t.src,n=e[3]||e[0].url)||attr(t,"src",n)},m(n,r){insert(n,t,r),e[38](t)},p(e,r){9&r[0]&&!src_url_equal(t.src,n=e[3]||e[0].url)&&attr(t,"src",n)},d(n){n&&detach(t),e[38](null)}}}function create_if_block_4(e){let t,n;return{c(){t=new HtmlTag(!1),n=empty(),t.a=n},m(r,i){t.m(e[2],r,i),insert(r,n,i)},p(e,n){4&n[0]&&t.p(e[2])},d(e){e&&detach(n),e&&t.d()}}}function create_if_block_2(e){let t,n,r,i=e[6]&&create_if_block_3();return{c(){t=element("div"),n=element("slot"),n.innerHTML='<div class="handle-shape"></div>',r=space(),i&&i.c(),attr(n,"name","rotator"),attr(t,"class","handle rotator")},m(o,a){insert(o,t,a),append(t,n),append(t,r),i&&i.m(t,null),e[43](t)},p(e,n){e[6]?i||(i=create_if_block_3(),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(n){n&&detach(t),i&&i.d(),e[43](null)}}}function create_if_block_3(e){let t;return{c(){t=element("div"),attr(t,"class","rotator-bar")},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_if_block_1(e){let t;return{c(){t=element("div"),set_style(t,"position","absolute"),set_style(t,"top","100px"),set_style(t,"left","100px"),set_style(t,"width","400px"),set_style(t,"height","400px"),set_style(t,"border","1px solid grey"),set_style(t,"transform","rotate(-45deg)"),set_style(t,"transform-origin","center center")},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_each_block(e){let t;return{c(){t=element("div"),attr(t,"class","line"),set_style(t,"--x-line",e[77].x_line+"px"),set_style(t,"--y-line",e[77].y_line+"px"),set_style(t,"--line-length",e[77].lineLength+"px"),set_style(t,"--theta-line",e[77].theta_line+"rad")},m(e,n){insert(e,t,n)},p(e,n){2048&n[0]&&set_style(t,"--x-line",e[77].x_line+"px"),2048&n[0]&&set_style(t,"--y-line",e[77].y_line+"px"),2048&n[0]&&set_style(t,"--line-length",e[77].lineLength+"px"),2048&n[0]&&set_style(t,"--theta-line",e[77].theta_line+"rad")},d(e){e&&detach(t)}}}function create_fragment(e){let t,n,r,i=(e[3]||e[0].url)&&create_if_block(e);return{c(){i&&i.c(),t=empty(),this.c=noop},m(o,a){i&&i.m(o,a),insert(o,t,a),n||(r=[listen(window_1,"pointermove",e[21]),listen(window_1,"pointerup",e[23]),listen(window_1,"keyup",e[18]),listen(window_1,"keydown",e[19])],n=!0)},p(e,n){e[3]||e[0].url?i?i.p(e,n):(i=create_if_block(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:noop,o:noop,d(e){i&&i.d(e),e&&detach(t),n=!1,run_all(r)}}}const magneticTolerance=10;function isResizing(e){return e&&e.target&&"handle"===e.target.type}function getFullBounds(e){const t=e.getBoundingClientRect();return t.x=t.left,t.y=t.top,t.center={x:(t.left+t.right)/2,y:(t.top+t.bottom)/2},t}function instance(e,t,n){let r=!1,i=get_current_component();const o=createEventDispatcher(),a=(e,t)=>{(t=p).endDrag=!!r,r&&(r=!r),o(e="transformchange",t),i.dispatchEvent&&i.dispatchEvent(new CustomEvent(e,{detail:t}))};let c,s,u,l={x:null,y:null,width:null,height:null,rotation:null},{layers:f=[]}=t,{demo:h=!1}=t,{layerimagedata:m={}}=t,{position:p=l}=t,{target:d=null}=t,{container:g=null}=t,{rotatorEnabled:y=!0}=t,{rotatorBar:x=!1}=t,{handleMode:v="resize"}=t,{lockAspect:_=!1}=t,{lockTouchResize:b=!1}=t,{captureClicks:w=!0}=t,{zoom:k=100}=t,{ratio:$=window.devicePixelRatio}=t,{imageurl:M}=t,{imagesvg:T}=t,{svgcolor:A}=t,{type:j}=t,S=!1,E=[];function C(e,t,n,r){let i=(new magneticLines).calcMagneticLine(e,t,n,r);E.push(i)}function P(e,t,n){let r={...t};return e.forEach((e=>{e!==p&&(Math.abs(t.x-e.x)<n?(C("left","side","vertical",e.originalData),r.x=e.x):Math.abs(t.x+t.width-(e.x+e.width))<n?(C("right","side","vertical",e.originalData),r.x=e.x+e.width-t.width):Math.abs(t.x+t.width/2-(e.x+e.width/2))<n?(C("","center","vertical",e.originalData),r.x=e.x+e.width/2-t.width/2):Math.abs(t.x-(e.x+e.width))<n?(r.x=e.x+e.width,C("right","side","vertical",e.originalData)):Math.abs(t.x+t.width-e.x)<n&&(r.x=e.x-t.width,C("left","side","",e.originalData)),Math.abs(t.y-e.y)<n?(r.y=e.y,C("top","side","",e.originalData)):Math.abs(t.y+t.height-(e.y+e.height))<n?(r.y=e.y+e.height-t.height,C("bottom","side","",e.originalData)):Math.abs(t.y+t.height/2-(e.y+e.height/2))<n?(r.y=e.y+e.height/2-t.height/2,C("","center","horizontal",e.originalData)):Math.abs(t.y-(e.y+e.height))<n?(r.y=e.y+e.height,C("bottom","side","",e.originalData)):Math.abs(t.y+t.height-e.y)<n&&(r.y=e.y-t.height,C("top","side","",e.originalData)))})),r}let L,q,N=!1;const V={};let F,R,O,B,D,I,z,U,H=0;function X(){z||(z=!0,n(8,s.onload=()=>{n(1,p={x:s.x,y:s.y,width:s.naturalWidth,height:s.naturalHeight,rotation:0}),Y(),async function(){await tick(),F&&(F.getBoundingClientRect(),a("boundsChanged",p),u.classList.contains("fade-in-div")||(u.classList.remove("faded"),u.classList.add("fade-in-div")))}()},s),d||n(25,d=F),g||n(26,g=d.parentNode))}function Y(){(m?._x||0==m?._x)&&n(1,p.x=m._x,p),(m?._y||0==m?._y)&&n(1,p.y=m._y,p),m?._width&&n(1,p.width=m._width,p),m?._height&&n(1,p.height=m._height,p),(m?.x||0==m?.x)&&n(1,p.x=Q(m.x),p),(m?.y||0==m?.y)&&n(1,p.y=Q(m.y),p),m?.width&&n(1,p.width=Q(m.width),p),m?.height&&n(1,p.height=Q(m.height),p),m?.rotation&&n(1,p.rotation=m.rotation,p),m?.rotation&&n(1,p.r=m.rotation,p),(m?._x||0==m?._x)&&m._imgwidth&&(n(1,p.x=Q(m._imgx),p),n(1,p.y=Q(m._imgy),p),n(1,p.width=Q(m._imgwidth),p),n(1,p.height=Q(m._imgheight),p),delete m._imgx,delete m._imgy,delete m._imgwidth,delete m._imgheight)}function Q(e){return e*(parseFloat(k)/100/$)}onMount((()=>{n(37,U=!0),s&&X()}));const Z={x:"left",y:"top",width:"width",height:"height"};function J(e){return"position: absolute; "+["x","y","width","height"].map((t=>null!=e[t]?`${Z[t]}: ${e[t]}px; `:"")).join(" ")+`; transform: rotate(${e.rotation}rad)`}function G(e){n(1,p.y=l.y+(e.end.y-e.start.y),p),n(1,p.x=l.x+(e.end.x-e.start.x),p);let t={x:l.x+(e.end.x-e.start.x),y:l.y+(e.end.y-e.start.y),width:p.width,height:p.height};n(11,E=[]);const r=function(e,t,n){let r={...t},i=[],o=[];if(e.forEach((e=>{if(e!==p&&(e.rotation!==p.rotation||0===e.rotation)){let t=JSON.parse(JSON.stringify(e));t.rotation=0,t.originalData=JSON.parse(JSON.stringify(t)),i.push(t)}})),r=P(i,t,n),e.forEach((e=>{if(e!==p&&e.rotation===p.rotation&&0!==e.rotation){let t=JSON.parse(JSON.stringify(e));t.originalData=JSON.parse(JSON.stringify(e)),o.push(t)}})),o.length>0){let e=o[0].rotation;o.push(JSON.parse(JSON.stringify(t)));let i=new magneticLines;i.rotateBoxesToZero(o,e);let a=o.pop(),c=P(o,a,n);E.length&&(r=i.rotatePositionBackToOriginal(c,e))}return r}(f,t,magneticTolerance);n(1,p.x=r.x,p),n(1,p.y=r.y,p)}function W(e,t){const r=function(e,t){const n=l.rotation,r=q.center,i=vector.sub(r,{x:l.width/2,y:l.height/2}),o=vector.rotate(e.end,-n,t),a=o.x-t.x,c=o.y-t.y,s=vector.add(i,{x:Math.abs(a/2),y:Math.abs(c/2)}),u=vector.add(s,{x:-a/2,y:-c/2}),f=vector.rotate(u,n,s);return{width:a,height:c,translate:vector.sub(t,f)}}(e,t,q.center);n(1,p.x=l.x+r.translate.x,p),n(1,p.y=l.y+r.translate.y,p),n(1,p.width=Math.abs(r.width),p),n(1,p.height=Math.abs(r.height),p)}function K(e,t,r,i){const o=function(e,t,n,r,i){const o=t.start?t.start:t,a=t.end?t.end:t,c=vector.sub(o,e.start),s=vector.sub(a,e.end),u=vector.length(s)/vector.length(c),l=r?0:vector.direction(c)-vector.direction(s),f=vector.add(vector.rotate(vector.scale(vector.sub(n,o),u),l,{x:0,y:0}),a);return{scale:i?1:u,rotate:l,translate:vector.sub(f,n),center:f}}(e,t,q.center,r,i);n(1,p.width=l.width*o.scale,p),n(1,p.height=l.height*o.scale,p);const a=vector.sub(q.center,l),c=vector.add(vector.add(a,o.translate),{x:-p.width/2,y:-p.height/2});n(1,p.x=l.x+c.x-L.left,p),n(1,p.y=l.y+c.y-L.top,p),n(1,p.rotation=l.rotation+o.rotate,p)}async function ee(){await tick(),F&&F.getBoundingClientRect(),a("positionChanged",p)}return e.$$set=e=>{"layers"in e&&n(28,f=e.layers),"demo"in e&&n(4,h=e.demo),"layerimagedata"in e&&n(0,m=e.layerimagedata),"position"in e&&n(1,p=e.position),"target"in e&&n(25,d=e.target),"container"in e&&n(26,g=e.container),"rotatorEnabled"in e&&n(5,y=e.rotatorEnabled),"rotatorBar"in e&&n(6,x=e.rotatorBar),"handleMode"in e&&n(29,v=e.handleMode),"lockAspect"in e&&n(27,_=e.lockAspect),"lockTouchResize"in e&&n(30,b=e.lockTouchResize),"captureClicks"in e&&n(7,w=e.captureClicks),"zoom"in e&&n(31,k=e.zoom),"ratio"in e&&n(32,$=e.ratio),"imageurl"in e&&n(3,M=e.imageurl),"imagesvg"in e&&n(2,T=e.imagesvg),"svgcolor"in e&&n(33,A=e.svgcolor),"type"in e&&n(34,j=e.type)},e.$$.update=()=>{4&e.$$.dirty[0]|4&e.$$.dirty[1]&&T&&A&&(n(2,T=T.replace("<svg ",`<svg style="fill:${A}" `)),n(0,m.url=n(3,M="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(T)))),m)),134217732&e.$$.dirty[0]&&T&&_&&(n(2,T=T.replace('preserveAspectRatio="none"'," ")),n(2,T=T.replace('class="fullwidthheight"'," ")),n(0,m.url=n(3,M="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(T)))),m)),134217732&e.$$.dirty[0]&&T&&!_&&(n(2,T=T.replace("<svg ",'<svg preserveAspectRatio="none" class="fullwidthheight" ')),n(0,m.url=n(3,M="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(T)))),m)),100664065&e.$$.dirty[0]|64&e.$$.dirty[1]&&U&&s&&F&&m&&m.url&&(d||n(25,d=F),g||n(26,g=d.parentNode),X()),33554944&e.$$.dirty[0]&&n(12,N=d===F),2&e.$$.dirty[0]&&n(1,p.style=J(p),p),2&e.$$.dirty[0]|33&e.$$.dirty[1]&&k&&k!=c&&(n(36,c=k),Y(),n(1,p.style=J(p),p))},[m,p,T,M,h,y,x,w,s,F,u,E,N,R,O,B,D,I,function(e){16===e.keyCode&&n(27,_=!1)},function(e){16===e.keyCode&&n(27,_=!0)},function(e){let t=function(e){return R.contains(e.target)?{type:"handle",top:!0,right:!0}:O.contains(e.target)?{type:"handle",top:!0,left:!0}:B.contains(e.target)?{type:"handle",bottom:!0,right:!0}:D.contains(e.target)?{type:"handle",bottom:!0,left:!0}:I&&I.contains(e.target)?{type:"rotate"}:{type:"body"}}(e),n=V[e.pointerId];if(n?(n.end.x=e.pageX,n.end.y=e.pageY,n.target=t):(H++,n={id:e.pointerId,priority:H-1,start:{x:e.pageX,y:e.pageY},end:{x:e.pageX,y:e.pageY},target:t},V[e.pointerId]=n),S=!1,n.priority<2)if(q=getFullBounds(d),L=getFullBounds(g),H>1&&Object.values(V).forEach((e=>{e.id!==e&&(e.start.x=e.end.x),e.start.y=e.end.y})),l.x=p.x,l.y=p.y,l.width=p.width,l.height=p.height,l.rotation=p.rotation,"handle"===t.type){let e;e=t.top?t.right?D:B:t.right?O:R;const n=e.getBoundingClientRect(),r={x:(n.left+n.right)/2,y:(n.top+n.bottom)/2};V.anchor=r}else delete V.anchor;ee()},function(e){r=!1;let t=V[e.pointerId];if(t&&t.priority<2){if(S=!0,t.end.x=e.pageX,t.end.y=e.pageY,function(e){return e&&e.target&&"body"===e.target.type&&1===H}(t))G(t);else if(function(e){return e&&e.target&&("rotate"===e.target.type||"handle"===e.target.type&&"rotate"===v)}(t))K(t,q.center,!1,!0);else if(isResizing(t)&&!_)W(t,V.anchor);else if(isResizing(t)&&_)K(t,V.anchor,!0);else if(function(e){return e&&e.target&&"handle"!==e.target.type&&H>1}(t)){let e,n=H>1;e=n?Object.values(V).find((e=>e.id!==t.id)):V.anchor?V.anchor:q.center,K(t,e,!1,n&&b)}ee()}},function(){S&&(r=!0,n(27,_=!1),S=!1,a("positionChanged",p))},function(e){let t=1/0;V[e.pointerId]&&(H--,t=V[e.pointerId].priority),delete V[e.pointerId],H&&(l.y=p.y,l.x=p.x,l.width=p.width,l.height=p.height,l.rotation=p.rotation,Object.values(V).forEach((e=>{e.id&&(e.priority>t&&e.priority--,e.start.x=e.end.x,e.start.y=e.end.y)})))},function(e){S||a("click",e.detail)},d,g,_,f,v,b,k,$,A,j,function(){null!=p.opacity&&n(0,m.opacity=p.opacity,m),n(1,p.style=J(p),p),a("positionChanged",p)},c,U,function(e){binding_callbacks[e?"unshift":"push"]((()=>{s=e,n(8,s)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{R=e,n(13,R)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{B=e,n(15,B)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{D=e,n(16,D)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{O=e,n(14,O)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{I=e,n(17,I)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{F=e,n(9,F)}))},function(e){binding_callbacks[e?"unshift":"push"]((()=>{u=e,n(10,u)}))}]}class App extends SvelteElement{constructor(e){super();const t=document.createElement("style");t.textContent=':root{--frameBorder:solid 1px cyan}*{box-sizing:border-box}.free-transform{position:absolute;top:0;left:0;right:0;bottom:0;transform-origin:center;touch-action:none;display:flex}.free-transform.noclicks{pointer-events:none}.contents{position:absolute;top:0;left:0;right:0;bottom:0}.contents:before{content:"";position:absolute;top:0px;left:0px;width:100%;height:100%;border:var(--frameBorder, 2px solid #3965c7);box-sizing:border-box}.free-transform.noclicks .contents{pointer-events:none}.frame{position:absolute;top:0;left:0;right:0;bottom:0;cursor:move}.free-transform.noclicks .frame{pointer-events:none}.handle{position:absolute;user-select:none;touch-action:none;cursor:grab;pointer-events:auto}.handle:active{cursor:grabbing}.handle-shape{width:12px;height:12px;border-radius:50%;background:white;border:var(--frameBorder)}.handle.top{top:0px}.handle.right{right:0px}.handle.bottom{bottom:0px}.handle.left{left:0px}.handle.top.left{transform:translate(-50%, -50%) rotate(-45deg)}.handle.top.right{transform:translate(50%, -50%) rotate(45deg)}.handle.bottom.left{transform:translate(-50%, 50%) rotate(-135deg)}.handle.bottom.right{transform:translate(50%, 50%) rotate(135deg)}.handle.rotator{left:50%;top:-30px;transform:translateX(-50%)}.rotator-bar{position:absolute;top:100%;right:50%;width:1px;height:calc(30px - 100%);border-right:var(--frameBorder)}.fullwidthheight{width:100%;height:100%}.transform-area{position:relative;width:100%;height:100%;flex-grow:1}.faded{opacity:0.01}@keyframes fadeIn{to{opacity:1}}.line{position:absolute;width:var(--line-length);height:1px;left:var(--x-line);top:var(--y-line);transform:translate(-50%, -50%) rotate(var(--theta-line));transform-origin:center center;background-color:red}',this.shadowRoot.appendChild(t),init(this,{target:this.shadowRoot,props:attribute_to_object(this.attributes),customElement:!0},instance,create_fragment,safe_not_equal,{layers:28,demo:4,layerimagedata:0,position:1,target:25,container:26,rotatorEnabled:5,rotatorBar:6,handleMode:29,lockAspect:27,lockTouchResize:30,captureClicks:7,zoom:31,ratio:32,imageurl:3,imagesvg:2,svgcolor:33,type:34,changePosition:35},null,[-1,-1,-1]),e&&(e.target&&insert(e.target,this,e.anchor),e.props&&(this.$set(e.props),flush()))}static get observedAttributes(){return["layers","demo","layerimagedata","position","target","container","rotatorEnabled","rotatorBar","handleMode","lockAspect","lockTouchResize","captureClicks","zoom","ratio","imageurl","imagesvg","svgcolor","type","changePosition"]}get layers(){return this.$$.ctx[28]}set layers(e){this.$$set({layers:e}),flush()}get demo(){return this.$$.ctx[4]}set demo(e){this.$$set({demo:e}),flush()}get layerimagedata(){return this.$$.ctx[0]}set layerimagedata(e){this.$$set({layerimagedata:e}),flush()}get position(){return this.$$.ctx[1]}set position(e){this.$$set({position:e}),flush()}get target(){return this.$$.ctx[25]}set target(e){this.$$set({target:e}),flush()}get container(){return this.$$.ctx[26]}set container(e){this.$$set({container:e}),flush()}get rotatorEnabled(){return this.$$.ctx[5]}set rotatorEnabled(e){this.$$set({rotatorEnabled:e}),flush()}get rotatorBar(){return this.$$.ctx[6]}set rotatorBar(e){this.$$set({rotatorBar:e}),flush()}get handleMode(){return this.$$.ctx[29]}set handleMode(e){this.$$set({handleMode:e}),flush()}get lockAspect(){return this.$$.ctx[27]}set lockAspect(e){this.$$set({lockAspect:e}),flush()}get lockTouchResize(){return this.$$.ctx[30]}set lockTouchResize(e){this.$$set({lockTouchResize:e}),flush()}get captureClicks(){return this.$$.ctx[7]}set captureClicks(e){this.$$set({captureClicks:e}),flush()}get zoom(){return this.$$.ctx[31]}set zoom(e){this.$$set({zoom:e}),flush()}get ratio(){return this.$$.ctx[32]}set ratio(e){this.$$set({ratio:e}),flush()}get imageurl(){return this.$$.ctx[3]}set imageurl(e){this.$$set({imageurl:e}),flush()}get imagesvg(){return this.$$.ctx[2]}set imagesvg(e){this.$$set({imagesvg:e}),flush()}get svgcolor(){return this.$$.ctx[33]}set svgcolor(e){this.$$set({svgcolor:e}),flush()}get type(){return this.$$.ctx[34]}set type(e){this.$$set({type:e}),flush()}get changePosition(){return this.$$.ctx[35]}}customElements.define("fds-image-transform",App);export{App as default};
//# sourceMappingURL=fds-image-transform-es.js.map
