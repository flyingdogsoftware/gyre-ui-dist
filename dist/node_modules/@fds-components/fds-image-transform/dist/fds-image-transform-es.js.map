{"version":3,"file":"fds-image-transform-es.js","sources":["../node_modules/svelte/internal/index.mjs","../src/vector.js","../node_modules/svelte/store/index.mjs","../src/stores.js","../src/magneticLines.js","../src/warpImage.js","../node_modules/numeric/numeric-1.2.6.js","../src/FourCornersTransformation.svelte","../src/clickOutside.js","../src/Dialog.svelte","../src/DialogFourCorners.svelte","../src/App.svelte"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\nfunction is_promise(value) {\n    return !!value && (typeof value === 'object' || typeof value === 'function') && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\nfunction split_css_unit(value) {\n    const split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n    return split ? [parseFloat(split[1]), split[2] || 'px'] : [value, 'px'];\n}\nconst contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\n/**\n * Resize observer singleton.\n * One listener per element only!\n * https://groups.google.com/a/chromium.org/g/blink-dev/c/z6ienONUb5A/m/F5-VcUZtBAAJ\n */\nclass ResizeObserverSingleton {\n    constructor(options) {\n        this.options = options;\n        this._listeners = 'WeakMap' in globals ? new WeakMap() : undefined;\n    }\n    observe(element, listener) {\n        this._listeners.set(element, listener);\n        this._getObserver().observe(element, this.options);\n        return () => {\n            this._listeners.delete(element);\n            this._observer.unobserve(element); // this line can probably be removed\n        };\n    }\n    _getObserver() {\n        var _a;\n        return (_a = this._observer) !== null && _a !== void 0 ? _a : (this._observer = new ResizeObserver((entries) => {\n            var _a;\n            for (const entry of entries) {\n                ResizeObserverSingleton.entries.set(entry.target, entry);\n                (_a = this._listeners.get(entry.target)) === null || _a === void 0 ? void 0 : _a(entry);\n            }\n        }));\n    }\n}\n// Needs to be written like this to pass the tree-shake-test\nResizeObserverSingleton.entries = 'WeakMap' in globals ? new WeakMap() : undefined;\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n    return style.sheet;\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentNode !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction comment(content) {\n    return document.createComment(content);\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_immediate_propagation(fn) {\n    return function (event) {\n        event.stopImmediatePropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set && always_set_through_set_attribute.indexOf(key) === -1) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data_map(node, data_map) {\n    Object.keys(data_map).forEach((key) => {\n        set_custom_element_data(node, key, data_map[key]);\n    });\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction set_dynamic_element_data(tag) {\n    return (/-/.test(tag)) ? set_custom_element_data_map : set_attributes;\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction init_binding_group(group) {\n    let _inputs;\n    return {\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            _inputs.forEach(input => group.push(input));\n        },\n        /* remove */ r() {\n            _inputs.forEach(input => group.splice(group.indexOf(input), 1));\n        }\n    };\n}\nfunction init_binding_group_dynamic(group, indexes) {\n    let _group = get_binding_group(group);\n    let _inputs;\n    function get_binding_group(group) {\n        for (let i = 0; i < indexes.length; i++) {\n            group = group[indexes[i]] = group[indexes[i]] || [];\n        }\n        return group;\n    }\n    function push() {\n        _inputs.forEach(input => _group.push(input));\n    }\n    function remove() {\n        _inputs.forEach(input => _group.splice(_group.indexOf(input), 1));\n    }\n    return {\n        /* update */ u(new_indexes) {\n            indexes = new_indexes;\n            const new_group = get_binding_group(group);\n            if (new_group !== _group) {\n                remove();\n                _group = new_group;\n                push();\n            }\n        },\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            push();\n        },\n        /* remove */ r: remove\n    };\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction claim_comment(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 8, (node) => {\n        node.data = '' + data;\n        return undefined;\n    }, () => comment(data), true);\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes, is_svg) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration(undefined, is_svg);\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes, is_svg);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    text.data = data;\n}\nfunction set_data_contenteditable(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable(text, data);\n    }\n    else {\n        set_data(text, data);\n    }\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value == null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value, mounting) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    if (!mounting || value !== undefined) {\n        select.selectedIndex = -1; // no option should be selected\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked');\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_iframe_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n            // make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n            // see https://github.com/sveltejs/svelte/issues/4233\n            fn();\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nconst resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'content-box' });\nconst resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'border-box' });\nconst resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'device-pixel-content-box' });\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, cancelable, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nfunction head_selector(nodeId, head) {\n    const result = [];\n    let started = 0;\n    for (const node of head.childNodes) {\n        if (node.nodeType === 8 /* comment node */) {\n            const comment = node.textContent.trim();\n            if (comment === `HEAD_${nodeId}_END`) {\n                started -= 1;\n                result.push(node);\n            }\n            else if (comment === `HEAD_${nodeId}_START`) {\n                started += 1;\n                result.push(node);\n            }\n        }\n        else if (started > 0) {\n            result.push(node);\n        }\n    }\n    return result;\n}\nclass HtmlTag {\n    constructor(is_svg = false) {\n        this.is_svg = false;\n        this.is_svg = is_svg;\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            if (this.is_svg)\n                this.e = svg_element(target.nodeName);\n            /** #7364  target for <template> may be provided as #document-fragment(11) */\n            else\n                this.e = element((target.nodeType === 11 ? 'TEMPLATE' : target.nodeName));\n            this.t = target.tagName !== 'TEMPLATE' ? target : target.content;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes, is_svg = false) {\n        super(is_svg);\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\nfunction construct_svelte_component(component, props) {\n    return new component(props);\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { ownerNode } = info.stylesheet;\n            // there is no ownerNode if it runs on jsdom.\n            if (ownerNode)\n                detach(ownerNode);\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs#run-time-svelte-beforeupdate\n */\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs#run-time-svelte-onmount\n */\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n */\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs#run-time-svelte-ondestroy\n */\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * https://svelte.dev/docs#run-time-svelte-createeventdispatcher\n */\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail, { cancelable = false } = {}) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail, { cancelable });\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n            return !event.defaultPrevented;\n        }\n        return true;\n    };\n}\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-setcontext\n */\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n    return context;\n}\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-getcontext\n */\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs#run-time-svelte-getallcontexts\n */\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-hascontext\n */\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nlet render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    // Do not reenter flush while dirty components are updated, as this can\n    // result in an infinite loop. Instead, let the inner flush handle it.\n    // Reentrancy is ok afterwards for bindings etc.\n    if (flushidx !== 0) {\n        return;\n    }\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        try {\n            while (flushidx < dirty_components.length) {\n                const component = dirty_components[flushidx];\n                flushidx++;\n                set_current_component(component);\n                update(component.$$);\n            }\n        }\n        catch (e) {\n            // reset dirty state to not end up in a deadlocked state and then rethrow\n            dirty_components.length = 0;\n            flushidx = 0;\n            throw e;\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n */\nfunction flush_render_callbacks(fns) {\n    const filtered = [];\n    const targets = [];\n    render_callbacks.forEach((c) => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));\n    targets.forEach((c) => c());\n    render_callbacks = filtered;\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n    else if (callback) {\n        callback();\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    const options = { direction: 'in' };\n    let config = fn(node, params, options);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config(options);\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    const options = { direction: 'out' };\n    let config = fn(node, params, options);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config(options);\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    const options = { direction: 'both' };\n    let config = fn(node, params, options);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config(options);\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    const updates = [];\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            // defer updates until all the DOM shuffling is done\n            updates.push(() => block.p(child_ctx, dirty));\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    run_all(updates);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\nconst _boolean_attributes = [\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'inert',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n];\n/**\n * List of HTML boolean attributes (e.g. `<input disabled>`).\n * Source: https://html.spec.whatwg.org/multipage/indices.html\n */\nconst boolean_attributes = new Set([..._boolean_attributes]);\n\n/** regex of all html void element names */\nconst void_element_names = /^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;\nfunction is_void(name) {\n    return void_element_names.test(name) || name.toLowerCase() === '!doctype';\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst ATTR_REGEX = /[&\"]/g;\nconst CONTENT_REGEX = /[&<]/g;\n/**\n * Note: this method is performance sensitive and has been optimized\n * https://github.com/sveltejs/svelte/pull/5701\n */\nfunction escape(value, is_attr = false) {\n    const str = String(value);\n    const pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n    pattern.lastIndex = 0;\n    let escaped = '';\n    let last = 0;\n    while (pattern.test(str)) {\n        const i = pattern.lastIndex - 1;\n        const ch = str[i];\n        escaped += str.substring(last, i) + (ch === '&' ? '&amp;' : (ch === '\"' ? '&quot;' : '&lt;'));\n        last = i + 1;\n    }\n    return escaped + str.substring(last);\n}\nfunction escape_attribute_value(value) {\n    // keep booleans, null, and undefined for the sake of `spread`\n    const should_escape = typeof value === 'string' || (value && typeof value === 'object');\n    return should_escape ? escape(value, true) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${name}>.`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape(value, true)}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${escape_attribute_value(style_object[key])};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n            // if the component was destroyed immediately\n            // it will update the `$$.on_destroy` reference to `null`.\n            // the destructured on_destroy may still reference to the old array\n            if (component.$$.on_destroy) {\n                component.$$.on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        flush_render_callbacks($$.after_update);\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: [],\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            if (!is_function(callback)) {\n                return noop;\n            }\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        if (!is_function(callback)) {\n            return noop;\n        }\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.59.2' }, detail), { bubbles: true }));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation, has_stop_immediate_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    if (has_stop_immediate_propagation)\n        modifiers.push('stopImmediatePropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_contenteditable_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable_dev(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable_dev(text, data);\n    }\n    else {\n        set_data_dev(text, data);\n    }\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    const is_string = typeof tag === 'string';\n    if (tag && !is_string) {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\nfunction validate_void_dynamic_element(tag) {\n    if (tag && is_void(tag)) {\n        console.warn(`<svelte:element this=\"${tag}\"> is self-closing and cannot have content.`);\n    }\n}\nfunction construct_svelte_component_dev(component, props) {\n    const error_message = 'this={...} of <svelte:component> should specify a Svelte component.';\n    try {\n        const instance = new component(props);\n        if (!instance.$$ || !instance.$set || !instance.$on || !instance.$destroy) {\n            throw new Error(error_message);\n        }\n        return instance;\n    }\n    catch (err) {\n        const { message } = err;\n        if (typeof message === 'string' && message.indexOf('is not a constructor') !== -1) {\n            throw new Error(error_message);\n        }\n        else {\n            throw err;\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, ResizeObserverSingleton, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_iframe_resize_listener, add_location, add_render_callback, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_comment, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, comment, component_subscribe, compute_rest_props, compute_slots, construct_svelte_component, construct_svelte_component_dev, contenteditable_truthy_values, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, flush_render_callbacks, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, head_selector, identity, init, init_binding_group, init_binding_group_dynamic, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, is_void, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, resize_observer_border_box, resize_observer_content_box, resize_observer_device_pixel_content_box, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_custom_element_data_map, set_data, set_data_contenteditable, set_data_contenteditable_dev, set_data_dev, set_data_maybe_contenteditable, set_data_maybe_contenteditable_dev, set_dynamic_element_data, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, split_css_unit, spread, src_url_equal, start_hydrating, stop_immediate_propagation, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, validate_void_dynamic_element, xlink_attr };\n","function add (a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  }\n}\n\nfunction subtract (a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  }\n}\n\nfunction scale (p, scale) {\n  return {\n    x: p.x * scale,\n    y: p.y * scale\n  }\n}\n\nfunction rotate (p, a, origin = { x: 0, y: 0 }) {\n  const dx = p.x - origin.x\n  const dy = p.y - origin.y\n  return {\n    x: origin.x + (dx * Math.cos(a)) - (dy * Math.sin(a)),\n    y: origin.y + (dy * Math.cos(a)) + (dx * Math.sin(a))\n  }\n}\n\nfunction direction (v) {\n  const a = Math.atan(v.x / v.y)\n  if (v.y > 0) return a + Math.PI\n  else return a\n}\n\nfunction length (v) {\n  return Math.sqrt((v.x * v.x) + (v.y * v.y))\n}\n\nexport default {\n  add,\n  subtract,\n  sub: subtract,\n  scale,\n  rotate,\n  direction,\n  length,\n  len: length\n}\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier} [start]\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=} start\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0 && stop) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let started = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (started) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        started = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n            // We need to set this to false because callbacks can still happen despite having unsubscribed:\n            // Callbacks might already be placed in the queue which doesn't know it should no longer\n            // invoke this derived store.\n            started = false;\n        };\n    });\n}\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @param store - store to make readonly\n */\nfunction readonly(store) {\n    return {\n        subscribe: store.subscribe.bind(store)\n    };\n}\n\nexport { derived, readable, readonly, writable };\n","import { writable } from 'svelte/store';\nexport let toollayer = writable(0);","export default class magneticLines {\n\n    rotatePoint(px, py, angle) {\n        const cosTheta = Math.cos(angle);\n        const sinTheta = Math.sin(angle);\n        return {\n          x: px * cosTheta - py * sinTheta,\n          y: px * sinTheta + py * cosTheta\n        };\n      }\n    calcMagneticLine(side, linePosition, lineOrientation, box) {\n          let lineCenter;\n          let theta_line;\n          let x_line;\n          let y_line;\n          let lineLength;\n          let extendLength = 500; // Extension length beyond the rectangle\n  \n          // Extract box properties\n          let x = box.x;\n          let y = box.y;\n          let width = box.width;\n          let height = box.height;\n          let theta = box.rotation;\n  \n          // Calculate the center of the rectangle\n          let x_center = x + width / 2;\n          let y_center = y + height / 2;\n  \n          if (linePosition === 'side') {\n              // Line along the side\n              if (side === 'top') {\n              lineCenter = this.rotatePoint(0, -height / 2, theta);\n              theta_line = theta;\n              lineLength = width + 2 * extendLength;\n              } else if (side === 'right') {\n              lineCenter = this.rotatePoint(width / 2, 0, theta);\n              theta_line = theta + Math.PI / 2;\n              lineLength = height + 2 * extendLength;\n              } else if (side === 'bottom') {\n              lineCenter = this.rotatePoint(0, height / 2, theta);\n              theta_line = theta + Math.PI;\n              lineLength = width + 2 * extendLength;\n              } else if (side === 'left') {\n              lineCenter = this.rotatePoint(-width / 2, 0, theta);\n              theta_line = theta - Math.PI / 2;\n              lineLength = height + 2 * extendLength;\n              }\n              // @ts-ignore\n              x_line = x_center + lineCenter.x;\n              // @ts-ignore\n              y_line = y_center + lineCenter.y;\n          } else if (linePosition === 'center') {\n              // Line through the center\n              x_line = x_center;\n              y_line = y_center;\n  \n              if (lineOrientation === 'horizontal') {\n              theta_line = theta; // Aligned with rectangle's top and bottom edges\n              } else if (lineOrientation === 'vertical') {\n              theta_line = theta + Math.PI / 2; // Aligned with rectangle's left and right edges\n              } else if (lineOrientation === 'aligned') {\n              theta_line = theta; // Same as 'horizontal' in this context\n              }\n              // Calculate length sufficient to cover rectangle\n              const diagonal = Math.hypot(width, height)\n              lineLength = diagonal + 2 * extendLength\n          }\n          return { x_line, y_line, lineLength, theta_line }\n      }\n  \n    /**\n     * Converts the normalized snapped position back to the original coordinates before normalization.\n     * Uses the shared center and sharedRotation from rotateBoxesToZero.\n     * \n     * @param {Object} normalizedSnappedPosition - The snapped position after normalization (x, y only)\n     * @param {Number} originalRotation - The rotation that was applied during normalization\n     * @returns {Object} - The transformed position with correct original x, y coordinates\n     */\n    rotatePositionBackToOriginal(normalizedSnappedPosition, originalRotation,) {\n        let centerX=this.centerX\n        let centerY=this.centerY\n        // Extract normalized position and dimensions\n        const snappedX = normalizedSnappedPosition.x;\n        const snappedY = normalizedSnappedPosition.y;\n        const width = normalizedSnappedPosition.width;\n        const height = normalizedSnappedPosition.height;\n\n        // Calculate the center of the box in normalized coordinates\n        const boxCenterX = snappedX + width / 2;\n        const boxCenterY = snappedY + height / 2;\n\n        // Rotate the center back by originalRotation around the centroid\n        // @ts-ignore\n        const rotatedCenterX = centerX + (boxCenterX - centerX) * Math.cos(originalRotation) - (boxCenterY - centerY) * Math.sin(originalRotation);\n        // @ts-ignore\n        const rotatedCenterY = centerY + (boxCenterX - centerX) * Math.sin(originalRotation) + (boxCenterY - centerY) * Math.cos(originalRotation);\n\n        // Calculate the new top-left position\n        const rotatedX = rotatedCenterX - width / 2;\n        const rotatedY = rotatedCenterY - height / 2;\n\n        // Return the original position after rotating back\n        return {\n            x: rotatedX,\n            y: rotatedY,\n            width: width,\n            height: height,\n            rotation: originalRotation\n        };\n    }\n\n\n    /**\n     * rotation of list of layers/boxes so that rotation is zero but arragement of all boxes remains same\n     * @param boxes\n     * @param sharedRotation\n     */\n     rotateBoxesToZero(boxes, sharedRotation) {\n        // Calculate the center point of the system, could be an average of all centers or a specific point.\n        let centerX = 0\n        let centerY = 0\n\n        boxes.forEach(box => {\n            centerX += box.x + box.width / 2\n            centerY += box.y + box.height / 2\n        });\n\n        centerX /= boxes.length\n        centerY /= boxes.length\n        this.centerX=centerX\n        this.centerY=centerY\n        // Rotate all boxes by the negative of the shared rotation\n        boxes.forEach(box => {\n            let boxCenterX = box.x + box.width / 2\n            let boxCenterY = box.y + box.height / 2\n\n            let newX = centerX + (boxCenterX - centerX) * Math.cos(-sharedRotation) - (boxCenterY - centerY) * Math.sin(-sharedRotation)\n            let newY = centerY + (boxCenterX - centerX) * Math.sin(-sharedRotation) + (boxCenterY - centerY) * Math.cos(-sharedRotation)\n\n            // Update the box position by adjusting for the new center point\n            box.x = newX - box.width / 2\n            box.y = newY - box.height / 2\n\n            // Set rotation to 0\n            box.rotation = 0\n        })\n\n        return boxes\n    }\n}","export function warpImage(img, dstCoords, canvas,rotationAngle) {\n\n    // Use naturalWidth and naturalHeight throughout\n    var imgWidth = img.naturalWidth;\n    var imgHeight = img.naturalHeight;\n\n    // Define source coordinates (corners of the source image)\n    var srcCoords = [\n        { x: 0, y: 0 },\n        { x: imgWidth, y: 0 },\n        { x: imgWidth, y: imgHeight },\n        { x: 0, y: imgHeight }\n    ];\n\n\n    const radians =  -rotationAngle;\n    const cosA = Math.cos(radians);\n    const sinA = Math.sin(radians);\n\n    // Rotate source points around the center\n    let [centerX,centerY] =  getCenterFromCorners(srcCoords);\n    if(rotationAngle) {\n        srcCoords = srcCoords.map(({x, y}) => {\n            const dx = x - centerX;\n            const dy = y - centerY;\n            const xRot = dx * cosA - dy * sinA + centerX;\n            const yRot = dx * sinA + dy * cosA + centerY;\n            return {x: xRot, y: yRot};\n        });\n    }\n\n\n    // Compute the homography matrix H that maps srcCoords to dstCoords\n    var H = computeHomography(srcCoords, dstCoords);\n\n    // Calculate the bounding box of the destination coordinates\n\n    var dminX = Math.min(...dstCoords.map(p => p.x));\n    var dmaxX = Math.max(...dstCoords.map(p => p.x));\n    var dminY = Math.min(...dstCoords.map(p => p.y));\n    var dmaxY = Math.max(...dstCoords.map(p => p.y));\n\n    let reswidth = dmaxX - dminX;\n    let resheight = dmaxY - dminY;\n\n    canvas.width = Math.ceil(reswidth);\n    canvas.height = Math.ceil(resheight);\n\n    // Prepare the inverse homography for reverse mapping\n    var invH = invertHomography(H);\n\n    // Draw the source image onto a temporary canvas to access pixel data\n    var tempCanvas = document.createElement('canvas');\n    tempCanvas.width = imgWidth;\n    tempCanvas.height = imgHeight;\n    var tempCtx = tempCanvas.getContext('2d');\n    tempCtx.drawImage(img, 0, 0, imgWidth, imgHeight);\n    var srcImageData = tempCtx.getImageData(0, 0, imgWidth, imgHeight);\n    var srcData = srcImageData.data;\n\n    // Get destination canvas context and image data\n    var dstCtx = canvas.getContext('2d');\n    var dstImageData = dstCtx.createImageData(canvas.width, canvas.height);\n    var dstData = dstImageData.data;\n\n    // Process each pixel in the destination image\n    for (var y = 0; y < canvas.height; y++) {\n        for (var x = 0; x < canvas.width; x++) {\n            // Map the pixel position to the corresponding position in the source image\n            var destX = x + dminX;\n            var destY = y + dminY;\n\n            var srcPos = applyHomography(invH, destX, destY);\n\n            var xs = srcPos.x;\n            var ys = srcPos.y;\n\n            // Check if the source position is within the source image bounds\n            if (xs >= 0 && xs < imgWidth && ys >= 0 && ys < imgHeight) {\n                // Use bilinear interpolation to sample the pixel\n                var color = sampleBilinear(srcData, imgWidth, imgHeight, xs, ys);\n\n                // Set the pixel in the destination image\n                var index = (y * canvas.width + x) * 4;\n                dstData[index] = color[0];\n                dstData[index + 1] = color[1];\n                dstData[index + 2] = color[2];\n                dstData[index + 3] = color[3];\n            }\n        }\n    }\n\n    dstCtx.putImageData(dstImageData, 0, 0);\n}\n\nfunction getCenterFromCorners(corners) {\n    // Top-left corner is the first element\n    const topLeft = corners[0];\n    // Bottom-right corner is the third element\n    const bottomRight = corners[2];\n    const centerX = (topLeft.x + bottomRight.x) / 2;\n    const centerY = (topLeft.y + bottomRight.y) / 2;\n    return [ centerX, centerY ];\n}\n\nfunction computeHomography(src, dst) {\n    // Set up matrix equations to solve for homography\n    var A = [];\n    for (var i = 0; i < 4; i++) {\n        var xs = src[i].x;\n        var ys = src[i].y;\n        var xd = dst[i].x;\n        var yd = dst[i].y;\n\n        A.push([-xs, -ys, -1, 0, 0, 0, xs * xd, ys * xd, xd]);\n        A.push([0, 0, 0, -xs, -ys, -1, xs * yd, ys * yd, yd]);\n    }\n\n    // Solve Ah = 0 using Singular Value Decomposition (SVD)\n    var h = solveHomography(A);\n\n    // Reshape h into a 3x3 matrix\n    var H = [\n        [h[0], h[1], h[2]],\n        [h[3], h[4], h[5]],\n        [h[6], h[7], h[8]]\n    ];\n\n    return H;\n}\n\nfunction solveHomography(A) {\n    // Use SVD to solve Ah = 0\n    // For simplicity, we use numeric.js library functions\n    // Since we can't use external libraries, we'll use a simple approximation\n\n    // Normally, you would perform SVD here, but we'll approximate for simplicity\n    // We'll set h[8] = 1 and solve the linear system\n    var a = [];\n    var b = [];\n    for (var i = 0; i < A.length; i++) {\n        a.push(A[i].slice(0, 8));\n        b.push(-A[i][8]);\n    }\n\n    // Solve for h[0..7]\n    var h = solveLinearSystem(a, b);\n    h.push(1); // h[8] = 1\n\n    return h;\n}\n\nfunction solveLinearSystem(A, b) {\n    // Simple Gaussian elimination solver\n    var m = A.length;\n    var n = A[0].length;\n\n    // Augment A with b\n    for (var i = 0; i < m; i++) {\n        A[i].push(b[i]);\n    }\n\n    // Forward elimination\n    for (var k = 0; k < n; k++) {\n        // Find the pivot row\n        var maxRow = k;\n        var maxVal = Math.abs(A[k][k]);\n        for (var i = k + 1; i < m; i++) {\n            if (Math.abs(A[i][k]) > maxVal) {\n                maxVal = Math.abs(A[i][k]);\n                maxRow = i;\n            }\n        }\n\n        // Swap rows\n        if (maxRow !== k) {\n            var temp = A[k];\n            A[k] = A[maxRow];\n            A[maxRow] = temp;\n        }\n\n        // Eliminate below\n        for (var i = k + 1; i < m; i++) {\n            var c = A[i][k] / A[k][k];\n            for (var j = k; j <= n; j++) {\n                A[i][j] -= c * A[k][j];\n            }\n        }\n    }\n\n    // Back substitution\n    var x = new Array(n);\n    for (var i = n - 1; i >= 0; i--) {\n        x[i] = A[i][n] / A[i][i];\n        for (var k = i - 1; k >= 0; k--) {\n            A[k][n] -= A[k][i] * x[i];\n        }\n    }\n\n    return x;\n}\n\nfunction invertHomography(H) {\n    // Compute the inverse of a 3x3 matrix\n    var det =\n        H[0][0] * (H[1][1] * H[2][2] - H[2][1] * H[1][2]) -\n        H[0][1] * (H[1][0] * H[2][2] - H[2][0] * H[1][2]) +\n        H[0][2] * (H[1][0] * H[2][1] - H[2][0] * H[1][1]);\n\n    if (det === 0) {\n        throw new Error(\"Homography matrix is singular and cannot be inverted.\");\n    }\n\n    var invDet = 1 / det;\n\n    var invH = [\n        [\n            (H[1][1] * H[2][2] - H[2][1] * H[1][2]) * invDet,\n            (H[0][2] * H[2][1] - H[0][1] * H[2][2]) * invDet,\n            (H[0][1] * H[1][2] - H[0][2] * H[1][1]) * invDet\n        ],\n        [\n            (H[1][2] * H[2][0] - H[1][0] * H[2][2]) * invDet,\n            (H[0][0] * H[2][2] - H[0][2] * H[2][0]) * invDet,\n            (H[1][0] * H[0][2] - H[0][0] * H[1][2]) * invDet\n        ],\n        [\n            (H[1][0] * H[2][1] - H[2][0] * H[1][1]) * invDet,\n            (H[2][0] * H[0][1] - H[0][0] * H[2][1]) * invDet,\n            (H[0][0] * H[1][1] - H[1][0] * H[0][1]) * invDet\n        ]\n    ];\n\n    return invH;\n}\n\nfunction applyHomography(H, x, y) {\n    var denom = H[2][0] * x + H[2][1] * y + H[2][2];\n    var xs = (H[0][0] * x + H[0][1] * y + H[0][2]) / denom;\n    var ys = (H[1][0] * x + H[1][1] * y + H[1][2]) / denom;\n    return { x: xs, y: ys };\n}\n\nfunction sampleBilinear(data, width, height, x, y) {\n    var x0 = Math.floor(x);\n    var y0 = Math.floor(y);\n    var x1 = x0 + 1;\n    var y1 = y0 + 1;\n\n    var dx = x - x0;\n    var dy = y - y0;\n\n    var index = function (xi, yi) {\n        xi = Math.max(0, Math.min(width - 1, xi));\n        yi = Math.max(0, Math.min(height - 1, yi));\n        return (yi * width + xi) * 4;\n    };\n\n    var c00 = getPixel(data, index(x0, y0));\n    var c10 = getPixel(data, index(x1, y0));\n    var c01 = getPixel(data, index(x0, y1));\n    var c11 = getPixel(data, index(x1, y1));\n\n    var c0 = interpolateColor(c00, c10, dx);\n    var c1 = interpolateColor(c01, c11, dx);\n    var c = interpolateColor(c0, c1, dy);\n\n    return c;\n}\n\nfunction getPixel(data, index) {\n    return [data[index], data[index + 1], data[index + 2], data[index + 3]];\n}\n\nfunction interpolateColor(c0, c1, t) {\n    var c = [];\n    for (var i = 0; i < 4; i++) {\n        c[i] = c0[i] * (1 - t) + c1[i] * t;\n    }\n    return c;\n}\n","\"use strict\";\n\nvar numeric = (typeof exports === \"undefined\")?(function numeric() {}):(exports);\nif(typeof global !== \"undefined\") { global.numeric = numeric; }\n\nnumeric.version = \"1.2.6\";\n\n// 1. Utility functions\nnumeric.bench = function bench (f,interval) {\n    var t1,t2,n,i;\n    if(typeof interval === \"undefined\") { interval = 15; }\n    n = 0.5;\n    t1 = new Date();\n    while(1) {\n        n*=2;\n        for(i=n;i>3;i-=4) { f(); f(); f(); f(); }\n        while(i>0) { f(); i--; }\n        t2 = new Date();\n        if(t2-t1 > interval) break;\n    }\n    for(i=n;i>3;i-=4) { f(); f(); f(); f(); }\n    while(i>0) { f(); i--; }\n    t2 = new Date();\n    return 1000*(3*n-1)/(t2-t1);\n}\n\nnumeric._myIndexOf = (function _myIndexOf(w) {\n    var n = this.length,k;\n    for(k=0;k<n;++k) if(this[k]===w) return k;\n    return -1;\n});\nnumeric.myIndexOf = (Array.prototype.indexOf)?Array.prototype.indexOf:numeric._myIndexOf;\n\nnumeric.Function = Function;\nnumeric.precision = 4;\nnumeric.largeArray = 50;\n\nnumeric.prettyPrint = function prettyPrint(x) {\n    function fmtnum(x) {\n        if(x === 0) { return '0'; }\n        if(isNaN(x)) { return 'NaN'; }\n        if(x<0) { return '-'+fmtnum(-x); }\n        if(isFinite(x)) {\n            var scale = Math.floor(Math.log(x) / Math.log(10));\n            var normalized = x / Math.pow(10,scale);\n            var basic = normalized.toPrecision(numeric.precision);\n            if(parseFloat(basic) === 10) { scale++; normalized = 1; basic = normalized.toPrecision(numeric.precision); }\n            return parseFloat(basic).toString()+'e'+scale.toString();\n        }\n        return 'Infinity';\n    }\n    var ret = [];\n    function foo(x) {\n        var k;\n        if(typeof x === \"undefined\") { ret.push(Array(numeric.precision+8).join(' ')); return false; }\n        if(typeof x === \"string\") { ret.push('\"'+x+'\"'); return false; }\n        if(typeof x === \"boolean\") { ret.push(x.toString()); return false; }\n        if(typeof x === \"number\") {\n            var a = fmtnum(x);\n            var b = x.toPrecision(numeric.precision);\n            var c = parseFloat(x.toString()).toString();\n            var d = [a,b,c,parseFloat(b).toString(),parseFloat(c).toString()];\n            for(k=1;k<d.length;k++) { if(d[k].length < a.length) a = d[k]; }\n            ret.push(Array(numeric.precision+8-a.length).join(' ')+a);\n            return false;\n        }\n        if(x === null) { ret.push(\"null\"); return false; }\n        if(typeof x === \"function\") { \n            ret.push(x.toString());\n            var flag = false;\n            for(k in x) { if(x.hasOwnProperty(k)) { \n                if(flag) ret.push(',\\n');\n                else ret.push('\\n{');\n                flag = true; \n                ret.push(k); \n                ret.push(': \\n'); \n                foo(x[k]); \n            } }\n            if(flag) ret.push('}\\n');\n            return true;\n        }\n        if(x instanceof Array) {\n            if(x.length > numeric.largeArray) { ret.push('...Large Array...'); return true; }\n            var flag = false;\n            ret.push('[');\n            for(k=0;k<x.length;k++) { if(k>0) { ret.push(','); if(flag) ret.push('\\n '); } flag = foo(x[k]); }\n            ret.push(']');\n            return true;\n        }\n        ret.push('{');\n        var flag = false;\n        for(k in x) { if(x.hasOwnProperty(k)) { if(flag) ret.push(',\\n'); flag = true; ret.push(k); ret.push(': \\n'); foo(x[k]); } }\n        ret.push('}');\n        return true;\n    }\n    foo(x);\n    return ret.join('');\n}\n\nnumeric.parseDate = function parseDate(d) {\n    function foo(d) {\n        if(typeof d === 'string') { return Date.parse(d.replace(/-/g,'/')); }\n        if(!(d instanceof Array)) { throw new Error(\"parseDate: parameter must be arrays of strings\"); }\n        var ret = [],k;\n        for(k=0;k<d.length;k++) { ret[k] = foo(d[k]); }\n        return ret;\n    }\n    return foo(d);\n}\n\nnumeric.parseFloat = function parseFloat_(d) {\n    function foo(d) {\n        if(typeof d === 'string') { return parseFloat(d); }\n        if(!(d instanceof Array)) { throw new Error(\"parseFloat: parameter must be arrays of strings\"); }\n        var ret = [],k;\n        for(k=0;k<d.length;k++) { ret[k] = foo(d[k]); }\n        return ret;\n    }\n    return foo(d);\n}\n\nnumeric.parseCSV = function parseCSV(t) {\n    var foo = t.split('\\n');\n    var j,k;\n    var ret = [];\n    var pat = /(([^'\",]*)|('[^']*')|(\"[^\"]*\")),/g;\n    var patnum = /^\\s*(([+-]?[0-9]+(\\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\\.[0-9]+)?(e[+-]?[0-9]+)?))\\s*$/;\n    var stripper = function(n) { return n.substr(0,n.length-1); }\n    var count = 0;\n    for(k=0;k<foo.length;k++) {\n      var bar = (foo[k]+\",\").match(pat),baz;\n      if(bar.length>0) {\n          ret[count] = [];\n          for(j=0;j<bar.length;j++) {\n              baz = stripper(bar[j]);\n              if(patnum.test(baz)) { ret[count][j] = parseFloat(baz); }\n              else ret[count][j] = baz;\n          }\n          count++;\n      }\n    }\n    return ret;\n}\n\nnumeric.toCSV = function toCSV(A) {\n    var s = numeric.dim(A);\n    var i,j,m,n,row,ret;\n    m = s[0];\n    n = s[1];\n    ret = [];\n    for(i=0;i<m;i++) {\n        row = [];\n        for(j=0;j<m;j++) { row[j] = A[i][j].toString(); }\n        ret[i] = row.join(', ');\n    }\n    return ret.join('\\n')+'\\n';\n}\n\nnumeric.getURL = function getURL(url) {\n    var client = new XMLHttpRequest();\n    client.open(\"GET\",url,false);\n    client.send();\n    return client;\n}\n\nnumeric.imageURL = function imageURL(img) {\n    function base64(A) {\n        var n = A.length, i,x,y,z,p,q,r,s;\n        var key = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n        var ret = \"\";\n        for(i=0;i<n;i+=3) {\n            x = A[i];\n            y = A[i+1];\n            z = A[i+2];\n            p = x >> 2;\n            q = ((x & 3) << 4) + (y >> 4);\n            r = ((y & 15) << 2) + (z >> 6);\n            s = z & 63;\n            if(i+1>=n) { r = s = 64; }\n            else if(i+2>=n) { s = 64; }\n            ret += key.charAt(p) + key.charAt(q) + key.charAt(r) + key.charAt(s);\n            }\n        return ret;\n    }\n    function crc32Array (a,from,to) {\n        if(typeof from === \"undefined\") { from = 0; }\n        if(typeof to === \"undefined\") { to = a.length; }\n        var table = [0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3,\n                     0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91, \n                     0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE, 0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7,\n                     0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5, \n                     0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B, \n                     0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59, \n                     0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F,\n                     0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924, 0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D,\n                     0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433,\n                     0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01, \n                     0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457, \n                     0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65, \n                     0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2, 0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, \n                     0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9, \n                     0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F, \n                     0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, \n                     0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683, \n                     0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8, 0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, \n                     0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7, \n                     0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5, \n                     0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B, \n                     0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79, \n                     0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236, 0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, \n                     0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D, \n                     0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713, \n                     0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, \n                     0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777, \n                     0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C, 0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, \n                     0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB, \n                     0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9, \n                     0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF, \n                     0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D];\n     \n        var crc = -1, y = 0, n = a.length,i;\n\n        for (i = from; i < to; i++) {\n            y = (crc ^ a[i]) & 0xFF;\n            crc = (crc >>> 8) ^ table[y];\n        }\n     \n        return crc ^ (-1);\n    }\n\n    var h = img[0].length, w = img[0][0].length, s1, s2, next,k,length,a,b,i,j,adler32,crc32;\n    var stream = [\n                  137, 80, 78, 71, 13, 10, 26, 10,                           //  0: PNG signature\n                  0,0,0,13,                                                  //  8: IHDR Chunk length\n                  73, 72, 68, 82,                                            // 12: \"IHDR\" \n                  (w >> 24) & 255, (w >> 16) & 255, (w >> 8) & 255, w&255,   // 16: Width\n                  (h >> 24) & 255, (h >> 16) & 255, (h >> 8) & 255, h&255,   // 20: Height\n                  8,                                                         // 24: bit depth\n                  2,                                                         // 25: RGB\n                  0,                                                         // 26: deflate\n                  0,                                                         // 27: no filter\n                  0,                                                         // 28: no interlace\n                  -1,-2,-3,-4,                                               // 29: CRC\n                  -5,-6,-7,-8,                                               // 33: IDAT Chunk length\n                  73, 68, 65, 84,                                            // 37: \"IDAT\"\n                  // RFC 1950 header starts here\n                  8,                                                         // 41: RFC1950 CMF\n                  29                                                         // 42: RFC1950 FLG\n                  ];\n    crc32 = crc32Array(stream,12,29);\n    stream[29] = (crc32>>24)&255;\n    stream[30] = (crc32>>16)&255;\n    stream[31] = (crc32>>8)&255;\n    stream[32] = (crc32)&255;\n    s1 = 1;\n    s2 = 0;\n    for(i=0;i<h;i++) {\n        if(i<h-1) { stream.push(0); }\n        else { stream.push(1); }\n        a = (3*w+1+(i===0))&255; b = ((3*w+1+(i===0))>>8)&255;\n        stream.push(a); stream.push(b);\n        stream.push((~a)&255); stream.push((~b)&255);\n        if(i===0) stream.push(0);\n        for(j=0;j<w;j++) {\n            for(k=0;k<3;k++) {\n                a = img[k][i][j];\n                if(a>255) a = 255;\n                else if(a<0) a=0;\n                else a = Math.round(a);\n                s1 = (s1 + a )%65521;\n                s2 = (s2 + s1)%65521;\n                stream.push(a);\n            }\n        }\n        stream.push(0);\n    }\n    adler32 = (s2<<16)+s1;\n    stream.push((adler32>>24)&255);\n    stream.push((adler32>>16)&255);\n    stream.push((adler32>>8)&255);\n    stream.push((adler32)&255);\n    length = stream.length - 41;\n    stream[33] = (length>>24)&255;\n    stream[34] = (length>>16)&255;\n    stream[35] = (length>>8)&255;\n    stream[36] = (length)&255;\n    crc32 = crc32Array(stream,37);\n    stream.push((crc32>>24)&255);\n    stream.push((crc32>>16)&255);\n    stream.push((crc32>>8)&255);\n    stream.push((crc32)&255);\n    stream.push(0);\n    stream.push(0);\n    stream.push(0);\n    stream.push(0);\n//    a = stream.length;\n    stream.push(73);  // I\n    stream.push(69);  // E\n    stream.push(78);  // N\n    stream.push(68);  // D\n    stream.push(174); // CRC1\n    stream.push(66);  // CRC2\n    stream.push(96);  // CRC3\n    stream.push(130); // CRC4\n    return 'data:image/png;base64,'+base64(stream);\n}\n\n// 2. Linear algebra with Arrays.\nnumeric._dim = function _dim(x) {\n    var ret = [];\n    while(typeof x === \"object\") { ret.push(x.length); x = x[0]; }\n    return ret;\n}\n\nnumeric.dim = function dim(x) {\n    var y,z;\n    if(typeof x === \"object\") {\n        y = x[0];\n        if(typeof y === \"object\") {\n            z = y[0];\n            if(typeof z === \"object\") {\n                return numeric._dim(x);\n            }\n            return [x.length,y.length];\n        }\n        return [x.length];\n    }\n    return [];\n}\n\nnumeric.mapreduce = function mapreduce(body,init) {\n    return Function('x','accum','_s','_k',\n            'if(typeof accum === \"undefined\") accum = '+init+';\\n'+\n            'if(typeof x === \"number\") { var xi = x; '+body+'; return accum; }\\n'+\n            'if(typeof _s === \"undefined\") _s = numeric.dim(x);\\n'+\n            'if(typeof _k === \"undefined\") _k = 0;\\n'+\n            'var _n = _s[_k];\\n'+\n            'var i,xi;\\n'+\n            'if(_k < _s.length-1) {\\n'+\n            '    for(i=_n-1;i>=0;i--) {\\n'+\n            '        accum = arguments.callee(x[i],accum,_s,_k+1);\\n'+\n            '    }'+\n            '    return accum;\\n'+\n            '}\\n'+\n            'for(i=_n-1;i>=1;i-=2) { \\n'+\n            '    xi = x[i];\\n'+\n            '    '+body+';\\n'+\n            '    xi = x[i-1];\\n'+\n            '    '+body+';\\n'+\n            '}\\n'+\n            'if(i === 0) {\\n'+\n            '    xi = x[i];\\n'+\n            '    '+body+'\\n'+\n            '}\\n'+\n            'return accum;'\n            );\n}\nnumeric.mapreduce2 = function mapreduce2(body,setup) {\n    return Function('x',\n            'var n = x.length;\\n'+\n            'var i,xi;\\n'+setup+';\\n'+\n            'for(i=n-1;i!==-1;--i) { \\n'+\n            '    xi = x[i];\\n'+\n            '    '+body+';\\n'+\n            '}\\n'+\n            'return accum;'\n            );\n}\n\n\nnumeric.same = function same(x,y) {\n    var i,n;\n    if(!(x instanceof Array) || !(y instanceof Array)) { return false; }\n    n = x.length;\n    if(n !== y.length) { return false; }\n    for(i=0;i<n;i++) {\n        if(x[i] === y[i]) { continue; }\n        if(typeof x[i] === \"object\") { if(!same(x[i],y[i])) return false; }\n        else { return false; }\n    }\n    return true;\n}\n\nnumeric.rep = function rep(s,v,k) {\n    if(typeof k === \"undefined\") { k=0; }\n    var n = s[k], ret = Array(n), i;\n    if(k === s.length-1) {\n        for(i=n-2;i>=0;i-=2) { ret[i+1] = v; ret[i] = v; }\n        if(i===-1) { ret[0] = v; }\n        return ret;\n    }\n    for(i=n-1;i>=0;i--) { ret[i] = numeric.rep(s,v,k+1); }\n    return ret;\n}\n\n\nnumeric.dotMMsmall = function dotMMsmall(x,y) {\n    var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0;\n    p = x.length; q = y.length; r = y[0].length;\n    ret = Array(p);\n    for(i=p-1;i>=0;i--) {\n        foo = Array(r);\n        bar = x[i];\n        for(k=r-1;k>=0;k--) {\n            woo = bar[q-1]*y[q-1][k];\n            for(j=q-2;j>=1;j-=2) {\n                i0 = j-1;\n                woo += bar[j]*y[j][k] + bar[i0]*y[i0][k];\n            }\n            if(j===0) { woo += bar[0]*y[0][k]; }\n            foo[k] = woo;\n        }\n        ret[i] = foo;\n    }\n    return ret;\n}\nnumeric._getCol = function _getCol(A,j,x) {\n    var n = A.length, i;\n    for(i=n-1;i>0;--i) {\n        x[i] = A[i][j];\n        --i;\n        x[i] = A[i][j];\n    }\n    if(i===0) x[0] = A[0][j];\n}\nnumeric.dotMMbig = function dotMMbig(x,y){\n    var gc = numeric._getCol, p = y.length, v = Array(p);\n    var m = x.length, n = y[0].length, A = new Array(m), xj;\n    var VV = numeric.dotVV;\n    var i,j,k,z;\n    --p;\n    --m;\n    for(i=m;i!==-1;--i) A[i] = Array(n);\n    --n;\n    for(i=n;i!==-1;--i) {\n        gc(y,i,v);\n        for(j=m;j!==-1;--j) {\n            z=0;\n            xj = x[j];\n            A[j][i] = VV(xj,v);\n        }\n    }\n    return A;\n}\n\nnumeric.dotMV = function dotMV(x,y) {\n    var p = x.length, q = y.length,i;\n    var ret = Array(p), dotVV = numeric.dotVV;\n    for(i=p-1;i>=0;i--) { ret[i] = dotVV(x[i],y); }\n    return ret;\n}\n\nnumeric.dotVM = function dotVM(x,y) {\n    var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0,s1,s2,s3,baz,accum;\n    p = x.length; q = y[0].length;\n    ret = Array(q);\n    for(k=q-1;k>=0;k--) {\n        woo = x[p-1]*y[p-1][k];\n        for(j=p-2;j>=1;j-=2) {\n            i0 = j-1;\n            woo += x[j]*y[j][k] + x[i0]*y[i0][k];\n        }\n        if(j===0) { woo += x[0]*y[0][k]; }\n        ret[k] = woo;\n    }\n    return ret;\n}\n\nnumeric.dotVV = function dotVV(x,y) {\n    var i,n=x.length,i1,ret = x[n-1]*y[n-1];\n    for(i=n-2;i>=1;i-=2) {\n        i1 = i-1;\n        ret += x[i]*y[i] + x[i1]*y[i1];\n    }\n    if(i===0) { ret += x[0]*y[0]; }\n    return ret;\n}\n\nnumeric.dot = function dot(x,y) {\n    var d = numeric.dim;\n    switch(d(x).length*1000+d(y).length) {\n    case 2002:\n        if(y.length < 10) return numeric.dotMMsmall(x,y);\n        else return numeric.dotMMbig(x,y);\n    case 2001: return numeric.dotMV(x,y);\n    case 1002: return numeric.dotVM(x,y);\n    case 1001: return numeric.dotVV(x,y);\n    case 1000: return numeric.mulVS(x,y);\n    case 1: return numeric.mulSV(x,y);\n    case 0: return x*y;\n    default: throw new Error('numeric.dot only works on vectors and matrices');\n    }\n}\n\nnumeric.diag = function diag(d) {\n    var i,i1,j,n = d.length, A = Array(n), Ai;\n    for(i=n-1;i>=0;i--) {\n        Ai = Array(n);\n        i1 = i+2;\n        for(j=n-1;j>=i1;j-=2) {\n            Ai[j] = 0;\n            Ai[j-1] = 0;\n        }\n        if(j>i) { Ai[j] = 0; }\n        Ai[i] = d[i];\n        for(j=i-1;j>=1;j-=2) {\n            Ai[j] = 0;\n            Ai[j-1] = 0;\n        }\n        if(j===0) { Ai[0] = 0; }\n        A[i] = Ai;\n    }\n    return A;\n}\nnumeric.getDiag = function(A) {\n    var n = Math.min(A.length,A[0].length),i,ret = Array(n);\n    for(i=n-1;i>=1;--i) {\n        ret[i] = A[i][i];\n        --i;\n        ret[i] = A[i][i];\n    }\n    if(i===0) {\n        ret[0] = A[0][0];\n    }\n    return ret;\n}\n\nnumeric.identity = function identity(n) { return numeric.diag(numeric.rep([n],1)); }\nnumeric.pointwise = function pointwise(params,body,setup) {\n    if(typeof setup === \"undefined\") { setup = \"\"; }\n    var fun = [];\n    var k;\n    var avec = /\\[i\\]$/,p,thevec = '';\n    var haveret = false;\n    for(k=0;k<params.length;k++) {\n        if(avec.test(params[k])) {\n            p = params[k].substring(0,params[k].length-3);\n            thevec = p;\n        } else { p = params[k]; }\n        if(p==='ret') haveret = true;\n        fun.push(p);\n    }\n    fun[params.length] = '_s';\n    fun[params.length+1] = '_k';\n    fun[params.length+2] = (\n            'if(typeof _s === \"undefined\") _s = numeric.dim('+thevec+');\\n'+\n            'if(typeof _k === \"undefined\") _k = 0;\\n'+\n            'var _n = _s[_k];\\n'+\n            'var i'+(haveret?'':', ret = Array(_n)')+';\\n'+\n            'if(_k < _s.length-1) {\\n'+\n            '    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee('+params.join(',')+',_s,_k+1);\\n'+\n            '    return ret;\\n'+\n            '}\\n'+\n            setup+'\\n'+\n            'for(i=_n-1;i!==-1;--i) {\\n'+\n            '    '+body+'\\n'+\n            '}\\n'+\n            'return ret;'\n            );\n    return Function.apply(null,fun);\n}\nnumeric.pointwise2 = function pointwise2(params,body,setup) {\n    if(typeof setup === \"undefined\") { setup = \"\"; }\n    var fun = [];\n    var k;\n    var avec = /\\[i\\]$/,p,thevec = '';\n    var haveret = false;\n    for(k=0;k<params.length;k++) {\n        if(avec.test(params[k])) {\n            p = params[k].substring(0,params[k].length-3);\n            thevec = p;\n        } else { p = params[k]; }\n        if(p==='ret') haveret = true;\n        fun.push(p);\n    }\n    fun[params.length] = (\n            'var _n = '+thevec+'.length;\\n'+\n            'var i'+(haveret?'':', ret = Array(_n)')+';\\n'+\n            setup+'\\n'+\n            'for(i=_n-1;i!==-1;--i) {\\n'+\n            body+'\\n'+\n            '}\\n'+\n            'return ret;'\n            );\n    return Function.apply(null,fun);\n}\nnumeric._biforeach = (function _biforeach(x,y,s,k,f) {\n    if(k === s.length-1) { f(x,y); return; }\n    var i,n=s[k];\n    for(i=n-1;i>=0;i--) { _biforeach(typeof x===\"object\"?x[i]:x,typeof y===\"object\"?y[i]:y,s,k+1,f); }\n});\nnumeric._biforeach2 = (function _biforeach2(x,y,s,k,f) {\n    if(k === s.length-1) { return f(x,y); }\n    var i,n=s[k],ret = Array(n);\n    for(i=n-1;i>=0;--i) { ret[i] = _biforeach2(typeof x===\"object\"?x[i]:x,typeof y===\"object\"?y[i]:y,s,k+1,f); }\n    return ret;\n});\nnumeric._foreach = (function _foreach(x,s,k,f) {\n    if(k === s.length-1) { f(x); return; }\n    var i,n=s[k];\n    for(i=n-1;i>=0;i--) { _foreach(x[i],s,k+1,f); }\n});\nnumeric._foreach2 = (function _foreach2(x,s,k,f) {\n    if(k === s.length-1) { return f(x); }\n    var i,n=s[k], ret = Array(n);\n    for(i=n-1;i>=0;i--) { ret[i] = _foreach2(x[i],s,k+1,f); }\n    return ret;\n});\n\n/*numeric.anyV = numeric.mapreduce('if(xi) return true;','false');\nnumeric.allV = numeric.mapreduce('if(!xi) return false;','true');\nnumeric.any = function(x) { if(typeof x.length === \"undefined\") return x; return numeric.anyV(x); }\nnumeric.all = function(x) { if(typeof x.length === \"undefined\") return x; return numeric.allV(x); }*/\n\nnumeric.ops2 = {\n        add: '+',\n        sub: '-',\n        mul: '*',\n        div: '/',\n        mod: '%',\n        and: '&&',\n        or:  '||',\n        eq:  '===',\n        neq: '!==',\n        lt:  '<',\n        gt:  '>',\n        leq: '<=',\n        geq: '>=',\n        band: '&',\n        bor: '|',\n        bxor: '^',\n        lshift: '<<',\n        rshift: '>>',\n        rrshift: '>>>'\n};\nnumeric.opseq = {\n        addeq: '+=',\n        subeq: '-=',\n        muleq: '*=',\n        diveq: '/=',\n        modeq: '%=',\n        lshifteq: '<<=',\n        rshifteq: '>>=',\n        rrshifteq: '>>>=',\n        bandeq: '&=',\n        boreq: '|=',\n        bxoreq: '^='\n};\nnumeric.mathfuns = ['abs','acos','asin','atan','ceil','cos',\n                    'exp','floor','log','round','sin','sqrt','tan',\n                    'isNaN','isFinite'];\nnumeric.mathfuns2 = ['atan2','pow','max','min'];\nnumeric.ops1 = {\n        neg: '-',\n        not: '!',\n        bnot: '~',\n        clone: ''\n};\nnumeric.mapreducers = {\n        any: ['if(xi) return true;','var accum = false;'],\n        all: ['if(!xi) return false;','var accum = true;'],\n        sum: ['accum += xi;','var accum = 0;'],\n        prod: ['accum *= xi;','var accum = 1;'],\n        norm2Squared: ['accum += xi*xi;','var accum = 0;'],\n        norminf: ['accum = max(accum,abs(xi));','var accum = 0, max = Math.max, abs = Math.abs;'],\n        norm1: ['accum += abs(xi)','var accum = 0, abs = Math.abs;'],\n        sup: ['accum = max(accum,xi);','var accum = -Infinity, max = Math.max;'],\n        inf: ['accum = min(accum,xi);','var accum = Infinity, min = Math.min;']\n};\n\n(function () {\n    var i,o;\n    for(i=0;i<numeric.mathfuns2.length;++i) {\n        o = numeric.mathfuns2[i];\n        numeric.ops2[o] = o;\n    }\n    for(i in numeric.ops2) {\n        if(numeric.ops2.hasOwnProperty(i)) {\n            o = numeric.ops2[i];\n            var code, codeeq, setup = '';\n            if(numeric.myIndexOf.call(numeric.mathfuns2,i)!==-1) {\n                setup = 'var '+o+' = Math.'+o+';\\n';\n                code = function(r,x,y) { return r+' = '+o+'('+x+','+y+')'; };\n                codeeq = function(x,y) { return x+' = '+o+'('+x+','+y+')'; };\n            } else {\n                code = function(r,x,y) { return r+' = '+x+' '+o+' '+y; };\n                if(numeric.opseq.hasOwnProperty(i+'eq')) {\n                    codeeq = function(x,y) { return x+' '+o+'= '+y; };\n                } else {\n                    codeeq = function(x,y) { return x+' = '+x+' '+o+' '+y; };                    \n                }\n            }\n            numeric[i+'VV'] = numeric.pointwise2(['x[i]','y[i]'],code('ret[i]','x[i]','y[i]'),setup);\n            numeric[i+'SV'] = numeric.pointwise2(['x','y[i]'],code('ret[i]','x','y[i]'),setup);\n            numeric[i+'VS'] = numeric.pointwise2(['x[i]','y'],code('ret[i]','x[i]','y'),setup);\n            numeric[i] = Function(\n                    'var n = arguments.length, i, x = arguments[0], y;\\n'+\n                    'var VV = numeric.'+i+'VV, VS = numeric.'+i+'VS, SV = numeric.'+i+'SV;\\n'+\n                    'var dim = numeric.dim;\\n'+\n                    'for(i=1;i!==n;++i) { \\n'+\n                    '  y = arguments[i];\\n'+\n                    '  if(typeof x === \"object\") {\\n'+\n                    '      if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n'+\n                    '      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n'+\n                    '  } else if(typeof y === \"object\") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n'+\n                    '  else '+codeeq('x','y')+'\\n'+\n                    '}\\nreturn x;\\n');\n            numeric[o] = numeric[i];\n            numeric[i+'eqV'] = numeric.pointwise2(['ret[i]','x[i]'], codeeq('ret[i]','x[i]'),setup);\n            numeric[i+'eqS'] = numeric.pointwise2(['ret[i]','x'], codeeq('ret[i]','x'),setup);\n            numeric[i+'eq'] = Function(\n                    'var n = arguments.length, i, x = arguments[0], y;\\n'+\n                    'var V = numeric.'+i+'eqV, S = numeric.'+i+'eqS\\n'+\n                    'var s = numeric.dim(x);\\n'+\n                    'for(i=1;i!==n;++i) { \\n'+\n                    '  y = arguments[i];\\n'+\n                    '  if(typeof y === \"object\") numeric._biforeach(x,y,s,0,V);\\n'+\n                    '  else numeric._biforeach(x,y,s,0,S);\\n'+\n                    '}\\nreturn x;\\n');\n        }\n    }\n    for(i=0;i<numeric.mathfuns2.length;++i) {\n        o = numeric.mathfuns2[i];\n        delete numeric.ops2[o];\n    }\n    for(i=0;i<numeric.mathfuns.length;++i) {\n        o = numeric.mathfuns[i];\n        numeric.ops1[o] = o;\n    }\n    for(i in numeric.ops1) {\n        if(numeric.ops1.hasOwnProperty(i)) {\n            setup = '';\n            o = numeric.ops1[i];\n            if(numeric.myIndexOf.call(numeric.mathfuns,i)!==-1) {\n                if(Math.hasOwnProperty(o)) setup = 'var '+o+' = Math.'+o+';\\n';\n            }\n            numeric[i+'eqV'] = numeric.pointwise2(['ret[i]'],'ret[i] = '+o+'(ret[i]);',setup);\n            numeric[i+'eq'] = Function('x',\n                    'if(typeof x !== \"object\") return '+o+'x\\n'+\n                    'var i;\\n'+\n                    'var V = numeric.'+i+'eqV;\\n'+\n                    'var s = numeric.dim(x);\\n'+\n                    'numeric._foreach(x,s,0,V);\\n'+\n                    'return x;\\n');\n            numeric[i+'V'] = numeric.pointwise2(['x[i]'],'ret[i] = '+o+'(x[i]);',setup);\n            numeric[i] = Function('x',\n                    'if(typeof x !== \"object\") return '+o+'(x)\\n'+\n                    'var i;\\n'+\n                    'var V = numeric.'+i+'V;\\n'+\n                    'var s = numeric.dim(x);\\n'+\n                    'return numeric._foreach2(x,s,0,V);\\n');\n        }\n    }\n    for(i=0;i<numeric.mathfuns.length;++i) {\n        o = numeric.mathfuns[i];\n        delete numeric.ops1[o];\n    }\n    for(i in numeric.mapreducers) {\n        if(numeric.mapreducers.hasOwnProperty(i)) {\n            o = numeric.mapreducers[i];\n            numeric[i+'V'] = numeric.mapreduce2(o[0],o[1]);\n            numeric[i] = Function('x','s','k',\n                    o[1]+\n                    'if(typeof x !== \"object\") {'+\n                    '    xi = x;\\n'+\n                    o[0]+';\\n'+\n                    '    return accum;\\n'+\n                    '}'+\n                    'if(typeof s === \"undefined\") s = numeric.dim(x);\\n'+\n                    'if(typeof k === \"undefined\") k = 0;\\n'+\n                    'if(k === s.length-1) return numeric.'+i+'V(x);\\n'+\n                    'var xi;\\n'+\n                    'var n = x.length, i;\\n'+\n                    'for(i=n-1;i!==-1;--i) {\\n'+\n                    '   xi = arguments.callee(x[i]);\\n'+\n                    o[0]+';\\n'+\n                    '}\\n'+\n                    'return accum;\\n');\n        }\n    }\n}());\n\nnumeric.truncVV = numeric.pointwise(['x[i]','y[i]'],'ret[i] = round(x[i]/y[i])*y[i];','var round = Math.round;');\nnumeric.truncVS = numeric.pointwise(['x[i]','y'],'ret[i] = round(x[i]/y)*y;','var round = Math.round;');\nnumeric.truncSV = numeric.pointwise(['x','y[i]'],'ret[i] = round(x/y[i])*y[i];','var round = Math.round;');\nnumeric.trunc = function trunc(x,y) {\n    if(typeof x === \"object\") {\n        if(typeof y === \"object\") return numeric.truncVV(x,y);\n        return numeric.truncVS(x,y);\n    }\n    if (typeof y === \"object\") return numeric.truncSV(x,y);\n    return Math.round(x/y)*y;\n}\n\nnumeric.inv = function inv(x) {\n    var s = numeric.dim(x), abs = Math.abs, m = s[0], n = s[1];\n    var A = numeric.clone(x), Ai, Aj;\n    var I = numeric.identity(m), Ii, Ij;\n    var i,j,k,x;\n    for(j=0;j<n;++j) {\n        var i0 = -1;\n        var v0 = -1;\n        for(i=j;i!==m;++i) { k = abs(A[i][j]); if(k>v0) { i0 = i; v0 = k; } }\n        Aj = A[i0]; A[i0] = A[j]; A[j] = Aj;\n        Ij = I[i0]; I[i0] = I[j]; I[j] = Ij;\n        x = Aj[j];\n        for(k=j;k!==n;++k)    Aj[k] /= x; \n        for(k=n-1;k!==-1;--k) Ij[k] /= x;\n        for(i=m-1;i!==-1;--i) {\n            if(i!==j) {\n                Ai = A[i];\n                Ii = I[i];\n                x = Ai[j];\n                for(k=j+1;k!==n;++k)  Ai[k] -= Aj[k]*x;\n                for(k=n-1;k>0;--k) { Ii[k] -= Ij[k]*x; --k; Ii[k] -= Ij[k]*x; }\n                if(k===0) Ii[0] -= Ij[0]*x;\n            }\n        }\n    }\n    return I;\n}\n\nnumeric.det = function det(x) {\n    var s = numeric.dim(x);\n    if(s.length !== 2 || s[0] !== s[1]) { throw new Error('numeric: det() only works on square matrices'); }\n    var n = s[0], ret = 1,i,j,k,A = numeric.clone(x),Aj,Ai,alpha,temp,k1,k2,k3;\n    for(j=0;j<n-1;j++) {\n        k=j;\n        for(i=j+1;i<n;i++) { if(Math.abs(A[i][j]) > Math.abs(A[k][j])) { k = i; } }\n        if(k !== j) {\n            temp = A[k]; A[k] = A[j]; A[j] = temp;\n            ret *= -1;\n        }\n        Aj = A[j];\n        for(i=j+1;i<n;i++) {\n            Ai = A[i];\n            alpha = Ai[j]/Aj[j];\n            for(k=j+1;k<n-1;k+=2) {\n                k1 = k+1;\n                Ai[k] -= Aj[k]*alpha;\n                Ai[k1] -= Aj[k1]*alpha;\n            }\n            if(k!==n) { Ai[k] -= Aj[k]*alpha; }\n        }\n        if(Aj[j] === 0) { return 0; }\n        ret *= Aj[j];\n    }\n    return ret*A[j][j];\n}\n\nnumeric.transpose = function transpose(x) {\n    var i,j,m = x.length,n = x[0].length, ret=Array(n),A0,A1,Bj;\n    for(j=0;j<n;j++) ret[j] = Array(m);\n    for(i=m-1;i>=1;i-=2) {\n        A1 = x[i];\n        A0 = x[i-1];\n        for(j=n-1;j>=1;--j) {\n            Bj = ret[j]; Bj[i] = A1[j]; Bj[i-1] = A0[j];\n            --j;\n            Bj = ret[j]; Bj[i] = A1[j]; Bj[i-1] = A0[j];\n        }\n        if(j===0) {\n            Bj = ret[0]; Bj[i] = A1[0]; Bj[i-1] = A0[0];\n        }\n    }\n    if(i===0) {\n        A0 = x[0];\n        for(j=n-1;j>=1;--j) {\n            ret[j][0] = A0[j];\n            --j;\n            ret[j][0] = A0[j];\n        }\n        if(j===0) { ret[0][0] = A0[0]; }\n    }\n    return ret;\n}\nnumeric.negtranspose = function negtranspose(x) {\n    var i,j,m = x.length,n = x[0].length, ret=Array(n),A0,A1,Bj;\n    for(j=0;j<n;j++) ret[j] = Array(m);\n    for(i=m-1;i>=1;i-=2) {\n        A1 = x[i];\n        A0 = x[i-1];\n        for(j=n-1;j>=1;--j) {\n            Bj = ret[j]; Bj[i] = -A1[j]; Bj[i-1] = -A0[j];\n            --j;\n            Bj = ret[j]; Bj[i] = -A1[j]; Bj[i-1] = -A0[j];\n        }\n        if(j===0) {\n            Bj = ret[0]; Bj[i] = -A1[0]; Bj[i-1] = -A0[0];\n        }\n    }\n    if(i===0) {\n        A0 = x[0];\n        for(j=n-1;j>=1;--j) {\n            ret[j][0] = -A0[j];\n            --j;\n            ret[j][0] = -A0[j];\n        }\n        if(j===0) { ret[0][0] = -A0[0]; }\n    }\n    return ret;\n}\n\nnumeric._random = function _random(s,k) {\n    var i,n=s[k],ret=Array(n), rnd;\n    if(k === s.length-1) {\n        rnd = Math.random;\n        for(i=n-1;i>=1;i-=2) {\n            ret[i] = rnd();\n            ret[i-1] = rnd();\n        }\n        if(i===0) { ret[0] = rnd(); }\n        return ret;\n    }\n    for(i=n-1;i>=0;i--) ret[i] = _random(s,k+1);\n    return ret;\n}\nnumeric.random = function random(s) { return numeric._random(s,0); }\n\nnumeric.norm2 = function norm2(x) { return Math.sqrt(numeric.norm2Squared(x)); }\n\nnumeric.linspace = function linspace(a,b,n) {\n    if(typeof n === \"undefined\") n = Math.max(Math.round(b-a)+1,1);\n    if(n<2) { return n===1?[a]:[]; }\n    var i,ret = Array(n);\n    n--;\n    for(i=n;i>=0;i--) { ret[i] = (i*b+(n-i)*a)/n; }\n    return ret;\n}\n\nnumeric.getBlock = function getBlock(x,from,to) {\n    var s = numeric.dim(x);\n    function foo(x,k) {\n        var i,a = from[k], n = to[k]-a, ret = Array(n);\n        if(k === s.length-1) {\n            for(i=n;i>=0;i--) { ret[i] = x[i+a]; }\n            return ret;\n        }\n        for(i=n;i>=0;i--) { ret[i] = foo(x[i+a],k+1); }\n        return ret;\n    }\n    return foo(x,0);\n}\n\nnumeric.setBlock = function setBlock(x,from,to,B) {\n    var s = numeric.dim(x);\n    function foo(x,y,k) {\n        var i,a = from[k], n = to[k]-a;\n        if(k === s.length-1) { for(i=n;i>=0;i--) { x[i+a] = y[i]; } }\n        for(i=n;i>=0;i--) { foo(x[i+a],y[i],k+1); }\n    }\n    foo(x,B,0);\n    return x;\n}\n\nnumeric.getRange = function getRange(A,I,J) {\n    var m = I.length, n = J.length;\n    var i,j;\n    var B = Array(m), Bi, AI;\n    for(i=m-1;i!==-1;--i) {\n        B[i] = Array(n);\n        Bi = B[i];\n        AI = A[I[i]];\n        for(j=n-1;j!==-1;--j) Bi[j] = AI[J[j]];\n    }\n    return B;\n}\n\nnumeric.blockMatrix = function blockMatrix(X) {\n    var s = numeric.dim(X);\n    if(s.length<4) return numeric.blockMatrix([X]);\n    var m=s[0],n=s[1],M,N,i,j,Xij;\n    M = 0; N = 0;\n    for(i=0;i<m;++i) M+=X[i][0].length;\n    for(j=0;j<n;++j) N+=X[0][j][0].length;\n    var Z = Array(M);\n    for(i=0;i<M;++i) Z[i] = Array(N);\n    var I=0,J,ZI,k,l,Xijk;\n    for(i=0;i<m;++i) {\n        J=N;\n        for(j=n-1;j!==-1;--j) {\n            Xij = X[i][j];\n            J -= Xij[0].length;\n            for(k=Xij.length-1;k!==-1;--k) {\n                Xijk = Xij[k];\n                ZI = Z[I+k];\n                for(l = Xijk.length-1;l!==-1;--l) ZI[J+l] = Xijk[l];\n            }\n        }\n        I += X[i][0].length;\n    }\n    return Z;\n}\n\nnumeric.tensor = function tensor(x,y) {\n    if(typeof x === \"number\" || typeof y === \"number\") return numeric.mul(x,y);\n    var s1 = numeric.dim(x), s2 = numeric.dim(y);\n    if(s1.length !== 1 || s2.length !== 1) {\n        throw new Error('numeric: tensor product is only defined for vectors');\n    }\n    var m = s1[0], n = s2[0], A = Array(m), Ai, i,j,xi;\n    for(i=m-1;i>=0;i--) {\n        Ai = Array(n);\n        xi = x[i];\n        for(j=n-1;j>=3;--j) {\n            Ai[j] = xi * y[j];\n            --j;\n            Ai[j] = xi * y[j];\n            --j;\n            Ai[j] = xi * y[j];\n            --j;\n            Ai[j] = xi * y[j];\n        }\n        while(j>=0) { Ai[j] = xi * y[j]; --j; }\n        A[i] = Ai;\n    }\n    return A;\n}\n\n// 3. The Tensor type T\nnumeric.T = function T(x,y) { this.x = x; this.y = y; }\nnumeric.t = function t(x,y) { return new numeric.T(x,y); }\n\nnumeric.Tbinop = function Tbinop(rr,rc,cr,cc,setup) {\n    var io = numeric.indexOf;\n    if(typeof setup !== \"string\") {\n        var k;\n        setup = '';\n        for(k in numeric) {\n            if(numeric.hasOwnProperty(k) && (rr.indexOf(k)>=0 || rc.indexOf(k)>=0 || cr.indexOf(k)>=0 || cc.indexOf(k)>=0) && k.length>1) {\n                setup += 'var '+k+' = numeric.'+k+';\\n';\n            }\n        }\n    }\n    return Function(['y'],\n            'var x = this;\\n'+\n            'if(!(y instanceof numeric.T)) { y = new numeric.T(y); }\\n'+\n            setup+'\\n'+\n            'if(x.y) {'+\n            '  if(y.y) {'+\n            '    return new numeric.T('+cc+');\\n'+\n            '  }\\n'+\n            '  return new numeric.T('+cr+');\\n'+\n            '}\\n'+\n            'if(y.y) {\\n'+\n            '  return new numeric.T('+rc+');\\n'+\n            '}\\n'+\n            'return new numeric.T('+rr+');\\n'\n    );\n}\n\nnumeric.T.prototype.add = numeric.Tbinop(\n        'add(x.x,y.x)',\n        'add(x.x,y.x),y.y',\n        'add(x.x,y.x),x.y',\n        'add(x.x,y.x),add(x.y,y.y)');\nnumeric.T.prototype.sub = numeric.Tbinop(\n        'sub(x.x,y.x)',\n        'sub(x.x,y.x),neg(y.y)',\n        'sub(x.x,y.x),x.y',\n        'sub(x.x,y.x),sub(x.y,y.y)');\nnumeric.T.prototype.mul = numeric.Tbinop(\n        'mul(x.x,y.x)',\n        'mul(x.x,y.x),mul(x.x,y.y)',\n        'mul(x.x,y.x),mul(x.y,y.x)',\n        'sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))');\n\nnumeric.T.prototype.reciprocal = function reciprocal() {\n    var mul = numeric.mul, div = numeric.div;\n    if(this.y) {\n        var d = numeric.add(mul(this.x,this.x),mul(this.y,this.y));\n        return new numeric.T(div(this.x,d),div(numeric.neg(this.y),d));\n    }\n    return new T(div(1,this.x));\n}\nnumeric.T.prototype.div = function div(y) {\n    if(!(y instanceof numeric.T)) y = new numeric.T(y);\n    if(y.y) { return this.mul(y.reciprocal()); }\n    var div = numeric.div;\n    if(this.y) { return new numeric.T(div(this.x,y.x),div(this.y,y.x)); }\n    return new numeric.T(div(this.x,y.x));\n}\nnumeric.T.prototype.dot = numeric.Tbinop(\n        'dot(x.x,y.x)',\n        'dot(x.x,y.x),dot(x.x,y.y)',\n        'dot(x.x,y.x),dot(x.y,y.x)',\n        'sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))'\n        );\nnumeric.T.prototype.transpose = function transpose() {\n    var t = numeric.transpose, x = this.x, y = this.y;\n    if(y) { return new numeric.T(t(x),t(y)); }\n    return new numeric.T(t(x));\n}\nnumeric.T.prototype.transjugate = function transjugate() {\n    var t = numeric.transpose, x = this.x, y = this.y;\n    if(y) { return new numeric.T(t(x),numeric.negtranspose(y)); }\n    return new numeric.T(t(x));\n}\nnumeric.Tunop = function Tunop(r,c,s) {\n    if(typeof s !== \"string\") { s = ''; }\n    return Function(\n            'var x = this;\\n'+\n            s+'\\n'+\n            'if(x.y) {'+\n            '  '+c+';\\n'+\n            '}\\n'+\n            r+';\\n'\n    );\n}\n\nnumeric.T.prototype.exp = numeric.Tunop(\n        'return new numeric.T(ex)',\n        'return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))',\n        'var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;');\nnumeric.T.prototype.conj = numeric.Tunop(\n        'return new numeric.T(x.x);',\n        'return new numeric.T(x.x,numeric.neg(x.y));');\nnumeric.T.prototype.neg = numeric.Tunop(\n        'return new numeric.T(neg(x.x));',\n        'return new numeric.T(neg(x.x),neg(x.y));',\n        'var neg = numeric.neg;');\nnumeric.T.prototype.sin = numeric.Tunop(\n        'return new numeric.T(numeric.sin(x.x))',\n        'return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));');\nnumeric.T.prototype.cos = numeric.Tunop(\n        'return new numeric.T(numeric.cos(x.x))',\n        'return x.exp().add(x.neg().exp()).div(2);');\nnumeric.T.prototype.abs = numeric.Tunop(\n        'return new numeric.T(numeric.abs(x.x));',\n        'return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));',\n        'var mul = numeric.mul;');\nnumeric.T.prototype.log = numeric.Tunop(\n        'return new numeric.T(numeric.log(x.x));',\n        'var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\\n'+\n        'return new numeric.T(numeric.log(r.x),theta.x);');\nnumeric.T.prototype.norm2 = numeric.Tunop(\n        'return numeric.norm2(x.x);',\n        'var f = numeric.norm2Squared;\\n'+\n        'return Math.sqrt(f(x.x)+f(x.y));');\nnumeric.T.prototype.inv = function inv() {\n    var A = this;\n    if(typeof A.y === \"undefined\") { return new numeric.T(numeric.inv(A.x)); }\n    var n = A.x.length, i, j, k;\n    var Rx = numeric.identity(n),Ry = numeric.rep([n,n],0);\n    var Ax = numeric.clone(A.x), Ay = numeric.clone(A.y);\n    var Aix, Aiy, Ajx, Ajy, Rix, Riy, Rjx, Rjy;\n    var i,j,k,d,d1,ax,ay,bx,by,temp;\n    for(i=0;i<n;i++) {\n        ax = Ax[i][i]; ay = Ay[i][i];\n        d = ax*ax+ay*ay;\n        k = i;\n        for(j=i+1;j<n;j++) {\n            ax = Ax[j][i]; ay = Ay[j][i];\n            d1 = ax*ax+ay*ay;\n            if(d1 > d) { k=j; d = d1; }\n        }\n        if(k!==i) {\n            temp = Ax[i]; Ax[i] = Ax[k]; Ax[k] = temp;\n            temp = Ay[i]; Ay[i] = Ay[k]; Ay[k] = temp;\n            temp = Rx[i]; Rx[i] = Rx[k]; Rx[k] = temp;\n            temp = Ry[i]; Ry[i] = Ry[k]; Ry[k] = temp;\n        }\n        Aix = Ax[i]; Aiy = Ay[i];\n        Rix = Rx[i]; Riy = Ry[i];\n        ax = Aix[i]; ay = Aiy[i];\n        for(j=i+1;j<n;j++) {\n            bx = Aix[j]; by = Aiy[j];\n            Aix[j] = (bx*ax+by*ay)/d;\n            Aiy[j] = (by*ax-bx*ay)/d;\n        }\n        for(j=0;j<n;j++) {\n            bx = Rix[j]; by = Riy[j];\n            Rix[j] = (bx*ax+by*ay)/d;\n            Riy[j] = (by*ax-bx*ay)/d;\n        }\n        for(j=i+1;j<n;j++) {\n            Ajx = Ax[j]; Ajy = Ay[j];\n            Rjx = Rx[j]; Rjy = Ry[j];\n            ax = Ajx[i]; ay = Ajy[i];\n            for(k=i+1;k<n;k++) {\n                bx = Aix[k]; by = Aiy[k];\n                Ajx[k] -= bx*ax-by*ay;\n                Ajy[k] -= by*ax+bx*ay;\n            }\n            for(k=0;k<n;k++) {\n                bx = Rix[k]; by = Riy[k];\n                Rjx[k] -= bx*ax-by*ay;\n                Rjy[k] -= by*ax+bx*ay;\n            }\n        }\n    }\n    for(i=n-1;i>0;i--) {\n        Rix = Rx[i]; Riy = Ry[i];\n        for(j=i-1;j>=0;j--) {\n            Rjx = Rx[j]; Rjy = Ry[j];\n            ax = Ax[j][i]; ay = Ay[j][i];\n            for(k=n-1;k>=0;k--) {\n                bx = Rix[k]; by = Riy[k];\n                Rjx[k] -= ax*bx - ay*by;\n                Rjy[k] -= ax*by + ay*bx;\n            }\n        }\n    }\n    return new numeric.T(Rx,Ry);\n}\nnumeric.T.prototype.get = function get(i) {\n    var x = this.x, y = this.y, k = 0, ik, n = i.length;\n    if(y) {\n        while(k<n) {\n            ik = i[k];\n            x = x[ik];\n            y = y[ik];\n            k++;\n        }\n        return new numeric.T(x,y);\n    }\n    while(k<n) {\n        ik = i[k];\n        x = x[ik];\n        k++;\n    }\n    return new numeric.T(x);\n}\nnumeric.T.prototype.set = function set(i,v) {\n    var x = this.x, y = this.y, k = 0, ik, n = i.length, vx = v.x, vy = v.y;\n    if(n===0) {\n        if(vy) { this.y = vy; }\n        else if(y) { this.y = undefined; }\n        this.x = x;\n        return this;\n    }\n    if(vy) {\n        if(y) { /* ok */ }\n        else {\n            y = numeric.rep(numeric.dim(x),0);\n            this.y = y;\n        }\n        while(k<n-1) {\n            ik = i[k];\n            x = x[ik];\n            y = y[ik];\n            k++;\n        }\n        ik = i[k];\n        x[ik] = vx;\n        y[ik] = vy;\n        return this;\n    }\n    if(y) {\n        while(k<n-1) {\n            ik = i[k];\n            x = x[ik];\n            y = y[ik];\n            k++;\n        }\n        ik = i[k];\n        x[ik] = vx;\n        if(vx instanceof Array) y[ik] = numeric.rep(numeric.dim(vx),0);\n        else y[ik] = 0;\n        return this;\n    }\n    while(k<n-1) {\n        ik = i[k];\n        x = x[ik];\n        k++;\n    }\n    ik = i[k];\n    x[ik] = vx;\n    return this;\n}\nnumeric.T.prototype.getRows = function getRows(i0,i1) {\n    var n = i1-i0+1, j;\n    var rx = Array(n), ry, x = this.x, y = this.y;\n    for(j=i0;j<=i1;j++) { rx[j-i0] = x[j]; }\n    if(y) {\n        ry = Array(n);\n        for(j=i0;j<=i1;j++) { ry[j-i0] = y[j]; }\n        return new numeric.T(rx,ry);\n    }\n    return new numeric.T(rx);\n}\nnumeric.T.prototype.setRows = function setRows(i0,i1,A) {\n    var j;\n    var rx = this.x, ry = this.y, x = A.x, y = A.y;\n    for(j=i0;j<=i1;j++) { rx[j] = x[j-i0]; }\n    if(y) {\n        if(!ry) { ry = numeric.rep(numeric.dim(rx),0); this.y = ry; }\n        for(j=i0;j<=i1;j++) { ry[j] = y[j-i0]; }\n    } else if(ry) {\n        for(j=i0;j<=i1;j++) { ry[j] = numeric.rep([x[j-i0].length],0); }\n    }\n    return this;\n}\nnumeric.T.prototype.getRow = function getRow(k) {\n    var x = this.x, y = this.y;\n    if(y) { return new numeric.T(x[k],y[k]); }\n    return new numeric.T(x[k]);\n}\nnumeric.T.prototype.setRow = function setRow(i,v) {\n    var rx = this.x, ry = this.y, x = v.x, y = v.y;\n    rx[i] = x;\n    if(y) {\n        if(!ry) { ry = numeric.rep(numeric.dim(rx),0); this.y = ry; }\n        ry[i] = y;\n    } else if(ry) {\n        ry = numeric.rep([x.length],0);\n    }\n    return this;\n}\n\nnumeric.T.prototype.getBlock = function getBlock(from,to) {\n    var x = this.x, y = this.y, b = numeric.getBlock;\n    if(y) { return new numeric.T(b(x,from,to),b(y,from,to)); }\n    return new numeric.T(b(x,from,to));\n}\nnumeric.T.prototype.setBlock = function setBlock(from,to,A) {\n    if(!(A instanceof numeric.T)) A = new numeric.T(A);\n    var x = this.x, y = this.y, b = numeric.setBlock, Ax = A.x, Ay = A.y;\n    if(Ay) {\n        if(!y) { this.y = numeric.rep(numeric.dim(this),0); y = this.y; }\n        b(x,from,to,Ax);\n        b(y,from,to,Ay);\n        return this;\n    }\n    b(x,from,to,Ax);\n    if(y) b(y,from,to,numeric.rep(numeric.dim(Ax),0));\n}\nnumeric.T.rep = function rep(s,v) {\n    var T = numeric.T;\n    if(!(v instanceof T)) v = new T(v);\n    var x = v.x, y = v.y, r = numeric.rep;\n    if(y) return new T(r(s,x),r(s,y));\n    return new T(r(s,x));\n}\nnumeric.T.diag = function diag(d) {\n    if(!(d instanceof numeric.T)) d = new numeric.T(d);\n    var x = d.x, y = d.y, diag = numeric.diag;\n    if(y) return new numeric.T(diag(x),diag(y));\n    return new numeric.T(diag(x));\n}\nnumeric.T.eig = function eig() {\n    if(this.y) { throw new Error('eig: not implemented for complex matrices.'); }\n    return numeric.eig(this.x);\n}\nnumeric.T.identity = function identity(n) { return new numeric.T(numeric.identity(n)); }\nnumeric.T.prototype.getDiag = function getDiag() {\n    var n = numeric;\n    var x = this.x, y = this.y;\n    if(y) { return new n.T(n.getDiag(x),n.getDiag(y)); }\n    return new n.T(n.getDiag(x));\n}\n\n// 4. Eigenvalues of real matrices\n\nnumeric.house = function house(x) {\n    var v = numeric.clone(x);\n    var s = x[0] >= 0 ? 1 : -1;\n    var alpha = s*numeric.norm2(x);\n    v[0] += alpha;\n    var foo = numeric.norm2(v);\n    if(foo === 0) { /* this should not happen */ throw new Error('eig: internal error'); }\n    return numeric.div(v,foo);\n}\n\nnumeric.toUpperHessenberg = function toUpperHessenberg(me) {\n    var s = numeric.dim(me);\n    if(s.length !== 2 || s[0] !== s[1]) { throw new Error('numeric: toUpperHessenberg() only works on square matrices'); }\n    var m = s[0], i,j,k,x,v,A = numeric.clone(me),B,C,Ai,Ci,Q = numeric.identity(m),Qi;\n    for(j=0;j<m-2;j++) {\n        x = Array(m-j-1);\n        for(i=j+1;i<m;i++) { x[i-j-1] = A[i][j]; }\n        if(numeric.norm2(x)>0) {\n            v = numeric.house(x);\n            B = numeric.getBlock(A,[j+1,j],[m-1,m-1]);\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<m;i++) { Ai = A[i]; Ci = C[i-j-1]; for(k=j;k<m;k++) Ai[k] -= 2*Ci[k-j]; }\n            B = numeric.getBlock(A,[0,j+1],[m-1,m-1]);\n            C = numeric.tensor(numeric.dot(B,v),v);\n            for(i=0;i<m;i++) { Ai = A[i]; Ci = C[i]; for(k=j+1;k<m;k++) Ai[k] -= 2*Ci[k-j-1]; }\n            B = Array(m-j-1);\n            for(i=j+1;i<m;i++) B[i-j-1] = Q[i];\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<m;i++) { Qi = Q[i]; Ci = C[i-j-1]; for(k=0;k<m;k++) Qi[k] -= 2*Ci[k]; }\n        }\n    }\n    return {H:A, Q:Q};\n}\n\nnumeric.epsilon = 2.220446049250313e-16;\n\nnumeric.QRFrancis = function(H,maxiter) {\n    if(typeof maxiter === \"undefined\") { maxiter = 10000; }\n    H = numeric.clone(H);\n    var H0 = numeric.clone(H);\n    var s = numeric.dim(H),m=s[0],x,v,a,b,c,d,det,tr, Hloc, Q = numeric.identity(m), Qi, Hi, B, C, Ci,i,j,k,iter;\n    if(m<3) { return {Q:Q, B:[ [0,m-1] ]}; }\n    var epsilon = numeric.epsilon;\n    for(iter=0;iter<maxiter;iter++) {\n        for(j=0;j<m-1;j++) {\n            if(Math.abs(H[j+1][j]) < epsilon*(Math.abs(H[j][j])+Math.abs(H[j+1][j+1]))) {\n                var QH1 = numeric.QRFrancis(numeric.getBlock(H,[0,0],[j,j]),maxiter);\n                var QH2 = numeric.QRFrancis(numeric.getBlock(H,[j+1,j+1],[m-1,m-1]),maxiter);\n                B = Array(j+1);\n                for(i=0;i<=j;i++) { B[i] = Q[i]; }\n                C = numeric.dot(QH1.Q,B);\n                for(i=0;i<=j;i++) { Q[i] = C[i]; }\n                B = Array(m-j-1);\n                for(i=j+1;i<m;i++) { B[i-j-1] = Q[i]; }\n                C = numeric.dot(QH2.Q,B);\n                for(i=j+1;i<m;i++) { Q[i] = C[i-j-1]; }\n                return {Q:Q,B:QH1.B.concat(numeric.add(QH2.B,j+1))};\n            }\n        }\n        a = H[m-2][m-2]; b = H[m-2][m-1];\n        c = H[m-1][m-2]; d = H[m-1][m-1];\n        tr = a+d;\n        det = (a*d-b*c);\n        Hloc = numeric.getBlock(H, [0,0], [2,2]);\n        if(tr*tr>=4*det) {\n            var s1,s2;\n            s1 = 0.5*(tr+Math.sqrt(tr*tr-4*det));\n            s2 = 0.5*(tr-Math.sqrt(tr*tr-4*det));\n            Hloc = numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),\n                                           numeric.mul(Hloc,s1+s2)),\n                               numeric.diag(numeric.rep([3],s1*s2)));\n        } else {\n            Hloc = numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),\n                                           numeric.mul(Hloc,tr)),\n                               numeric.diag(numeric.rep([3],det)));\n        }\n        x = [Hloc[0][0],Hloc[1][0],Hloc[2][0]];\n        v = numeric.house(x);\n        B = [H[0],H[1],H[2]];\n        C = numeric.tensor(v,numeric.dot(v,B));\n        for(i=0;i<3;i++) { Hi = H[i]; Ci = C[i]; for(k=0;k<m;k++) Hi[k] -= 2*Ci[k]; }\n        B = numeric.getBlock(H, [0,0],[m-1,2]);\n        C = numeric.tensor(numeric.dot(B,v),v);\n        for(i=0;i<m;i++) { Hi = H[i]; Ci = C[i]; for(k=0;k<3;k++) Hi[k] -= 2*Ci[k]; }\n        B = [Q[0],Q[1],Q[2]];\n        C = numeric.tensor(v,numeric.dot(v,B));\n        for(i=0;i<3;i++) { Qi = Q[i]; Ci = C[i]; for(k=0;k<m;k++) Qi[k] -= 2*Ci[k]; }\n        var J;\n        for(j=0;j<m-2;j++) {\n            for(k=j;k<=j+1;k++) {\n                if(Math.abs(H[k+1][k]) < epsilon*(Math.abs(H[k][k])+Math.abs(H[k+1][k+1]))) {\n                    var QH1 = numeric.QRFrancis(numeric.getBlock(H,[0,0],[k,k]),maxiter);\n                    var QH2 = numeric.QRFrancis(numeric.getBlock(H,[k+1,k+1],[m-1,m-1]),maxiter);\n                    B = Array(k+1);\n                    for(i=0;i<=k;i++) { B[i] = Q[i]; }\n                    C = numeric.dot(QH1.Q,B);\n                    for(i=0;i<=k;i++) { Q[i] = C[i]; }\n                    B = Array(m-k-1);\n                    for(i=k+1;i<m;i++) { B[i-k-1] = Q[i]; }\n                    C = numeric.dot(QH2.Q,B);\n                    for(i=k+1;i<m;i++) { Q[i] = C[i-k-1]; }\n                    return {Q:Q,B:QH1.B.concat(numeric.add(QH2.B,k+1))};\n                }\n            }\n            J = Math.min(m-1,j+3);\n            x = Array(J-j);\n            for(i=j+1;i<=J;i++) { x[i-j-1] = H[i][j]; }\n            v = numeric.house(x);\n            B = numeric.getBlock(H, [j+1,j],[J,m-1]);\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<=J;i++) { Hi = H[i]; Ci = C[i-j-1]; for(k=j;k<m;k++) Hi[k] -= 2*Ci[k-j]; }\n            B = numeric.getBlock(H, [0,j+1],[m-1,J]);\n            C = numeric.tensor(numeric.dot(B,v),v);\n            for(i=0;i<m;i++) { Hi = H[i]; Ci = C[i]; for(k=j+1;k<=J;k++) Hi[k] -= 2*Ci[k-j-1]; }\n            B = Array(J-j);\n            for(i=j+1;i<=J;i++) B[i-j-1] = Q[i];\n            C = numeric.tensor(v,numeric.dot(v,B));\n            for(i=j+1;i<=J;i++) { Qi = Q[i]; Ci = C[i-j-1]; for(k=0;k<m;k++) Qi[k] -= 2*Ci[k]; }\n        }\n    }\n    throw new Error('numeric: eigenvalue iteration does not converge -- increase maxiter?');\n}\n\nnumeric.eig = function eig(A,maxiter) {\n    var QH = numeric.toUpperHessenberg(A);\n    var QB = numeric.QRFrancis(QH.H,maxiter);\n    var T = numeric.T;\n    var n = A.length,i,k,flag = false,B = QB.B,H = numeric.dot(QB.Q,numeric.dot(QH.H,numeric.transpose(QB.Q)));\n    var Q = new T(numeric.dot(QB.Q,QH.Q)),Q0;\n    var m = B.length,j;\n    var a,b,c,d,p1,p2,disc,x,y,p,q,n1,n2;\n    var sqrt = Math.sqrt;\n    for(k=0;k<m;k++) {\n        i = B[k][0];\n        if(i === B[k][1]) {\n            // nothing\n        } else {\n            j = i+1;\n            a = H[i][i];\n            b = H[i][j];\n            c = H[j][i];\n            d = H[j][j];\n            if(b === 0 && c === 0) continue;\n            p1 = -a-d;\n            p2 = a*d-b*c;\n            disc = p1*p1-4*p2;\n            if(disc>=0) {\n                if(p1<0) x = -0.5*(p1-sqrt(disc));\n                else     x = -0.5*(p1+sqrt(disc));\n                n1 = (a-x)*(a-x)+b*b;\n                n2 = c*c+(d-x)*(d-x);\n                if(n1>n2) {\n                    n1 = sqrt(n1);\n                    p = (a-x)/n1;\n                    q = b/n1;\n                } else {\n                    n2 = sqrt(n2);\n                    p = c/n2;\n                    q = (d-x)/n2;\n                }\n                Q0 = new T([[q,-p],[p,q]]);\n                Q.setRows(i,j,Q0.dot(Q.getRows(i,j)));\n            } else {\n                x = -0.5*p1;\n                y = 0.5*sqrt(-disc);\n                n1 = (a-x)*(a-x)+b*b;\n                n2 = c*c+(d-x)*(d-x);\n                if(n1>n2) {\n                    n1 = sqrt(n1+y*y);\n                    p = (a-x)/n1;\n                    q = b/n1;\n                    x = 0;\n                    y /= n1;\n                } else {\n                    n2 = sqrt(n2+y*y);\n                    p = c/n2;\n                    q = (d-x)/n2;\n                    x = y/n2;\n                    y = 0;\n                }\n                Q0 = new T([[q,-p],[p,q]],[[x,y],[y,-x]]);\n                Q.setRows(i,j,Q0.dot(Q.getRows(i,j)));\n            }\n        }\n    }\n    var R = Q.dot(A).dot(Q.transjugate()), n = A.length, E = numeric.T.identity(n);\n    for(j=0;j<n;j++) {\n        if(j>0) {\n            for(k=j-1;k>=0;k--) {\n                var Rk = R.get([k,k]), Rj = R.get([j,j]);\n                if(numeric.neq(Rk.x,Rj.x) || numeric.neq(Rk.y,Rj.y)) {\n                    x = R.getRow(k).getBlock([k],[j-1]);\n                    y = E.getRow(j).getBlock([k],[j-1]);\n                    E.set([j,k],(R.get([k,j]).neg().sub(x.dot(y))).div(Rk.sub(Rj)));\n                } else {\n                    E.setRow(j,E.getRow(k));\n                    continue;\n                }\n            }\n        }\n    }\n    for(j=0;j<n;j++) {\n        x = E.getRow(j);\n        E.setRow(j,x.div(x.norm2()));\n    }\n    E = E.transpose();\n    E = Q.transjugate().dot(E);\n    return { lambda:R.getDiag(), E:E };\n};\n\n// 5. Compressed Column Storage matrices\nnumeric.ccsSparse = function ccsSparse(A) {\n    var m = A.length,n,foo, i,j, counts = [];\n    for(i=m-1;i!==-1;--i) {\n        foo = A[i];\n        for(j in foo) {\n            j = parseInt(j);\n            while(j>=counts.length) counts[counts.length] = 0;\n            if(foo[j]!==0) counts[j]++;\n        }\n    }\n    var n = counts.length;\n    var Ai = Array(n+1);\n    Ai[0] = 0;\n    for(i=0;i<n;++i) Ai[i+1] = Ai[i] + counts[i];\n    var Aj = Array(Ai[n]), Av = Array(Ai[n]);\n    for(i=m-1;i!==-1;--i) {\n        foo = A[i];\n        for(j in foo) {\n            if(foo[j]!==0) {\n                counts[j]--;\n                Aj[Ai[j]+counts[j]] = i;\n                Av[Ai[j]+counts[j]] = foo[j];\n            }\n        }\n    }\n    return [Ai,Aj,Av];\n}\nnumeric.ccsFull = function ccsFull(A) {\n    var Ai = A[0], Aj = A[1], Av = A[2], s = numeric.ccsDim(A), m = s[0], n = s[1], i,j,j0,j1,k;\n    var B = numeric.rep([m,n],0);\n    for(i=0;i<n;i++) {\n        j0 = Ai[i];\n        j1 = Ai[i+1];\n        for(j=j0;j<j1;++j) { B[Aj[j]][i] = Av[j]; }\n    }\n    return B;\n}\nnumeric.ccsTSolve = function ccsTSolve(A,b,x,bj,xj) {\n    var Ai = A[0], Aj = A[1], Av = A[2],m = Ai.length-1, max = Math.max,n=0;\n    if(typeof bj === \"undefined\") x = numeric.rep([m],0);\n    if(typeof bj === \"undefined\") bj = numeric.linspace(0,x.length-1);\n    if(typeof xj === \"undefined\") xj = [];\n    function dfs(j) {\n        var k;\n        if(x[j] !== 0) return;\n        x[j] = 1;\n        for(k=Ai[j];k<Ai[j+1];++k) dfs(Aj[k]);\n        xj[n] = j;\n        ++n;\n    }\n    var i,j,j0,j1,k,l,l0,l1,a;\n    for(i=bj.length-1;i!==-1;--i) { dfs(bj[i]); }\n    xj.length = n;\n    for(i=xj.length-1;i!==-1;--i) { x[xj[i]] = 0; }\n    for(i=bj.length-1;i!==-1;--i) { j = bj[i]; x[j] = b[j]; }\n    for(i=xj.length-1;i!==-1;--i) {\n        j = xj[i];\n        j0 = Ai[j];\n        j1 = max(Ai[j+1],j0);\n        for(k=j0;k!==j1;++k) { if(Aj[k] === j) { x[j] /= Av[k]; break; } }\n        a = x[j];\n        for(k=j0;k!==j1;++k) {\n            l = Aj[k];\n            if(l !== j) x[l] -= a*Av[k];\n        }\n    }\n    return x;\n}\nnumeric.ccsDFS = function ccsDFS(n) {\n    this.k = Array(n);\n    this.k1 = Array(n);\n    this.j = Array(n);\n}\nnumeric.ccsDFS.prototype.dfs = function dfs(J,Ai,Aj,x,xj,Pinv) {\n    var m = 0,foo,n=xj.length;\n    var k = this.k, k1 = this.k1, j = this.j,km,k11;\n    if(x[J]!==0) return;\n    x[J] = 1;\n    j[0] = J;\n    k[0] = km = Ai[J];\n    k1[0] = k11 = Ai[J+1];\n    while(1) {\n        if(km >= k11) {\n            xj[n] = j[m];\n            if(m===0) return;\n            ++n;\n            --m;\n            km = k[m];\n            k11 = k1[m];\n        } else {\n            foo = Pinv[Aj[km]];\n            if(x[foo] === 0) {\n                x[foo] = 1;\n                k[m] = km;\n                ++m;\n                j[m] = foo;\n                km = Ai[foo];\n                k1[m] = k11 = Ai[foo+1];\n            } else ++km;\n        }\n    }\n}\nnumeric.ccsLPSolve = function ccsLPSolve(A,B,x,xj,I,Pinv,dfs) {\n    var Ai = A[0], Aj = A[1], Av = A[2],m = Ai.length-1, n=0;\n    var Bi = B[0], Bj = B[1], Bv = B[2];\n    \n    var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;\n    i0 = Bi[I];\n    i1 = Bi[I+1];\n    xj.length = 0;\n    for(i=i0;i<i1;++i) { dfs.dfs(Pinv[Bj[i]],Ai,Aj,x,xj,Pinv); }\n    for(i=xj.length-1;i!==-1;--i) { x[xj[i]] = 0; }\n    for(i=i0;i!==i1;++i) { j = Pinv[Bj[i]]; x[j] = Bv[i]; }\n    for(i=xj.length-1;i!==-1;--i) {\n        j = xj[i];\n        j0 = Ai[j];\n        j1 = Ai[j+1];\n        for(k=j0;k<j1;++k) { if(Pinv[Aj[k]] === j) { x[j] /= Av[k]; break; } }\n        a = x[j];\n        for(k=j0;k<j1;++k) {\n            l = Pinv[Aj[k]];\n            if(l !== j) x[l] -= a*Av[k];\n        }\n    }\n    return x;\n}\nnumeric.ccsLUP1 = function ccsLUP1(A,threshold) {\n    var m = A[0].length-1;\n    var L = [numeric.rep([m+1],0),[],[]], U = [numeric.rep([m+1], 0),[],[]];\n    var Li = L[0], Lj = L[1], Lv = L[2], Ui = U[0], Uj = U[1], Uv = U[2];\n    var x = numeric.rep([m],0), xj = numeric.rep([m],0);\n    var i,j,k,j0,j1,a,e,c,d,K;\n    var sol = numeric.ccsLPSolve, max = Math.max, abs = Math.abs;\n    var P = numeric.linspace(0,m-1),Pinv = numeric.linspace(0,m-1);\n    var dfs = new numeric.ccsDFS(m);\n    if(typeof threshold === \"undefined\") { threshold = 1; }\n    for(i=0;i<m;++i) {\n        sol(L,A,x,xj,i,Pinv,dfs);\n        a = -1;\n        e = -1;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            if(k <= i) continue;\n            c = abs(x[k]);\n            if(c > a) { e = k; a = c; }\n        }\n        if(abs(x[i])<threshold*a) {\n            j = P[i];\n            a = P[e];\n            P[i] = a; Pinv[a] = i;\n            P[e] = j; Pinv[j] = e;\n            a = x[i]; x[i] = x[e]; x[e] = a;\n        }\n        a = Li[i];\n        e = Ui[i];\n        d = x[i];\n        Lj[a] = P[i];\n        Lv[a] = 1;\n        ++a;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            c = x[k];\n            xj[j] = 0;\n            x[k] = 0;\n            if(k<=i) { Uj[e] = k; Uv[e] = c;   ++e; }\n            else     { Lj[a] = P[k]; Lv[a] = c/d; ++a; }\n        }\n        Li[i+1] = a;\n        Ui[i+1] = e;\n    }\n    for(j=Lj.length-1;j!==-1;--j) { Lj[j] = Pinv[Lj[j]]; }\n    return {L:L, U:U, P:P, Pinv:Pinv};\n}\nnumeric.ccsDFS0 = function ccsDFS0(n) {\n    this.k = Array(n);\n    this.k1 = Array(n);\n    this.j = Array(n);\n}\nnumeric.ccsDFS0.prototype.dfs = function dfs(J,Ai,Aj,x,xj,Pinv,P) {\n    var m = 0,foo,n=xj.length;\n    var k = this.k, k1 = this.k1, j = this.j,km,k11;\n    if(x[J]!==0) return;\n    x[J] = 1;\n    j[0] = J;\n    k[0] = km = Ai[Pinv[J]];\n    k1[0] = k11 = Ai[Pinv[J]+1];\n    while(1) {\n        if(isNaN(km)) throw new Error(\"Ow!\");\n        if(km >= k11) {\n            xj[n] = Pinv[j[m]];\n            if(m===0) return;\n            ++n;\n            --m;\n            km = k[m];\n            k11 = k1[m];\n        } else {\n            foo = Aj[km];\n            if(x[foo] === 0) {\n                x[foo] = 1;\n                k[m] = km;\n                ++m;\n                j[m] = foo;\n                foo = Pinv[foo];\n                km = Ai[foo];\n                k1[m] = k11 = Ai[foo+1];\n            } else ++km;\n        }\n    }\n}\nnumeric.ccsLPSolve0 = function ccsLPSolve0(A,B,y,xj,I,Pinv,P,dfs) {\n    var Ai = A[0], Aj = A[1], Av = A[2],m = Ai.length-1, n=0;\n    var Bi = B[0], Bj = B[1], Bv = B[2];\n    \n    var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;\n    i0 = Bi[I];\n    i1 = Bi[I+1];\n    xj.length = 0;\n    for(i=i0;i<i1;++i) { dfs.dfs(Bj[i],Ai,Aj,y,xj,Pinv,P); }\n    for(i=xj.length-1;i!==-1;--i) { j = xj[i]; y[P[j]] = 0; }\n    for(i=i0;i!==i1;++i) { j = Bj[i]; y[j] = Bv[i]; }\n    for(i=xj.length-1;i!==-1;--i) {\n        j = xj[i];\n        l = P[j];\n        j0 = Ai[j];\n        j1 = Ai[j+1];\n        for(k=j0;k<j1;++k) { if(Aj[k] === l) { y[l] /= Av[k]; break; } }\n        a = y[l];\n        for(k=j0;k<j1;++k) y[Aj[k]] -= a*Av[k];\n        y[l] = a;\n    }\n}\nnumeric.ccsLUP0 = function ccsLUP0(A,threshold) {\n    var m = A[0].length-1;\n    var L = [numeric.rep([m+1],0),[],[]], U = [numeric.rep([m+1], 0),[],[]];\n    var Li = L[0], Lj = L[1], Lv = L[2], Ui = U[0], Uj = U[1], Uv = U[2];\n    var y = numeric.rep([m],0), xj = numeric.rep([m],0);\n    var i,j,k,j0,j1,a,e,c,d,K;\n    var sol = numeric.ccsLPSolve0, max = Math.max, abs = Math.abs;\n    var P = numeric.linspace(0,m-1),Pinv = numeric.linspace(0,m-1);\n    var dfs = new numeric.ccsDFS0(m);\n    if(typeof threshold === \"undefined\") { threshold = 1; }\n    for(i=0;i<m;++i) {\n        sol(L,A,y,xj,i,Pinv,P,dfs);\n        a = -1;\n        e = -1;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            if(k <= i) continue;\n            c = abs(y[P[k]]);\n            if(c > a) { e = k; a = c; }\n        }\n        if(abs(y[P[i]])<threshold*a) {\n            j = P[i];\n            a = P[e];\n            P[i] = a; Pinv[a] = i;\n            P[e] = j; Pinv[j] = e;\n        }\n        a = Li[i];\n        e = Ui[i];\n        d = y[P[i]];\n        Lj[a] = P[i];\n        Lv[a] = 1;\n        ++a;\n        for(j=xj.length-1;j!==-1;--j) {\n            k = xj[j];\n            c = y[P[k]];\n            xj[j] = 0;\n            y[P[k]] = 0;\n            if(k<=i) { Uj[e] = k; Uv[e] = c;   ++e; }\n            else     { Lj[a] = P[k]; Lv[a] = c/d; ++a; }\n        }\n        Li[i+1] = a;\n        Ui[i+1] = e;\n    }\n    for(j=Lj.length-1;j!==-1;--j) { Lj[j] = Pinv[Lj[j]]; }\n    return {L:L, U:U, P:P, Pinv:Pinv};\n}\nnumeric.ccsLUP = numeric.ccsLUP0;\n\nnumeric.ccsDim = function ccsDim(A) { return [numeric.sup(A[1])+1,A[0].length-1]; }\nnumeric.ccsGetBlock = function ccsGetBlock(A,i,j) {\n    var s = numeric.ccsDim(A),m=s[0],n=s[1];\n    if(typeof i === \"undefined\") { i = numeric.linspace(0,m-1); }\n    else if(typeof i === \"number\") { i = [i]; }\n    if(typeof j === \"undefined\") { j = numeric.linspace(0,n-1); }\n    else if(typeof j === \"number\") { j = [j]; }\n    var p,p0,p1,P = i.length,q,Q = j.length,r,jq,ip;\n    var Bi = numeric.rep([n],0), Bj=[], Bv=[], B = [Bi,Bj,Bv];\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var x = numeric.rep([m],0),count=0,flags = numeric.rep([m],0);\n    for(q=0;q<Q;++q) {\n        jq = j[q];\n        var q0 = Ai[jq];\n        var q1 = Ai[jq+1];\n        for(p=q0;p<q1;++p) {\n            r = Aj[p];\n            flags[r] = 1;\n            x[r] = Av[p];\n        }\n        for(p=0;p<P;++p) {\n            ip = i[p];\n            if(flags[ip]) {\n                Bj[count] = p;\n                Bv[count] = x[i[p]];\n                ++count;\n            }\n        }\n        for(p=q0;p<q1;++p) {\n            r = Aj[p];\n            flags[r] = 0;\n        }\n        Bi[q+1] = count;\n    }\n    return B;\n}\n\nnumeric.ccsDot = function ccsDot(A,B) {\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var Bi = B[0], Bj = B[1], Bv = B[2];\n    var sA = numeric.ccsDim(A), sB = numeric.ccsDim(B);\n    var m = sA[0], n = sA[1], o = sB[1];\n    var x = numeric.rep([m],0), flags = numeric.rep([m],0), xj = Array(m);\n    var Ci = numeric.rep([o],0), Cj = [], Cv = [], C = [Ci,Cj,Cv];\n    var i,j,k,j0,j1,i0,i1,l,p,a,b;\n    for(k=0;k!==o;++k) {\n        j0 = Bi[k];\n        j1 = Bi[k+1];\n        p = 0;\n        for(j=j0;j<j1;++j) {\n            a = Bj[j];\n            b = Bv[j];\n            i0 = Ai[a];\n            i1 = Ai[a+1];\n            for(i=i0;i<i1;++i) {\n                l = Aj[i];\n                if(flags[l]===0) {\n                    xj[p] = l;\n                    flags[l] = 1;\n                    p = p+1;\n                }\n                x[l] = x[l] + Av[i]*b;\n            }\n        }\n        j0 = Ci[k];\n        j1 = j0+p;\n        Ci[k+1] = j1;\n        for(j=p-1;j!==-1;--j) {\n            b = j0+j;\n            i = xj[j];\n            Cj[b] = i;\n            Cv[b] = x[i];\n            flags[i] = 0;\n            x[i] = 0;\n        }\n        Ci[k+1] = Ci[k]+p;\n    }\n    return C;\n}\n\nnumeric.ccsLUPSolve = function ccsLUPSolve(LUP,B) {\n    var L = LUP.L, U = LUP.U, P = LUP.P;\n    var Bi = B[0];\n    var flag = false;\n    if(typeof Bi !== \"object\") { B = [[0,B.length],numeric.linspace(0,B.length-1),B]; Bi = B[0]; flag = true; }\n    var Bj = B[1], Bv = B[2];\n    var n = L[0].length-1, m = Bi.length-1;\n    var x = numeric.rep([n],0), xj = Array(n);\n    var b = numeric.rep([n],0), bj = Array(n);\n    var Xi = numeric.rep([m+1],0), Xj = [], Xv = [];\n    var sol = numeric.ccsTSolve;\n    var i,j,j0,j1,k,J,N=0;\n    for(i=0;i<m;++i) {\n        k = 0;\n        j0 = Bi[i];\n        j1 = Bi[i+1];\n        for(j=j0;j<j1;++j) { \n            J = LUP.Pinv[Bj[j]];\n            bj[k] = J;\n            b[J] = Bv[j];\n            ++k;\n        }\n        bj.length = k;\n        sol(L,b,x,bj,xj);\n        for(j=bj.length-1;j!==-1;--j) b[bj[j]] = 0;\n        sol(U,x,b,xj,bj);\n        if(flag) return b;\n        for(j=xj.length-1;j!==-1;--j) x[xj[j]] = 0;\n        for(j=bj.length-1;j!==-1;--j) {\n            J = bj[j];\n            Xj[N] = J;\n            Xv[N] = b[J];\n            b[J] = 0;\n            ++N;\n        }\n        Xi[i+1] = N;\n    }\n    return [Xi,Xj,Xv];\n}\n\nnumeric.ccsbinop = function ccsbinop(body,setup) {\n    if(typeof setup === \"undefined\") setup='';\n    return Function('X','Y',\n            'var Xi = X[0], Xj = X[1], Xv = X[2];\\n'+\n            'var Yi = Y[0], Yj = Y[1], Yv = Y[2];\\n'+\n            'var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\\n'+\n            'var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\\n'+\n            'var x = numeric.rep([m],0),y = numeric.rep([m],0);\\n'+\n            'var xk,yk,zk;\\n'+\n            'var i,j,j0,j1,k,p=0;\\n'+\n            setup+\n            'for(i=0;i<n;++i) {\\n'+\n            '  j0 = Xi[i]; j1 = Xi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) {\\n'+\n            '    k = Xj[j];\\n'+\n            '    x[k] = 1;\\n'+\n            '    Zj[p] = k;\\n'+\n            '    ++p;\\n'+\n            '  }\\n'+\n            '  j0 = Yi[i]; j1 = Yi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) {\\n'+\n            '    k = Yj[j];\\n'+\n            '    y[k] = Yv[j];\\n'+\n            '    if(x[k] === 0) {\\n'+\n            '      Zj[p] = k;\\n'+\n            '      ++p;\\n'+\n            '    }\\n'+\n            '  }\\n'+\n            '  Zi[i+1] = p;\\n'+\n            '  j0 = Xi[i]; j1 = Xi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\\n'+\n            '  j0 = Zi[i]; j1 = Zi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) {\\n'+\n            '    k = Zj[j];\\n'+\n            '    xk = x[k];\\n'+\n            '    yk = y[k];\\n'+\n            body+'\\n'+\n            '    Zv[j] = zk;\\n'+\n            '  }\\n'+\n            '  j0 = Xi[i]; j1 = Xi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\\n'+\n            '  j0 = Yi[i]; j1 = Yi[i+1];\\n'+\n            '  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\\n'+\n            '}\\n'+\n            'return [Zi,Zj,Zv];'\n            );\n};\n\n(function() {\n    var k,A,B,C;\n    for(k in numeric.ops2) {\n        if(isFinite(eval('1'+numeric.ops2[k]+'0'))) A = '[Y[0],Y[1],numeric.'+k+'(X,Y[2])]';\n        else A = 'NaN';\n        if(isFinite(eval('0'+numeric.ops2[k]+'1'))) B = '[X[0],X[1],numeric.'+k+'(X[2],Y)]';\n        else B = 'NaN';\n        if(isFinite(eval('1'+numeric.ops2[k]+'0')) && isFinite(eval('0'+numeric.ops2[k]+'1'))) C = 'numeric.ccs'+k+'MM(X,Y)';\n        else C = 'NaN';\n        numeric['ccs'+k+'MM'] = numeric.ccsbinop('zk = xk '+numeric.ops2[k]+'yk;');\n        numeric['ccs'+k] = Function('X','Y',\n                'if(typeof X === \"number\") return '+A+';\\n'+\n                'if(typeof Y === \"number\") return '+B+';\\n'+\n                'return '+C+';\\n'\n                );\n    }\n}());\n\nnumeric.ccsScatter = function ccsScatter(A) {\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var n = numeric.sup(Aj)+1,m=Ai.length;\n    var Ri = numeric.rep([n],0),Rj=Array(m), Rv = Array(m);\n    var counts = numeric.rep([n],0),i;\n    for(i=0;i<m;++i) counts[Aj[i]]++;\n    for(i=0;i<n;++i) Ri[i+1] = Ri[i] + counts[i];\n    var ptr = Ri.slice(0),k,Aii;\n    for(i=0;i<m;++i) {\n        Aii = Aj[i];\n        k = ptr[Aii];\n        Rj[k] = Ai[i];\n        Rv[k] = Av[i];\n        ptr[Aii]=ptr[Aii]+1;\n    }\n    return [Ri,Rj,Rv];\n}\n\nnumeric.ccsGather = function ccsGather(A) {\n    var Ai = A[0], Aj = A[1], Av = A[2];\n    var n = Ai.length-1,m = Aj.length;\n    var Ri = Array(m), Rj = Array(m), Rv = Array(m);\n    var i,j,j0,j1,p;\n    p=0;\n    for(i=0;i<n;++i) {\n        j0 = Ai[i];\n        j1 = Ai[i+1];\n        for(j=j0;j!==j1;++j) {\n            Rj[p] = i;\n            Ri[p] = Aj[j];\n            Rv[p] = Av[j];\n            ++p;\n        }\n    }\n    return [Ri,Rj,Rv];\n}\n\n// The following sparse linear algebra routines are deprecated.\n\nnumeric.sdim = function dim(A,ret,k) {\n    if(typeof ret === \"undefined\") { ret = []; }\n    if(typeof A !== \"object\") return ret;\n    if(typeof k === \"undefined\") { k=0; }\n    if(!(k in ret)) { ret[k] = 0; }\n    if(A.length > ret[k]) ret[k] = A.length;\n    var i;\n    for(i in A) {\n        if(A.hasOwnProperty(i)) dim(A[i],ret,k+1);\n    }\n    return ret;\n};\n\nnumeric.sclone = function clone(A,k,n) {\n    if(typeof k === \"undefined\") { k=0; }\n    if(typeof n === \"undefined\") { n = numeric.sdim(A).length; }\n    var i,ret = Array(A.length);\n    if(k === n-1) {\n        for(i in A) { if(A.hasOwnProperty(i)) ret[i] = A[i]; }\n        return ret;\n    }\n    for(i in A) {\n        if(A.hasOwnProperty(i)) ret[i] = clone(A[i],k+1,n);\n    }\n    return ret;\n}\n\nnumeric.sdiag = function diag(d) {\n    var n = d.length,i,ret = Array(n),i1,i2,i3;\n    for(i=n-1;i>=1;i-=2) {\n        i1 = i-1;\n        ret[i] = []; ret[i][i] = d[i];\n        ret[i1] = []; ret[i1][i1] = d[i1];\n    }\n    if(i===0) { ret[0] = []; ret[0][0] = d[i]; }\n    return ret;\n}\n\nnumeric.sidentity = function identity(n) { return numeric.sdiag(numeric.rep([n],1)); }\n\nnumeric.stranspose = function transpose(A) {\n    var ret = [], n = A.length, i,j,Ai;\n    for(i in A) {\n        if(!(A.hasOwnProperty(i))) continue;\n        Ai = A[i];\n        for(j in Ai) {\n            if(!(Ai.hasOwnProperty(j))) continue;\n            if(typeof ret[j] !== \"object\") { ret[j] = []; }\n            ret[j][i] = Ai[j];\n        }\n    }\n    return ret;\n}\n\nnumeric.sLUP = function LUP(A,tol) {\n    throw new Error(\"The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.\");\n};\n\nnumeric.sdotMM = function dotMM(A,B) {\n    var p = A.length, q = B.length, BT = numeric.stranspose(B), r = BT.length, Ai, BTk;\n    var i,j,k,accum;\n    var ret = Array(p),reti;\n    for(i=p-1;i>=0;i--) {\n        reti = [];\n        Ai = A[i];\n        for(k=r-1;k>=0;k--) {\n            accum = 0;\n            BTk = BT[k];\n            for(j in Ai) {\n                if(!(Ai.hasOwnProperty(j))) continue;\n                if(j in BTk) { accum += Ai[j]*BTk[j]; }\n            }\n            if(accum) reti[k] = accum;\n        }\n        ret[i] = reti;\n    }\n    return ret;\n}\n\nnumeric.sdotMV = function dotMV(A,x) {\n    var p = A.length, Ai, i,j;\n    var ret = Array(p), accum;\n    for(i=p-1;i>=0;i--) {\n        Ai = A[i];\n        accum = 0;\n        for(j in Ai) {\n            if(!(Ai.hasOwnProperty(j))) continue;\n            if(x[j]) accum += Ai[j]*x[j];\n        }\n        if(accum) ret[i] = accum;\n    }\n    return ret;\n}\n\nnumeric.sdotVM = function dotMV(x,A) {\n    var i,j,Ai,alpha;\n    var ret = [], accum;\n    for(i in x) {\n        if(!x.hasOwnProperty(i)) continue;\n        Ai = A[i];\n        alpha = x[i];\n        for(j in Ai) {\n            if(!Ai.hasOwnProperty(j)) continue;\n            if(!ret[j]) { ret[j] = 0; }\n            ret[j] += alpha*Ai[j];\n        }\n    }\n    return ret;\n}\n\nnumeric.sdotVV = function dotVV(x,y) {\n    var i,ret=0;\n    for(i in x) { if(x[i] && y[i]) ret+= x[i]*y[i]; }\n    return ret;\n}\n\nnumeric.sdot = function dot(A,B) {\n    var m = numeric.sdim(A).length, n = numeric.sdim(B).length;\n    var k = m*1000+n;\n    switch(k) {\n    case 0: return A*B;\n    case 1001: return numeric.sdotVV(A,B);\n    case 2001: return numeric.sdotMV(A,B);\n    case 1002: return numeric.sdotVM(A,B);\n    case 2002: return numeric.sdotMM(A,B);\n    default: throw new Error('numeric.sdot not implemented for tensors of order '+m+' and '+n);\n    }\n}\n\nnumeric.sscatter = function scatter(V) {\n    var n = V[0].length, Vij, i, j, m = V.length, A = [], Aj;\n    for(i=n-1;i>=0;--i) {\n        if(!V[m-1][i]) continue;\n        Aj = A;\n        for(j=0;j<m-2;j++) {\n            Vij = V[j][i];\n            if(!Aj[Vij]) Aj[Vij] = [];\n            Aj = Aj[Vij];\n        }\n        Aj[V[j][i]] = V[j+1][i];\n    }\n    return A;\n}\n\nnumeric.sgather = function gather(A,ret,k) {\n    if(typeof ret === \"undefined\") ret = [];\n    if(typeof k === \"undefined\") k = [];\n    var n,i,Ai;\n    n = k.length;\n    for(i in A) {\n        if(A.hasOwnProperty(i)) {\n            k[n] = parseInt(i);\n            Ai = A[i];\n            if(typeof Ai === \"number\") {\n                if(Ai) {\n                    if(ret.length === 0) {\n                        for(i=n+1;i>=0;--i) ret[i] = [];\n                    }\n                    for(i=n;i>=0;--i) ret[i].push(k[i]);\n                    ret[n+1].push(Ai);\n                }\n            } else gather(Ai,ret,k);\n        }\n    }\n    if(k.length>n) k.pop();\n    return ret;\n}\n\n// 6. Coordinate matrices\nnumeric.cLU = function LU(A) {\n    var I = A[0], J = A[1], V = A[2];\n    var p = I.length, m=0, i,j,k,a,b,c;\n    for(i=0;i<p;i++) if(I[i]>m) m=I[i];\n    m++;\n    var L = Array(m), U = Array(m), left = numeric.rep([m],Infinity), right = numeric.rep([m],-Infinity);\n    var Ui, Uj,alpha;\n    for(k=0;k<p;k++) {\n        i = I[k];\n        j = J[k];\n        if(j<left[i]) left[i] = j;\n        if(j>right[i]) right[i] = j;\n    }\n    for(i=0;i<m-1;i++) { if(right[i] > right[i+1]) right[i+1] = right[i]; }\n    for(i=m-1;i>=1;i--) { if(left[i]<left[i-1]) left[i-1] = left[i]; }\n    var countL = 0, countU = 0;\n    for(i=0;i<m;i++) {\n        U[i] = numeric.rep([right[i]-left[i]+1],0);\n        L[i] = numeric.rep([i-left[i]],0);\n        countL += i-left[i]+1;\n        countU += right[i]-i+1;\n    }\n    for(k=0;k<p;k++) { i = I[k]; U[i][J[k]-left[i]] = V[k]; }\n    for(i=0;i<m-1;i++) {\n        a = i-left[i];\n        Ui = U[i];\n        for(j=i+1;left[j]<=i && j<m;j++) {\n            b = i-left[j];\n            c = right[i]-i;\n            Uj = U[j];\n            alpha = Uj[b]/Ui[a];\n            if(alpha) {\n                for(k=1;k<=c;k++) { Uj[k+b] -= alpha*Ui[k+a]; }\n                L[j][i-left[j]] = alpha;\n            }\n        }\n    }\n    var Ui = [], Uj = [], Uv = [], Li = [], Lj = [], Lv = [];\n    var p,q,foo;\n    p=0; q=0;\n    for(i=0;i<m;i++) {\n        a = left[i];\n        b = right[i];\n        foo = U[i];\n        for(j=i;j<=b;j++) {\n            if(foo[j-a]) {\n                Ui[p] = i;\n                Uj[p] = j;\n                Uv[p] = foo[j-a];\n                p++;\n            }\n        }\n        foo = L[i];\n        for(j=a;j<i;j++) {\n            if(foo[j-a]) {\n                Li[q] = i;\n                Lj[q] = j;\n                Lv[q] = foo[j-a];\n                q++;\n            }\n        }\n        Li[q] = i;\n        Lj[q] = i;\n        Lv[q] = 1;\n        q++;\n    }\n    return {U:[Ui,Uj,Uv], L:[Li,Lj,Lv]};\n};\n\nnumeric.cLUsolve = function LUsolve(lu,b) {\n    var L = lu.L, U = lu.U, ret = numeric.clone(b);\n    var Li = L[0], Lj = L[1], Lv = L[2];\n    var Ui = U[0], Uj = U[1], Uv = U[2];\n    var p = Ui.length, q = Li.length;\n    var m = ret.length,i,j,k;\n    k = 0;\n    for(i=0;i<m;i++) {\n        while(Lj[k] < i) {\n            ret[i] -= Lv[k]*ret[Lj[k]];\n            k++;\n        }\n        k++;\n    }\n    k = p-1;\n    for(i=m-1;i>=0;i--) {\n        while(Uj[k] > i) {\n            ret[i] -= Uv[k]*ret[Uj[k]];\n            k--;\n        }\n        ret[i] /= Uv[k];\n        k--;\n    }\n    return ret;\n};\n\nnumeric.cgrid = function grid(n,shape) {\n    if(typeof n === \"number\") n = [n,n];\n    var ret = numeric.rep(n,-1);\n    var i,j,count;\n    if(typeof shape !== \"function\") {\n        switch(shape) {\n        case 'L':\n            shape = function(i,j) { return (i>=n[0]/2 || j<n[1]/2); }\n            break;\n        default:\n            shape = function(i,j) { return true; };\n            break;\n        }\n    }\n    count=0;\n    for(i=1;i<n[0]-1;i++) for(j=1;j<n[1]-1;j++) \n        if(shape(i,j)) {\n            ret[i][j] = count;\n            count++;\n        }\n    return ret;\n}\n\nnumeric.cdelsq = function delsq(g) {\n    var dir = [[-1,0],[0,-1],[0,1],[1,0]];\n    var s = numeric.dim(g), m = s[0], n = s[1], i,j,k,p,q;\n    var Li = [], Lj = [], Lv = [];\n    for(i=1;i<m-1;i++) for(j=1;j<n-1;j++) {\n        if(g[i][j]<0) continue;\n        for(k=0;k<4;k++) {\n            p = i+dir[k][0];\n            q = j+dir[k][1];\n            if(g[p][q]<0) continue;\n            Li.push(g[i][j]);\n            Lj.push(g[p][q]);\n            Lv.push(-1);\n        }\n        Li.push(g[i][j]);\n        Lj.push(g[i][j]);\n        Lv.push(4);\n    }\n    return [Li,Lj,Lv];\n}\n\nnumeric.cdotMV = function dotMV(A,x) {\n    var ret, Ai = A[0], Aj = A[1], Av = A[2],k,p=Ai.length,N;\n    N=0;\n    for(k=0;k<p;k++) { if(Ai[k]>N) N = Ai[k]; }\n    N++;\n    ret = numeric.rep([N],0);\n    for(k=0;k<p;k++) { ret[Ai[k]]+=Av[k]*x[Aj[k]]; }\n    return ret;\n}\n\n// 7. Splines\n\nnumeric.Spline = function Spline(x,yl,yr,kl,kr) { this.x = x; this.yl = yl; this.yr = yr; this.kl = kl; this.kr = kr; }\nnumeric.Spline.prototype._at = function _at(x1,p) {\n    var x = this.x;\n    var yl = this.yl;\n    var yr = this.yr;\n    var kl = this.kl;\n    var kr = this.kr;\n    var x1,a,b,t;\n    var add = numeric.add, sub = numeric.sub, mul = numeric.mul;\n    a = sub(mul(kl[p],x[p+1]-x[p]),sub(yr[p+1],yl[p]));\n    b = add(mul(kr[p+1],x[p]-x[p+1]),sub(yr[p+1],yl[p]));\n    t = (x1-x[p])/(x[p+1]-x[p]);\n    var s = t*(1-t);\n    return add(add(add(mul(1-t,yl[p]),mul(t,yr[p+1])),mul(a,s*(1-t))),mul(b,s*t));\n}\nnumeric.Spline.prototype.at = function at(x0) {\n    if(typeof x0 === \"number\") {\n        var x = this.x;\n        var n = x.length;\n        var p,q,mid,floor = Math.floor,a,b,t;\n        p = 0;\n        q = n-1;\n        while(q-p>1) {\n            mid = floor((p+q)/2);\n            if(x[mid] <= x0) p = mid;\n            else q = mid;\n        }\n        return this._at(x0,p);\n    }\n    var n = x0.length, i, ret = Array(n);\n    for(i=n-1;i!==-1;--i) ret[i] = this.at(x0[i]);\n    return ret;\n}\nnumeric.Spline.prototype.diff = function diff() {\n    var x = this.x;\n    var yl = this.yl;\n    var yr = this.yr;\n    var kl = this.kl;\n    var kr = this.kr;\n    var n = yl.length;\n    var i,dx,dy;\n    var zl = kl, zr = kr, pl = Array(n), pr = Array(n);\n    var add = numeric.add, mul = numeric.mul, div = numeric.div, sub = numeric.sub;\n    for(i=n-1;i!==-1;--i) {\n        dx = x[i+1]-x[i];\n        dy = sub(yr[i+1],yl[i]);\n        pl[i] = div(add(mul(dy, 6),mul(kl[i],-4*dx),mul(kr[i+1],-2*dx)),dx*dx);\n        pr[i+1] = div(add(mul(dy,-6),mul(kl[i], 2*dx),mul(kr[i+1], 4*dx)),dx*dx);\n    }\n    return new numeric.Spline(x,zl,zr,pl,pr);\n}\nnumeric.Spline.prototype.roots = function roots() {\n    function sqr(x) { return x*x; }\n    function heval(y0,y1,k0,k1,x) {\n        var A = k0*2-(y1-y0);\n        var B = -k1*2+(y1-y0);\n        var t = (x+1)*0.5;\n        var s = t*(1-t);\n        return (1-t)*y0+t*y1+A*s*(1-t)+B*s*t;\n    }\n    var ret = [];\n    var x = this.x, yl = this.yl, yr = this.yr, kl = this.kl, kr = this.kr;\n    if(typeof yl[0] === \"number\") {\n        yl = [yl];\n        yr = [yr];\n        kl = [kl];\n        kr = [kr];\n    }\n    var m = yl.length,n=x.length-1,i,j,k,y,s,t;\n    var ai,bi,ci,di, ret = Array(m),ri,k0,k1,y0,y1,A,B,D,dx,cx,stops,z0,z1,zm,t0,t1,tm;\n    var sqrt = Math.sqrt;\n    for(i=0;i!==m;++i) {\n        ai = yl[i];\n        bi = yr[i];\n        ci = kl[i];\n        di = kr[i];\n        ri = [];\n        for(j=0;j!==n;j++) {\n            if(j>0 && bi[j]*ai[j]<0) ri.push(x[j]);\n            dx = (x[j+1]-x[j]);\n            cx = x[j];\n            y0 = ai[j];\n            y1 = bi[j+1];\n            k0 = ci[j]/dx;\n            k1 = di[j+1]/dx;\n            D = sqr(k0-k1+3*(y0-y1)) + 12*k1*y0;\n            A = k1+3*y0+2*k0-3*y1;\n            B = 3*(k1+k0+2*(y0-y1));\n            if(D<=0) {\n                z0 = A/B;\n                if(z0>x[j] && z0<x[j+1]) stops = [x[j],z0,x[j+1]];\n                else stops = [x[j],x[j+1]];\n            } else {\n                z0 = (A-sqrt(D))/B;\n                z1 = (A+sqrt(D))/B;\n                stops = [x[j]];\n                if(z0>x[j] && z0<x[j+1]) stops.push(z0);\n                if(z1>x[j] && z1<x[j+1]) stops.push(z1);\n                stops.push(x[j+1]);\n            }\n            t0 = stops[0];\n            z0 = this._at(t0,j);\n            for(k=0;k<stops.length-1;k++) {\n                t1 = stops[k+1];\n                z1 = this._at(t1,j);\n                if(z0 === 0) {\n                    ri.push(t0); \n                    t0 = t1;\n                    z0 = z1;\n                    continue;\n                }\n                if(z1 === 0 || z0*z1>0) {\n                    t0 = t1;\n                    z0 = z1;\n                    continue;\n                }\n                var side = 0;\n                while(1) {\n                    tm = (z0*t1-z1*t0)/(z0-z1);\n                    if(tm <= t0 || tm >= t1) { break; }\n                    zm = this._at(tm,j);\n                    if(zm*z1>0) {\n                        t1 = tm;\n                        z1 = zm;\n                        if(side === -1) z0*=0.5;\n                        side = -1;\n                    } else if(zm*z0>0) {\n                        t0 = tm;\n                        z0 = zm;\n                        if(side === 1) z1*=0.5;\n                        side = 1;\n                    } else break;\n                }\n                ri.push(tm);\n                t0 = stops[k+1];\n                z0 = this._at(t0, j);\n            }\n            if(z1 === 0) ri.push(t1);\n        }\n        ret[i] = ri;\n    }\n    if(typeof this.yl[0] === \"number\") return ret[0];\n    return ret;\n}\nnumeric.spline = function spline(x,y,k1,kn) {\n    var n = x.length, b = [], dx = [], dy = [];\n    var i;\n    var sub = numeric.sub,mul = numeric.mul,add = numeric.add;\n    for(i=n-2;i>=0;i--) { dx[i] = x[i+1]-x[i]; dy[i] = sub(y[i+1],y[i]); }\n    if(typeof k1 === \"string\" || typeof kn === \"string\") { \n        k1 = kn = \"periodic\";\n    }\n    // Build sparse tridiagonal system\n    var T = [[],[],[]];\n    switch(typeof k1) {\n    case \"undefined\":\n        b[0] = mul(3/(dx[0]*dx[0]),dy[0]);\n        T[0].push(0,0);\n        T[1].push(0,1);\n        T[2].push(2/dx[0],1/dx[0]);\n        break;\n    case \"string\":\n        b[0] = add(mul(3/(dx[n-2]*dx[n-2]),dy[n-2]),mul(3/(dx[0]*dx[0]),dy[0]));\n        T[0].push(0,0,0);\n        T[1].push(n-2,0,1);\n        T[2].push(1/dx[n-2],2/dx[n-2]+2/dx[0],1/dx[0]);\n        break;\n    default:\n        b[0] = k1;\n        T[0].push(0);\n        T[1].push(0);\n        T[2].push(1);\n        break;\n    }\n    for(i=1;i<n-1;i++) {\n        b[i] = add(mul(3/(dx[i-1]*dx[i-1]),dy[i-1]),mul(3/(dx[i]*dx[i]),dy[i]));\n        T[0].push(i,i,i);\n        T[1].push(i-1,i,i+1);\n        T[2].push(1/dx[i-1],2/dx[i-1]+2/dx[i],1/dx[i]);\n    }\n    switch(typeof kn) {\n    case \"undefined\":\n        b[n-1] = mul(3/(dx[n-2]*dx[n-2]),dy[n-2]);\n        T[0].push(n-1,n-1);\n        T[1].push(n-2,n-1);\n        T[2].push(1/dx[n-2],2/dx[n-2]);\n        break;\n    case \"string\":\n        T[1][T[1].length-1] = 0;\n        break;\n    default:\n        b[n-1] = kn;\n        T[0].push(n-1);\n        T[1].push(n-1);\n        T[2].push(1);\n        break;\n    }\n    if(typeof b[0] !== \"number\") b = numeric.transpose(b);\n    else b = [b];\n    var k = Array(b.length);\n    if(typeof k1 === \"string\") {\n        for(i=k.length-1;i!==-1;--i) {\n            k[i] = numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(T)),b[i]);\n            k[i][n-1] = k[i][0];\n        }\n    } else {\n        for(i=k.length-1;i!==-1;--i) {\n            k[i] = numeric.cLUsolve(numeric.cLU(T),b[i]);\n        }\n    }\n    if(typeof y[0] === \"number\") k = k[0];\n    else k = numeric.transpose(k);\n    return new numeric.Spline(x,y,y,k,k);\n}\n\n// 8. FFT\nnumeric.fftpow2 = function fftpow2(x,y) {\n    var n = x.length;\n    if(n === 1) return;\n    var cos = Math.cos, sin = Math.sin, i,j;\n    var xe = Array(n/2), ye = Array(n/2), xo = Array(n/2), yo = Array(n/2);\n    j = n/2;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        xo[j] = x[i];\n        yo[j] = y[i];\n        --i;\n        xe[j] = x[i];\n        ye[j] = y[i];\n    }\n    fftpow2(xe,ye);\n    fftpow2(xo,yo);\n    j = n/2;\n    var t,k = (-6.2831853071795864769252867665590057683943387987502116419/n),ci,si;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        if(j === -1) j = n/2-1;\n        t = k*i;\n        ci = cos(t);\n        si = sin(t);\n        x[i] = xe[j] + ci*xo[j] - si*yo[j];\n        y[i] = ye[j] + ci*yo[j] + si*xo[j];\n    }\n}\nnumeric._ifftpow2 = function _ifftpow2(x,y) {\n    var n = x.length;\n    if(n === 1) return;\n    var cos = Math.cos, sin = Math.sin, i,j;\n    var xe = Array(n/2), ye = Array(n/2), xo = Array(n/2), yo = Array(n/2);\n    j = n/2;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        xo[j] = x[i];\n        yo[j] = y[i];\n        --i;\n        xe[j] = x[i];\n        ye[j] = y[i];\n    }\n    _ifftpow2(xe,ye);\n    _ifftpow2(xo,yo);\n    j = n/2;\n    var t,k = (6.2831853071795864769252867665590057683943387987502116419/n),ci,si;\n    for(i=n-1;i!==-1;--i) {\n        --j;\n        if(j === -1) j = n/2-1;\n        t = k*i;\n        ci = cos(t);\n        si = sin(t);\n        x[i] = xe[j] + ci*xo[j] - si*yo[j];\n        y[i] = ye[j] + ci*yo[j] + si*xo[j];\n    }\n}\nnumeric.ifftpow2 = function ifftpow2(x,y) {\n    numeric._ifftpow2(x,y);\n    numeric.diveq(x,x.length);\n    numeric.diveq(y,y.length);\n}\nnumeric.convpow2 = function convpow2(ax,ay,bx,by) {\n    numeric.fftpow2(ax,ay);\n    numeric.fftpow2(bx,by);\n    var i,n = ax.length,axi,bxi,ayi,byi;\n    for(i=n-1;i!==-1;--i) {\n        axi = ax[i]; ayi = ay[i]; bxi = bx[i]; byi = by[i];\n        ax[i] = axi*bxi-ayi*byi;\n        ay[i] = axi*byi+ayi*bxi;\n    }\n    numeric.ifftpow2(ax,ay);\n}\nnumeric.T.prototype.fft = function fft() {\n    var x = this.x, y = this.y;\n    var n = x.length, log = Math.log, log2 = log(2),\n        p = Math.ceil(log(2*n-1)/log2), m = Math.pow(2,p);\n    var cx = numeric.rep([m],0), cy = numeric.rep([m],0), cos = Math.cos, sin = Math.sin;\n    var k, c = (-3.141592653589793238462643383279502884197169399375105820/n),t;\n    var a = numeric.rep([m],0), b = numeric.rep([m],0),nhalf = Math.floor(n/2);\n    for(k=0;k<n;k++) a[k] = x[k];\n    if(typeof y !== \"undefined\") for(k=0;k<n;k++) b[k] = y[k];\n    cx[0] = 1;\n    for(k=1;k<=m/2;k++) {\n        t = c*k*k;\n        cx[k] = cos(t);\n        cy[k] = sin(t);\n        cx[m-k] = cos(t);\n        cy[m-k] = sin(t)\n    }\n    var X = new numeric.T(a,b), Y = new numeric.T(cx,cy);\n    X = X.mul(Y);\n    numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));\n    X = X.mul(Y);\n    X.x.length = n;\n    X.y.length = n;\n    return X;\n}\nnumeric.T.prototype.ifft = function ifft() {\n    var x = this.x, y = this.y;\n    var n = x.length, log = Math.log, log2 = log(2),\n        p = Math.ceil(log(2*n-1)/log2), m = Math.pow(2,p);\n    var cx = numeric.rep([m],0), cy = numeric.rep([m],0), cos = Math.cos, sin = Math.sin;\n    var k, c = (3.141592653589793238462643383279502884197169399375105820/n),t;\n    var a = numeric.rep([m],0), b = numeric.rep([m],0),nhalf = Math.floor(n/2);\n    for(k=0;k<n;k++) a[k] = x[k];\n    if(typeof y !== \"undefined\") for(k=0;k<n;k++) b[k] = y[k];\n    cx[0] = 1;\n    for(k=1;k<=m/2;k++) {\n        t = c*k*k;\n        cx[k] = cos(t);\n        cy[k] = sin(t);\n        cx[m-k] = cos(t);\n        cy[m-k] = sin(t)\n    }\n    var X = new numeric.T(a,b), Y = new numeric.T(cx,cy);\n    X = X.mul(Y);\n    numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));\n    X = X.mul(Y);\n    X.x.length = n;\n    X.y.length = n;\n    return X.div(n);\n}\n\n//9. Unconstrained optimization\nnumeric.gradient = function gradient(f,x) {\n    var n = x.length;\n    var f0 = f(x);\n    if(isNaN(f0)) throw new Error('gradient: f(x) is a NaN!');\n    var max = Math.max;\n    var i,x0 = numeric.clone(x),f1,f2, J = Array(n);\n    var div = numeric.div, sub = numeric.sub,errest,roundoff,max = Math.max,eps = 1e-3,abs = Math.abs, min = Math.min;\n    var t0,t1,t2,it=0,d1,d2,N;\n    for(i=0;i<n;i++) {\n        var h = max(1e-6*f0,1e-8);\n        while(1) {\n            ++it;\n            if(it>20) { throw new Error(\"Numerical gradient fails\"); }\n            x0[i] = x[i]+h;\n            f1 = f(x0);\n            x0[i] = x[i]-h;\n            f2 = f(x0);\n            x0[i] = x[i];\n            if(isNaN(f1) || isNaN(f2)) { h/=16; continue; }\n            J[i] = (f1-f2)/(2*h);\n            t0 = x[i]-h;\n            t1 = x[i];\n            t2 = x[i]+h;\n            d1 = (f1-f0)/h;\n            d2 = (f0-f2)/h;\n            N = max(abs(J[i]),abs(f0),abs(f1),abs(f2),abs(t0),abs(t1),abs(t2),1e-8);\n            errest = min(max(abs(d1-J[i]),abs(d2-J[i]),abs(d1-d2))/N,h/N);\n            if(errest>eps) { h/=16; }\n            else break;\n            }\n    }\n    return J;\n}\n\nnumeric.uncmin = function uncmin(f,x0,tol,gradient,maxit,callback,options) {\n    var grad = numeric.gradient;\n    if(typeof options === \"undefined\") { options = {}; }\n    if(typeof tol === \"undefined\") { tol = 1e-8; }\n    if(typeof gradient === \"undefined\") { gradient = function(x) { return grad(f,x); }; }\n    if(typeof maxit === \"undefined\") maxit = 1000;\n    x0 = numeric.clone(x0);\n    var n = x0.length;\n    var f0 = f(x0),f1,df0;\n    if(isNaN(f0)) throw new Error('uncmin: f(x0) is a NaN!');\n    var max = Math.max, norm2 = numeric.norm2;\n    tol = max(tol,numeric.epsilon);\n    var step,g0,g1,H1 = options.Hinv || numeric.identity(n);\n    var dot = numeric.dot, inv = numeric.inv, sub = numeric.sub, add = numeric.add, ten = numeric.tensor, div = numeric.div, mul = numeric.mul;\n    var all = numeric.all, isfinite = numeric.isFinite, neg = numeric.neg;\n    var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;\n    var msg = \"\";\n    g0 = gradient(x0);\n    while(it<maxit) {\n        if(typeof callback === \"function\") { if(callback(it,x0,f0,g0,H1)) { msg = \"Callback returned true\"; break; } }\n        if(!all(isfinite(g0))) { msg = \"Gradient has Infinity or NaN\"; break; }\n        step = neg(dot(H1,g0));\n        if(!all(isfinite(step))) { msg = \"Search direction has Infinity or NaN\"; break; }\n        nstep = norm2(step);\n        if(nstep < tol) { msg=\"Newton step smaller than tol\"; break; }\n        t = 1;\n        df0 = dot(g0,step);\n        // line search\n        x1 = x0;\n        while(it < maxit) {\n            if(t*nstep < tol) { break; }\n            s = mul(step,t);\n            x1 = add(x0,s);\n            f1 = f(x1);\n            if(f1-f0 >= 0.1*t*df0 || isNaN(f1)) {\n                t *= 0.5;\n                ++it;\n                continue;\n            }\n            break;\n        }\n        if(t*nstep < tol) { msg = \"Line search step size smaller than tol\"; break; }\n        if(it === maxit) { msg = \"maxit reached during line search\"; break; }\n        g1 = gradient(x1);\n        y = sub(g1,g0);\n        ys = dot(y,s);\n        Hy = dot(H1,y);\n        H1 = sub(add(H1,\n                mul(\n                        (ys+dot(y,Hy))/(ys*ys),\n                        ten(s,s)    )),\n                div(add(ten(Hy,s),ten(s,Hy)),ys));\n        x0 = x1;\n        f0 = f1;\n        g0 = g1;\n        ++it;\n    }\n    return {solution: x0, f: f0, gradient: g0, invHessian: H1, iterations:it, message: msg};\n}\n\n// 10. Ode solver (Dormand-Prince)\nnumeric.Dopri = function Dopri(x,y,f,ymid,iterations,msg,events) {\n    this.x = x;\n    this.y = y;\n    this.f = f;\n    this.ymid = ymid;\n    this.iterations = iterations;\n    this.events = events;\n    this.message = msg;\n}\nnumeric.Dopri.prototype._at = function _at(xi,j) {\n    function sqr(x) { return x*x; }\n    var sol = this;\n    var xs = sol.x;\n    var ys = sol.y;\n    var k1 = sol.f;\n    var ymid = sol.ymid;\n    var n = xs.length;\n    var x0,x1,xh,y0,y1,yh,xi;\n    var floor = Math.floor,h;\n    var c = 0.5;\n    var add = numeric.add, mul = numeric.mul,sub = numeric.sub, p,q,w;\n    x0 = xs[j];\n    x1 = xs[j+1];\n    y0 = ys[j];\n    y1 = ys[j+1];\n    h  = x1-x0;\n    xh = x0+c*h;\n    yh = ymid[j];\n    p = sub(k1[j  ],mul(y0,1/(x0-xh)+2/(x0-x1)));\n    q = sub(k1[j+1],mul(y1,1/(x1-xh)+2/(x1-x0)));\n    w = [sqr(xi - x1) * (xi - xh) / sqr(x0 - x1) / (x0 - xh),\n         sqr(xi - x0) * sqr(xi - x1) / sqr(x0 - xh) / sqr(x1 - xh),\n         sqr(xi - x0) * (xi - xh) / sqr(x1 - x0) / (x1 - xh),\n         (xi - x0) * sqr(xi - x1) * (xi - xh) / sqr(x0-x1) / (x0 - xh),\n         (xi - x1) * sqr(xi - x0) * (xi - xh) / sqr(x0-x1) / (x1 - xh)];\n    return add(add(add(add(mul(y0,w[0]),\n                           mul(yh,w[1])),\n                           mul(y1,w[2])),\n                           mul( p,w[3])),\n                           mul( q,w[4]));\n}\nnumeric.Dopri.prototype.at = function at(x) {\n    var i,j,k,floor = Math.floor;\n    if(typeof x !== \"number\") {\n        var n = x.length, ret = Array(n);\n        for(i=n-1;i!==-1;--i) {\n            ret[i] = this.at(x[i]);\n        }\n        return ret;\n    }\n    var x0 = this.x;\n    i = 0; j = x0.length-1;\n    while(j-i>1) {\n        k = floor(0.5*(i+j));\n        if(x0[k] <= x) i = k;\n        else j = k;\n    }\n    return this._at(x,i);\n}\n\nnumeric.dopri = function dopri(x0,x1,y0,f,tol,maxit,event) {\n    if(typeof tol === \"undefined\") { tol = 1e-6; }\n    if(typeof maxit === \"undefined\") { maxit = 1000; }\n    var xs = [x0], ys = [y0], k1 = [f(x0,y0)], k2,k3,k4,k5,k6,k7, ymid = [];\n    var A2 = 1/5;\n    var A3 = [3/40,9/40];\n    var A4 = [44/45,-56/15,32/9];\n    var A5 = [19372/6561,-25360/2187,64448/6561,-212/729];\n    var A6 = [9017/3168,-355/33,46732/5247,49/176,-5103/18656];\n    var b = [35/384,0,500/1113,125/192,-2187/6784,11/84];\n    var bm = [0.5*6025192743/30085553152,\n              0,\n              0.5*51252292925/65400821598,\n              0.5*-2691868925/45128329728,\n              0.5*187940372067/1594534317056,\n              0.5*-1776094331/19743644256,\n              0.5*11237099/235043384];\n    var c = [1/5,3/10,4/5,8/9,1,1];\n    var e = [-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40];\n    var i = 0,er,j;\n    var h = (x1-x0)/10;\n    var it = 0;\n    var add = numeric.add, mul = numeric.mul, y1,erinf;\n    var max = Math.max, min = Math.min, abs = Math.abs, norminf = numeric.norminf,pow = Math.pow;\n    var any = numeric.any, lt = numeric.lt, and = numeric.and, sub = numeric.sub;\n    var e0, e1, ev;\n    var ret = new numeric.Dopri(xs,ys,k1,ymid,-1,\"\");\n    if(typeof event === \"function\") e0 = event(x0,y0);\n    while(x0<x1 && it<maxit) {\n        ++it;\n        if(x0+h>x1) h = x1-x0;\n        k2 = f(x0+c[0]*h,                add(y0,mul(   A2*h,k1[i])));\n        k3 = f(x0+c[1]*h,            add(add(y0,mul(A3[0]*h,k1[i])),mul(A3[1]*h,k2)));\n        k4 = f(x0+c[2]*h,        add(add(add(y0,mul(A4[0]*h,k1[i])),mul(A4[1]*h,k2)),mul(A4[2]*h,k3)));\n        k5 = f(x0+c[3]*h,    add(add(add(add(y0,mul(A5[0]*h,k1[i])),mul(A5[1]*h,k2)),mul(A5[2]*h,k3)),mul(A5[3]*h,k4)));\n        k6 = f(x0+c[4]*h,add(add(add(add(add(y0,mul(A6[0]*h,k1[i])),mul(A6[1]*h,k2)),mul(A6[2]*h,k3)),mul(A6[3]*h,k4)),mul(A6[4]*h,k5)));\n        y1 = add(add(add(add(add(y0,mul(k1[i],h*b[0])),mul(k3,h*b[2])),mul(k4,h*b[3])),mul(k5,h*b[4])),mul(k6,h*b[5]));\n        k7 = f(x0+h,y1);\n        er = add(add(add(add(add(mul(k1[i],h*e[0]),mul(k3,h*e[2])),mul(k4,h*e[3])),mul(k5,h*e[4])),mul(k6,h*e[5])),mul(k7,h*e[6]));\n        if(typeof er === \"number\") erinf = abs(er);\n        else erinf = norminf(er);\n        if(erinf > tol) { // reject\n            h = 0.2*h*pow(tol/erinf,0.25);\n            if(x0+h === x0) {\n                ret.msg = \"Step size became too small\";\n                break;\n            }\n            continue;\n        }\n        ymid[i] = add(add(add(add(add(add(y0,\n                mul(k1[i],h*bm[0])),\n                mul(k3   ,h*bm[2])),\n                mul(k4   ,h*bm[3])),\n                mul(k5   ,h*bm[4])),\n                mul(k6   ,h*bm[5])),\n                mul(k7   ,h*bm[6]));\n        ++i;\n        xs[i] = x0+h;\n        ys[i] = y1;\n        k1[i] = k7;\n        if(typeof event === \"function\") {\n            var yi,xl = x0,xr = x0+0.5*h,xi;\n            e1 = event(xr,ymid[i-1]);\n            ev = and(lt(e0,0),lt(0,e1));\n            if(!any(ev)) { xl = xr; xr = x0+h; e0 = e1; e1 = event(xr,y1); ev = and(lt(e0,0),lt(0,e1)); }\n            if(any(ev)) {\n                var xc, yc, en,ei;\n                var side=0, sl = 1.0, sr = 1.0;\n                while(1) {\n                    if(typeof e0 === \"number\") xi = (sr*e1*xl-sl*e0*xr)/(sr*e1-sl*e0);\n                    else {\n                        xi = xr;\n                        for(j=e0.length-1;j!==-1;--j) {\n                            if(e0[j]<0 && e1[j]>0) xi = min(xi,(sr*e1[j]*xl-sl*e0[j]*xr)/(sr*e1[j]-sl*e0[j]));\n                        }\n                    }\n                    if(xi <= xl || xi >= xr) break;\n                    yi = ret._at(xi, i-1);\n                    ei = event(xi,yi);\n                    en = and(lt(e0,0),lt(0,ei));\n                    if(any(en)) {\n                        xr = xi;\n                        e1 = ei;\n                        ev = en;\n                        sr = 1.0;\n                        if(side === -1) sl *= 0.5;\n                        else sl = 1.0;\n                        side = -1;\n                    } else {\n                        xl = xi;\n                        e0 = ei;\n                        sl = 1.0;\n                        if(side === 1) sr *= 0.5;\n                        else sr = 1.0;\n                        side = 1;\n                    }\n                }\n                y1 = ret._at(0.5*(x0+xi),i-1);\n                ret.f[i] = f(xi,yi);\n                ret.x[i] = xi;\n                ret.y[i] = yi;\n                ret.ymid[i-1] = y1;\n                ret.events = ev;\n                ret.iterations = it;\n                return ret;\n            }\n        }\n        x0 += h;\n        y0 = y1;\n        e0 = e1;\n        h = min(0.8*h*pow(tol/erinf,0.25),4*h);\n    }\n    ret.iterations = it;\n    return ret;\n}\n\n// 11. Ax = b\nnumeric.LU = function(A, fast) {\n  fast = fast || false;\n\n  var abs = Math.abs;\n  var i, j, k, absAjk, Akk, Ak, Pk, Ai;\n  var max;\n  var n = A.length, n1 = n-1;\n  var P = new Array(n);\n  if(!fast) A = numeric.clone(A);\n\n  for (k = 0; k < n; ++k) {\n    Pk = k;\n    Ak = A[k];\n    max = abs(Ak[k]);\n    for (j = k + 1; j < n; ++j) {\n      absAjk = abs(A[j][k]);\n      if (max < absAjk) {\n        max = absAjk;\n        Pk = j;\n      }\n    }\n    P[k] = Pk;\n\n    if (Pk != k) {\n      A[k] = A[Pk];\n      A[Pk] = Ak;\n      Ak = A[k];\n    }\n\n    Akk = Ak[k];\n\n    for (i = k + 1; i < n; ++i) {\n      A[i][k] /= Akk;\n    }\n\n    for (i = k + 1; i < n; ++i) {\n      Ai = A[i];\n      for (j = k + 1; j < n1; ++j) {\n        Ai[j] -= Ai[k] * Ak[j];\n        ++j;\n        Ai[j] -= Ai[k] * Ak[j];\n      }\n      if(j===n1) Ai[j] -= Ai[k] * Ak[j];\n    }\n  }\n\n  return {\n    LU: A,\n    P:  P\n  };\n}\n\nnumeric.LUsolve = function LUsolve(LUP, b) {\n  var i, j;\n  var LU = LUP.LU;\n  var n   = LU.length;\n  var x = numeric.clone(b);\n  var P   = LUP.P;\n  var Pi, LUi, LUii, tmp;\n\n  for (i=n-1;i!==-1;--i) x[i] = b[i];\n  for (i = 0; i < n; ++i) {\n    Pi = P[i];\n    if (P[i] !== i) {\n      tmp = x[i];\n      x[i] = x[Pi];\n      x[Pi] = tmp;\n    }\n\n    LUi = LU[i];\n    for (j = 0; j < i; ++j) {\n      x[i] -= x[j] * LUi[j];\n    }\n  }\n\n  for (i = n - 1; i >= 0; --i) {\n    LUi = LU[i];\n    for (j = i + 1; j < n; ++j) {\n      x[i] -= x[j] * LUi[j];\n    }\n\n    x[i] /= LUi[i];\n  }\n\n  return x;\n}\n\nnumeric.solve = function solve(A,b,fast) { return numeric.LUsolve(numeric.LU(A,fast), b); }\n\n// 12. Linear programming\nnumeric.echelonize = function echelonize(A) {\n    var s = numeric.dim(A), m = s[0], n = s[1];\n    var I = numeric.identity(m);\n    var P = Array(m);\n    var i,j,k,l,Ai,Ii,Z,a;\n    var abs = Math.abs;\n    var diveq = numeric.diveq;\n    A = numeric.clone(A);\n    for(i=0;i<m;++i) {\n        k = 0;\n        Ai = A[i];\n        Ii = I[i];\n        for(j=1;j<n;++j) if(abs(Ai[k])<abs(Ai[j])) k=j;\n        P[i] = k;\n        diveq(Ii,Ai[k]);\n        diveq(Ai,Ai[k]);\n        for(j=0;j<m;++j) if(j!==i) {\n            Z = A[j]; a = Z[k];\n            for(l=n-1;l!==-1;--l) Z[l] -= Ai[l]*a;\n            Z = I[j];\n            for(l=m-1;l!==-1;--l) Z[l] -= Ii[l]*a;\n        }\n    }\n    return {I:I, A:A, P:P};\n}\n\nnumeric.__solveLP = function __solveLP(c,A,b,tol,maxit,x,flag) {\n    var sum = numeric.sum, log = numeric.log, mul = numeric.mul, sub = numeric.sub, dot = numeric.dot, div = numeric.div, add = numeric.add;\n    var m = c.length, n = b.length,y;\n    var unbounded = false, cb,i0=0;\n    var alpha = 1.0;\n    var f0,df0,AT = numeric.transpose(A), svd = numeric.svd,transpose = numeric.transpose,leq = numeric.leq, sqrt = Math.sqrt, abs = Math.abs;\n    var muleq = numeric.muleq;\n    var norm = numeric.norminf, any = numeric.any,min = Math.min;\n    var all = numeric.all, gt = numeric.gt;\n    var p = Array(m), A0 = Array(n),e=numeric.rep([n],1), H;\n    var solve = numeric.solve, z = sub(b,dot(A,x)),count;\n    var dotcc = dot(c,c);\n    var g;\n    for(count=i0;count<maxit;++count) {\n        var i,j,d;\n        for(i=n-1;i!==-1;--i) A0[i] = div(A[i],z[i]);\n        var A1 = transpose(A0);\n        for(i=m-1;i!==-1;--i) p[i] = (/*x[i]+*/sum(A1[i]));\n        alpha = 0.25*abs(dotcc/dot(c,p));\n        var a1 = 100*sqrt(dotcc/dot(p,p));\n        if(!isFinite(alpha) || alpha>a1) alpha = a1;\n        g = add(c,mul(alpha,p));\n        H = dot(A1,A0);\n        for(i=m-1;i!==-1;--i) H[i][i] += 1;\n        d = solve(H,div(g,alpha),true);\n        var t0 = div(z,dot(A,d));\n        var t = 1.0;\n        for(i=n-1;i!==-1;--i) if(t0[i]<0) t = min(t,-0.999*t0[i]);\n        y = sub(x,mul(d,t));\n        z = sub(b,dot(A,y));\n        if(!all(gt(z,0))) return { solution: x, message: \"\", iterations: count };\n        x = y;\n        if(alpha<tol) return { solution: y, message: \"\", iterations: count };\n        if(flag) {\n            var s = dot(c,g), Ag = dot(A,g);\n            unbounded = true;\n            for(i=n-1;i!==-1;--i) if(s*Ag[i]<0) { unbounded = false; break; }\n        } else {\n            if(x[m-1]>=0) unbounded = false;\n            else unbounded = true;\n        }\n        if(unbounded) return { solution: y, message: \"Unbounded\", iterations: count };\n    }\n    return { solution: x, message: \"maximum iteration count exceeded\", iterations:count };\n}\n\nnumeric._solveLP = function _solveLP(c,A,b,tol,maxit) {\n    var m = c.length, n = b.length,y;\n    var sum = numeric.sum, log = numeric.log, mul = numeric.mul, sub = numeric.sub, dot = numeric.dot, div = numeric.div, add = numeric.add;\n    var c0 = numeric.rep([m],0).concat([1]);\n    var J = numeric.rep([n,1],-1);\n    var A0 = numeric.blockMatrix([[A                   ,   J  ]]);\n    var b0 = b;\n    var y = numeric.rep([m],0).concat(Math.max(0,numeric.sup(numeric.neg(b)))+1);\n    var x0 = numeric.__solveLP(c0,A0,b0,tol,maxit,y,false);\n    var x = numeric.clone(x0.solution);\n    x.length = m;\n    var foo = numeric.inf(sub(b,dot(A,x)));\n    if(foo<0) { return { solution: NaN, message: \"Infeasible\", iterations: x0.iterations }; }\n    var ret = numeric.__solveLP(c, A, b, tol, maxit-x0.iterations, x, true);\n    ret.iterations += x0.iterations;\n    return ret;\n};\n\nnumeric.solveLP = function solveLP(c,A,b,Aeq,beq,tol,maxit) {\n    if(typeof maxit === \"undefined\") maxit = 1000;\n    if(typeof tol === \"undefined\") tol = numeric.epsilon;\n    if(typeof Aeq === \"undefined\") return numeric._solveLP(c,A,b,tol,maxit);\n    var m = Aeq.length, n = Aeq[0].length, o = A.length;\n    var B = numeric.echelonize(Aeq);\n    var flags = numeric.rep([n],0);\n    var P = B.P;\n    var Q = [];\n    var i;\n    for(i=P.length-1;i!==-1;--i) flags[P[i]] = 1;\n    for(i=n-1;i!==-1;--i) if(flags[i]===0) Q.push(i);\n    var g = numeric.getRange;\n    var I = numeric.linspace(0,m-1), J = numeric.linspace(0,o-1);\n    var Aeq2 = g(Aeq,I,Q), A1 = g(A,J,P), A2 = g(A,J,Q), dot = numeric.dot, sub = numeric.sub;\n    var A3 = dot(A1,B.I);\n    var A4 = sub(A2,dot(A3,Aeq2)), b4 = sub(b,dot(A3,beq));\n    var c1 = Array(P.length), c2 = Array(Q.length);\n    for(i=P.length-1;i!==-1;--i) c1[i] = c[P[i]];\n    for(i=Q.length-1;i!==-1;--i) c2[i] = c[Q[i]];\n    var c4 = sub(c2,dot(c1,dot(B.I,Aeq2)));\n    var S = numeric._solveLP(c4,A4,b4,tol,maxit);\n    var x2 = S.solution;\n    if(x2!==x2) return S;\n    var x1 = dot(B.I,sub(beq,dot(Aeq2,x2)));\n    var x = Array(c.length);\n    for(i=P.length-1;i!==-1;--i) x[P[i]] = x1[i];\n    for(i=Q.length-1;i!==-1;--i) x[Q[i]] = x2[i];\n    return { solution: x, message:S.message, iterations: S.iterations };\n}\n\nnumeric.MPStoLP = function MPStoLP(MPS) {\n    if(MPS instanceof String) { MPS.split('\\n'); }\n    var state = 0;\n    var states = ['Initial state','NAME','ROWS','COLUMNS','RHS','BOUNDS','ENDATA'];\n    var n = MPS.length;\n    var i,j,z,N=0,rows = {}, sign = [], rl = 0, vars = {}, nv = 0;\n    var name;\n    var c = [], A = [], b = [];\n    function err(e) { throw new Error('MPStoLP: '+e+'\\nLine '+i+': '+MPS[i]+'\\nCurrent state: '+states[state]+'\\n'); }\n    for(i=0;i<n;++i) {\n        z = MPS[i];\n        var w0 = z.match(/\\S*/g);\n        var w = [];\n        for(j=0;j<w0.length;++j) if(w0[j]!==\"\") w.push(w0[j]);\n        if(w.length === 0) continue;\n        for(j=0;j<states.length;++j) if(z.substr(0,states[j].length) === states[j]) break;\n        if(j<states.length) {\n            state = j;\n            if(j===1) { name = w[1]; }\n            if(j===6) return { name:name, c:c, A:numeric.transpose(A), b:b, rows:rows, vars:vars };\n            continue;\n        }\n        switch(state) {\n        case 0: case 1: err('Unexpected line');\n        case 2: \n            switch(w[0]) {\n            case 'N': if(N===0) N = w[1]; else err('Two or more N rows'); break;\n            case 'L': rows[w[1]] = rl; sign[rl] = 1; b[rl] = 0; ++rl; break;\n            case 'G': rows[w[1]] = rl; sign[rl] = -1;b[rl] = 0; ++rl; break;\n            case 'E': rows[w[1]] = rl; sign[rl] = 0;b[rl] = 0; ++rl; break;\n            default: err('Parse error '+numeric.prettyPrint(w));\n            }\n            break;\n        case 3:\n            if(!vars.hasOwnProperty(w[0])) { vars[w[0]] = nv; c[nv] = 0; A[nv] = numeric.rep([rl],0); ++nv; }\n            var p = vars[w[0]];\n            for(j=1;j<w.length;j+=2) {\n                if(w[j] === N) { c[p] = parseFloat(w[j+1]); continue; }\n                var q = rows[w[j]];\n                A[p][q] = (sign[q]<0?-1:1)*parseFloat(w[j+1]);\n            }\n            break;\n        case 4:\n            for(j=1;j<w.length;j+=2) b[rows[w[j]]] = (sign[rows[w[j]]]<0?-1:1)*parseFloat(w[j+1]);\n            break;\n        case 5: /*FIXME*/ break;\n        case 6: err('Internal error');\n        }\n    }\n    err('Reached end of file without ENDATA');\n}\n// seedrandom.js version 2.0.\n// Author: David Bau 4/2/2011\n//\n// Defines a method Math.seedrandom() that, when called, substitutes\n// an explicitly seeded RC4-based algorithm for Math.random().  Also\n// supports automatic seeding from local or network sources of entropy.\n//\n// Usage:\n//\n//   <script src=http://davidbau.com/encode/seedrandom-min.js></script>\n//\n//   Math.seedrandom('yipee'); Sets Math.random to a function that is\n//                             initialized using the given explicit seed.\n//\n//   Math.seedrandom();        Sets Math.random to a function that is\n//                             seeded using the current time, dom state,\n//                             and other accumulated local entropy.\n//                             The generated seed string is returned.\n//\n//   Math.seedrandom('yowza', true);\n//                             Seeds using the given explicit seed mixed\n//                             together with accumulated entropy.\n//\n//   <script src=\"http://bit.ly/srandom-512\"></script>\n//                             Seeds using physical random bits downloaded\n//                             from random.org.\n//\n//   <script src=\"https://jsonlib.appspot.com/urandom?callback=Math.seedrandom\">\n//   </script>                 Seeds using urandom bits from call.jsonlib.com,\n//                             which is faster than random.org.\n//\n// Examples:\n//\n//   Math.seedrandom(\"hello\");            // Use \"hello\" as the seed.\n//   document.write(Math.random());       // Always 0.5463663768140734\n//   document.write(Math.random());       // Always 0.43973793770592234\n//   var rng1 = Math.random;              // Remember the current prng.\n//\n//   var autoseed = Math.seedrandom();    // New prng with an automatic seed.\n//   document.write(Math.random());       // Pretty much unpredictable.\n//\n//   Math.random = rng1;                  // Continue \"hello\" prng sequence.\n//   document.write(Math.random());       // Always 0.554769432473455\n//\n//   Math.seedrandom(autoseed);           // Restart at the previous seed.\n//   document.write(Math.random());       // Repeat the 'unpredictable' value.\n//\n// Notes:\n//\n// Each time seedrandom('arg') is called, entropy from the passed seed\n// is accumulated in a pool to help generate future seeds for the\n// zero-argument form of Math.seedrandom, so entropy can be injected over\n// time by calling seedrandom with explicit data repeatedly.\n//\n// On speed - This javascript implementation of Math.random() is about\n// 3-10x slower than the built-in Math.random() because it is not native\n// code, but this is typically fast enough anyway.  Seeding is more expensive,\n// especially if you use auto-seeding.  Some details (timings on Chrome 4):\n//\n// Our Math.random()            - avg less than 0.002 milliseconds per call\n// seedrandom('explicit')       - avg less than 0.5 milliseconds per call\n// seedrandom('explicit', true) - avg less than 2 milliseconds per call\n// seedrandom()                 - avg about 38 milliseconds per call\n//\n// LICENSE (BSD):\n//\n// Copyright 2010 David Bau, all rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n// \n//   1. Redistributions of source code must retain the above copyright\n//      notice, this list of conditions and the following disclaimer.\n//\n//   2. Redistributions in binary form must reproduce the above copyright\n//      notice, this list of conditions and the following disclaimer in the\n//      documentation and/or other materials provided with the distribution.\n// \n//   3. Neither the name of this module nor the names of its contributors may\n//      be used to endorse or promote products derived from this software\n//      without specific prior written permission.\n// \n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n/**\n * All code is in an anonymous closure to keep the global namespace clean.\n *\n * @param {number=} overflow \n * @param {number=} startdenom\n */\n\n// Patched by Seb so that seedrandom.js does not pollute the Math object.\n// My tests suggest that doing Math.trouble = 1 makes Math lookups about 5%\n// slower.\nnumeric.seedrandom = { pow:Math.pow, random:Math.random };\n\n(function (pool, math, width, chunks, significance, overflow, startdenom) {\n\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nmath['seedrandom'] = function seedrandom(seed, use_entropy) {\n  var key = [];\n  var arc4;\n\n  // Flatten the seed string or build one from local entropy if needed.\n  seed = mixkey(flatten(\n    use_entropy ? [seed, pool] :\n    arguments.length ? seed :\n    [new Date().getTime(), pool, window], 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  arc4 = new ARC4(key);\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(arc4.S, pool);\n\n  // Override Math.random\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n\n  math['random'] = function random() {  // Closure to return a random double:\n    var n = arc4.g(chunks);             // Start with a numerator n < 2 ^ 48\n    var d = startdenom;                 //   and denominator d = 2 ^ 48.\n    var x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  // Return the seed that was used\n  return seed;\n};\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\n/** @constructor */\nfunction ARC4(key) {\n  var t, u, me = this, keylen = key.length;\n  var i = 0, j = me.i = me.j = me.m = 0;\n  me.S = [];\n  me.c = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) { me.S[i] = i++; }\n  for (i = 0; i < width; i++) {\n    t = me.S[i];\n    j = lowbits(j + t + key[i % keylen]);\n    u = me.S[j];\n    me.S[i] = u;\n    me.S[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  me.g = function getnext(count) {\n    var s = me.S;\n    var i = lowbits(me.i + 1); var t = s[i];\n    var j = lowbits(me.j + t); var u = s[j];\n    s[i] = u;\n    s[j] = t;\n    var r = s[lowbits(t + u)];\n    while (--count) {\n      i = lowbits(i + 1); t = s[i];\n      j = lowbits(j + t); u = s[j];\n      s[i] = u;\n      s[j] = t;\n      r = r * width + s[lowbits(t + u)];\n    }\n    me.i = i;\n    me.j = j;\n    return r;\n  };\n  // For robust unpredictability discard an initial batch of values.\n  // See http://www.rsa.com/rsalabs/node.asp?id=2009\n  me.g(width);\n}\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\n/** @param {Object=} result \n  * @param {string=} prop\n  * @param {string=} typ */\nfunction flatten(obj, depth, result, prop, typ) {\n  result = [];\n  typ = typeof(obj);\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      if (prop.indexOf('S') < 5) {    // Avoid FF3 bug (local/sessionStorage)\n        try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n      }\n    }\n  }\n  return (result.length ? result : obj + (typ != 'string' ? '\\0' : ''));\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\n/** @param {number=} smear \n  * @param {number=} j */\nfunction mixkey(seed, key, smear, j) {\n  seed += '';                         // Ensure the seed is a string\n  smear = 0;\n  for (j = 0; j < seed.length; j++) {\n    key[lowbits(j)] =\n      lowbits((smear ^= key[lowbits(j)] * 19) + seed.charCodeAt(j));\n  }\n  seed = '';\n  for (j in key) { seed += String.fromCharCode(key[j]); }\n  return seed;\n}\n\n//\n// lowbits()\n// A quick \"n mod width\" for width a power of 2.\n//\nfunction lowbits(n) { return n & (width - 1); }\n\n//\n// The following constants are related to IEEE 754 limits.\n//\nstartdenom = math.pow(width, chunks);\nsignificance = math.pow(2, significance);\noverflow = significance * 2;\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to intefere with determinstic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n// End anonymous scope, and pass initial values.\n}(\n  [],   // pool: entropy pool starts empty\n  numeric.seedrandom, // math: package containing random, pow, and seedrandom\n  256,  // width: each RC4 output is 0 <= x < 256\n  6,    // chunks: at least six RC4 outputs for each double\n  52    // significance: there are 52 significant digits in a double\n  ));\n/* This file is a slightly modified version of quadprog.js from Alberto Santini.\n * It has been slightly modified by Sbastien Loisel to make sure that it handles\n * 0-based Arrays instead of 1-based Arrays.\n * License is in resources/LICENSE.quadprog */\n(function(exports) {\n\nfunction base0to1(A) {\n    if(typeof A !== \"object\") { return A; }\n    var ret = [], i,n=A.length;\n    for(i=0;i<n;i++) ret[i+1] = base0to1(A[i]);\n    return ret;\n}\nfunction base1to0(A) {\n    if(typeof A !== \"object\") { return A; }\n    var ret = [], i,n=A.length;\n    for(i=1;i<n;i++) ret[i-1] = base1to0(A[i]);\n    return ret;\n}\n\nfunction dpori(a, lda, n) {\n    var i, j, k, kp1, t;\n\n    for (k = 1; k <= n; k = k + 1) {\n        a[k][k] = 1 / a[k][k];\n        t = -a[k][k];\n        //~ dscal(k - 1, t, a[1][k], 1);\n        for (i = 1; i < k; i = i + 1) {\n            a[i][k] = t * a[i][k];\n        }\n\n        kp1 = k + 1;\n        if (n < kp1) {\n            break;\n        }\n        for (j = kp1; j <= n; j = j + 1) {\n            t = a[k][j];\n            a[k][j] = 0;\n            //~ daxpy(k, t, a[1][k], 1, a[1][j], 1);\n            for (i = 1; i <= k; i = i + 1) {\n                a[i][j] = a[i][j] + (t * a[i][k]);\n            }\n        }\n    }\n\n}\n\nfunction dposl(a, lda, n, b) {\n    var i, k, kb, t;\n\n    for (k = 1; k <= n; k = k + 1) {\n        //~ t = ddot(k - 1, a[1][k], 1, b[1], 1);\n        t = 0;\n        for (i = 1; i < k; i = i + 1) {\n            t = t + (a[i][k] * b[i]);\n        }\n\n        b[k] = (b[k] - t) / a[k][k];\n    }\n\n    for (kb = 1; kb <= n; kb = kb + 1) {\n        k = n + 1 - kb;\n        b[k] = b[k] / a[k][k];\n        t = -b[k];\n        //~ daxpy(k - 1, t, a[1][k], 1, b[1], 1);\n        for (i = 1; i < k; i = i + 1) {\n            b[i] = b[i] + (t * a[i][k]);\n        }\n    }\n}\n\nfunction dpofa(a, lda, n, info) {\n    var i, j, jm1, k, t, s;\n\n    for (j = 1; j <= n; j = j + 1) {\n        info[1] = j;\n        s = 0;\n        jm1 = j - 1;\n        if (jm1 < 1) {\n            s = a[j][j] - s;\n            if (s <= 0) {\n                break;\n            }\n            a[j][j] = Math.sqrt(s);\n        } else {\n            for (k = 1; k <= jm1; k = k + 1) {\n                //~ t = a[k][j] - ddot(k - 1, a[1][k], 1, a[1][j], 1);\n                t = a[k][j];\n                for (i = 1; i < k; i = i + 1) {\n                    t = t - (a[i][j] * a[i][k]);\n                }\n                t = t / a[k][k];\n                a[k][j] = t;\n                s = s + t * t;\n            }\n            s = a[j][j] - s;\n            if (s <= 0) {\n                break;\n            }\n            a[j][j] = Math.sqrt(s);\n        }\n        info[1] = 0;\n    }\n}\n\nfunction qpgen2(dmat, dvec, fddmat, n, sol, crval, amat,\n    bvec, fdamat, q, meq, iact, nact, iter, work, ierr) {\n\n    var i, j, l, l1, info, it1, iwzv, iwrv, iwrm, iwsv, iwuv, nvl, r, iwnbv,\n        temp, sum, t1, tt, gc, gs, nu,\n        t1inf, t2min,\n        vsmall, tmpa, tmpb,\n        go;\n\n    r = Math.min(n, q);\n    l = 2 * n + (r * (r + 5)) / 2 + 2 * q + 1;\n\n    vsmall = 1.0e-60;\n    do {\n        vsmall = vsmall + vsmall;\n        tmpa = 1 + 0.1 * vsmall;\n        tmpb = 1 + 0.2 * vsmall;\n    } while (tmpa <= 1 || tmpb <= 1);\n\n    for (i = 1; i <= n; i = i + 1) {\n        work[i] = dvec[i];\n    }\n    for (i = n + 1; i <= l; i = i + 1) {\n        work[i] = 0;\n    }\n    for (i = 1; i <= q; i = i + 1) {\n        iact[i] = 0;\n    }\n\n    info = [];\n\n    if (ierr[1] === 0) {\n        dpofa(dmat, fddmat, n, info);\n        if (info[1] !== 0) {\n            ierr[1] = 2;\n            return;\n        }\n        dposl(dmat, fddmat, n, dvec);\n        dpori(dmat, fddmat, n);\n    } else {\n        for (j = 1; j <= n; j = j + 1) {\n            sol[j] = 0;\n            for (i = 1; i <= j; i = i + 1) {\n                sol[j] = sol[j] + dmat[i][j] * dvec[i];\n            }\n        }\n        for (j = 1; j <= n; j = j + 1) {\n            dvec[j] = 0;\n            for (i = j; i <= n; i = i + 1) {\n                dvec[j] = dvec[j] + dmat[j][i] * sol[i];\n            }\n        }\n    }\n\n    crval[1] = 0;\n    for (j = 1; j <= n; j = j + 1) {\n        sol[j] = dvec[j];\n        crval[1] = crval[1] + work[j] * sol[j];\n        work[j] = 0;\n        for (i = j + 1; i <= n; i = i + 1) {\n            dmat[i][j] = 0;\n        }\n    }\n    crval[1] = -crval[1] / 2;\n    ierr[1] = 0;\n\n    iwzv = n;\n    iwrv = iwzv + n;\n    iwuv = iwrv + r;\n    iwrm = iwuv + r + 1;\n    iwsv = iwrm + (r * (r + 1)) / 2;\n    iwnbv = iwsv + q;\n\n    for (i = 1; i <= q; i = i + 1) {\n        sum = 0;\n        for (j = 1; j <= n; j = j + 1) {\n            sum = sum + amat[j][i] * amat[j][i];\n        }\n        work[iwnbv + i] = Math.sqrt(sum);\n    }\n    nact = 0;\n    iter[1] = 0;\n    iter[2] = 0;\n\n    function fn_goto_50() {\n        iter[1] = iter[1] + 1;\n\n        l = iwsv;\n        for (i = 1; i <= q; i = i + 1) {\n            l = l + 1;\n            sum = -bvec[i];\n            for (j = 1; j <= n; j = j + 1) {\n                sum = sum + amat[j][i] * sol[j];\n            }\n            if (Math.abs(sum) < vsmall) {\n                sum = 0;\n            }\n            if (i > meq) {\n                work[l] = sum;\n            } else {\n                work[l] = -Math.abs(sum);\n                if (sum > 0) {\n                    for (j = 1; j <= n; j = j + 1) {\n                        amat[j][i] = -amat[j][i];\n                    }\n                    bvec[i] = -bvec[i];\n                }\n            }\n        }\n\n        for (i = 1; i <= nact; i = i + 1) {\n            work[iwsv + iact[i]] = 0;\n        }\n\n        nvl = 0;\n        temp = 0;\n        for (i = 1; i <= q; i = i + 1) {\n            if (work[iwsv + i] < temp * work[iwnbv + i]) {\n                nvl = i;\n                temp = work[iwsv + i] / work[iwnbv + i];\n            }\n        }\n        if (nvl === 0) {\n            return 999;\n        }\n\n        return 0;\n    }\n\n    function fn_goto_55() {\n        for (i = 1; i <= n; i = i + 1) {\n            sum = 0;\n            for (j = 1; j <= n; j = j + 1) {\n                sum = sum + dmat[j][i] * amat[j][nvl];\n            }\n            work[i] = sum;\n        }\n\n        l1 = iwzv;\n        for (i = 1; i <= n; i = i + 1) {\n            work[l1 + i] = 0;\n        }\n        for (j = nact + 1; j <= n; j = j + 1) {\n            for (i = 1; i <= n; i = i + 1) {\n                work[l1 + i] = work[l1 + i] + dmat[i][j] * work[j];\n            }\n        }\n\n        t1inf = true;\n        for (i = nact; i >= 1; i = i - 1) {\n            sum = work[i];\n            l = iwrm + (i * (i + 3)) / 2;\n            l1 = l - i;\n            for (j = i + 1; j <= nact; j = j + 1) {\n                sum = sum - work[l] * work[iwrv + j];\n                l = l + j;\n            }\n            sum = sum / work[l1];\n            work[iwrv + i] = sum;\n            if (iact[i] < meq) {\n                // continue;\n                break;\n            }\n            if (sum < 0) {\n                // continue;\n                break;\n            }\n            t1inf = false;\n            it1 = i;\n        }\n\n        if (!t1inf) {\n            t1 = work[iwuv + it1] / work[iwrv + it1];\n            for (i = 1; i <= nact; i = i + 1) {\n                if (iact[i] < meq) {\n                    // continue;\n                    break;\n                }\n                if (work[iwrv + i] < 0) {\n                    // continue;\n                    break;\n                }\n                temp = work[iwuv + i] / work[iwrv + i];\n                if (temp < t1) {\n                    t1 = temp;\n                    it1 = i;\n                }\n            }\n        }\n\n        sum = 0;\n        for (i = iwzv + 1; i <= iwzv + n; i = i + 1) {\n            sum = sum + work[i] * work[i];\n        }\n        if (Math.abs(sum) <= vsmall) {\n            if (t1inf) {\n                ierr[1] = 1;\n                // GOTO 999\n                return 999;\n            } else {\n                for (i = 1; i <= nact; i = i + 1) {\n                    work[iwuv + i] = work[iwuv + i] - t1 * work[iwrv + i];\n                }\n                work[iwuv + nact + 1] = work[iwuv + nact + 1] + t1;\n                // GOTO 700\n                return 700;\n            }\n        } else {\n            sum = 0;\n            for (i = 1; i <= n; i = i + 1) {\n                sum = sum + work[iwzv + i] * amat[i][nvl];\n            }\n            tt = -work[iwsv + nvl] / sum;\n            t2min = true;\n            if (!t1inf) {\n                if (t1 < tt) {\n                    tt = t1;\n                    t2min = false;\n                }\n            }\n\n            for (i = 1; i <= n; i = i + 1) {\n                sol[i] = sol[i] + tt * work[iwzv + i];\n                if (Math.abs(sol[i]) < vsmall) {\n                    sol[i] = 0;\n                }\n            }\n\n            crval[1] = crval[1] + tt * sum * (tt / 2 + work[iwuv + nact + 1]);\n            for (i = 1; i <= nact; i = i + 1) {\n                work[iwuv + i] = work[iwuv + i] - tt * work[iwrv + i];\n            }\n            work[iwuv + nact + 1] = work[iwuv + nact + 1] + tt;\n\n            if (t2min) {\n                nact = nact + 1;\n                iact[nact] = nvl;\n\n                l = iwrm + ((nact - 1) * nact) / 2 + 1;\n                for (i = 1; i <= nact - 1; i = i + 1) {\n                    work[l] = work[i];\n                    l = l + 1;\n                }\n\n                if (nact === n) {\n                    work[l] = work[n];\n                } else {\n                    for (i = n; i >= nact + 1; i = i - 1) {\n                        if (work[i] === 0) {\n                            // continue;\n                            break;\n                        }\n                        gc = Math.max(Math.abs(work[i - 1]), Math.abs(work[i]));\n                        gs = Math.min(Math.abs(work[i - 1]), Math.abs(work[i]));\n                        if (work[i - 1] >= 0) {\n                            temp = Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n                        } else {\n                            temp = -Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n                        }\n                        gc = work[i - 1] / temp;\n                        gs = work[i] / temp;\n\n                        if (gc === 1) {\n                            // continue;\n                            break;\n                        }\n                        if (gc === 0) {\n                            work[i - 1] = gs * temp;\n                            for (j = 1; j <= n; j = j + 1) {\n                                temp = dmat[j][i - 1];\n                                dmat[j][i - 1] = dmat[j][i];\n                                dmat[j][i] = temp;\n                            }\n                        } else {\n                            work[i - 1] = temp;\n                            nu = gs / (1 + gc);\n                            for (j = 1; j <= n; j = j + 1) {\n                                temp = gc * dmat[j][i - 1] + gs * dmat[j][i];\n                                dmat[j][i] = nu * (dmat[j][i - 1] + temp) - dmat[j][i];\n                                dmat[j][i - 1] = temp;\n\n                            }\n                        }\n                    }\n                    work[l] = work[nact];\n                }\n            } else {\n                sum = -bvec[nvl];\n                for (j = 1; j <= n; j = j + 1) {\n                    sum = sum + sol[j] * amat[j][nvl];\n                }\n                if (nvl > meq) {\n                    work[iwsv + nvl] = sum;\n                } else {\n                    work[iwsv + nvl] = -Math.abs(sum);\n                    if (sum > 0) {\n                        for (j = 1; j <= n; j = j + 1) {\n                            amat[j][nvl] = -amat[j][nvl];\n                        }\n                        bvec[nvl] = -bvec[nvl];\n                    }\n                }\n                // GOTO 700\n                return 700;\n            }\n        }\n\n        return 0;\n    }\n\n    function fn_goto_797() {\n        l = iwrm + (it1 * (it1 + 1)) / 2 + 1;\n        l1 = l + it1;\n        if (work[l1] === 0) {\n            // GOTO 798\n            return 798;\n        }\n        gc = Math.max(Math.abs(work[l1 - 1]), Math.abs(work[l1]));\n        gs = Math.min(Math.abs(work[l1 - 1]), Math.abs(work[l1]));\n        if (work[l1 - 1] >= 0) {\n            temp = Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n        } else {\n            temp = -Math.abs(gc * Math.sqrt(1 + gs * gs / (gc * gc)));\n        }\n        gc = work[l1 - 1] / temp;\n        gs = work[l1] / temp;\n\n        if (gc === 1) {\n            // GOTO 798\n            return 798;\n        }\n        if (gc === 0) {\n            for (i = it1 + 1; i <= nact; i = i + 1) {\n                temp = work[l1 - 1];\n                work[l1 - 1] = work[l1];\n                work[l1] = temp;\n                l1 = l1 + i;\n            }\n            for (i = 1; i <= n; i = i + 1) {\n                temp = dmat[i][it1];\n                dmat[i][it1] = dmat[i][it1 + 1];\n                dmat[i][it1 + 1] = temp;\n            }\n        } else {\n            nu = gs / (1 + gc);\n            for (i = it1 + 1; i <= nact; i = i + 1) {\n                temp = gc * work[l1 - 1] + gs * work[l1];\n                work[l1] = nu * (work[l1 - 1] + temp) - work[l1];\n                work[l1 - 1] = temp;\n                l1 = l1 + i;\n            }\n            for (i = 1; i <= n; i = i + 1) {\n                temp = gc * dmat[i][it1] + gs * dmat[i][it1 + 1];\n                dmat[i][it1 + 1] = nu * (dmat[i][it1] + temp) - dmat[i][it1 + 1];\n                dmat[i][it1] = temp;\n            }\n        }\n\n        return 0;\n    }\n\n    function fn_goto_798() {\n        l1 = l - it1;\n        for (i = 1; i <= it1; i = i + 1) {\n            work[l1] = work[l];\n            l = l + 1;\n            l1 = l1 + 1;\n        }\n\n        work[iwuv + it1] = work[iwuv + it1 + 1];\n        iact[it1] = iact[it1 + 1];\n        it1 = it1 + 1;\n        if (it1 < nact) {\n            // GOTO 797\n            return 797;\n        }\n\n        return 0;\n    }\n\n    function fn_goto_799() {\n        work[iwuv + nact] = work[iwuv + nact + 1];\n        work[iwuv + nact + 1] = 0;\n        iact[nact] = 0;\n        nact = nact - 1;\n        iter[2] = iter[2] + 1;\n\n        return 0;\n    }\n\n    go = 0;\n    while (true) {\n        go = fn_goto_50();\n        if (go === 999) {\n            return;\n        }\n        while (true) {\n            go = fn_goto_55();\n            if (go === 0) {\n                break;\n            }\n            if (go === 999) {\n                return;\n            }\n            if (go === 700) {\n                if (it1 === nact) {\n                    fn_goto_799();\n                } else {\n                    while (true) {\n                        fn_goto_797();\n                        go = fn_goto_798();\n                        if (go !== 797) {\n                            break;\n                        }\n                    }\n                    fn_goto_799();\n                }\n            }\n        }\n    }\n\n}\n\nfunction solveQP(Dmat, dvec, Amat, bvec, meq, factorized) {\n    Dmat = base0to1(Dmat);\n    dvec = base0to1(dvec);\n    Amat = base0to1(Amat);\n    var i, n, q,\n        nact, r,\n        crval = [], iact = [], sol = [], work = [], iter = [],\n        message;\n\n    meq = meq || 0;\n    factorized = factorized ? base0to1(factorized) : [undefined, 0];\n    bvec = bvec ? base0to1(bvec) : [];\n\n    // In Fortran the array index starts from 1\n    n = Dmat.length - 1;\n    q = Amat[1].length - 1;\n\n    if (!bvec) {\n        for (i = 1; i <= q; i = i + 1) {\n            bvec[i] = 0;\n        }\n    }\n    for (i = 1; i <= q; i = i + 1) {\n        iact[i] = 0;\n    }\n    nact = 0;\n    r = Math.min(n, q);\n    for (i = 1; i <= n; i = i + 1) {\n        sol[i] = 0;\n    }\n    crval[1] = 0;\n    for (i = 1; i <= (2 * n + (r * (r + 5)) / 2 + 2 * q + 1); i = i + 1) {\n        work[i] = 0;\n    }\n    for (i = 1; i <= 2; i = i + 1) {\n        iter[i] = 0;\n    }\n\n    qpgen2(Dmat, dvec, n, n, sol, crval, Amat,\n        bvec, n, q, meq, iact, nact, iter, work, factorized);\n\n    message = \"\";\n    if (factorized[1] === 1) {\n        message = \"constraints are inconsistent, no solution!\";\n    }\n    if (factorized[1] === 2) {\n        message = \"matrix D in quadratic function is not positive definite!\";\n    }\n\n    return {\n        solution: base1to0(sol),\n        value: base1to0(crval),\n        unconstrained_solution: base1to0(dvec),\n        iterations: base1to0(iter),\n        iact: base1to0(iact),\n        message: message\n    };\n}\nexports.solveQP = solveQP;\n}(numeric));\n/*\r\nShanti Rao sent me this routine by private email. I had to modify it\r\nslightly to work on Arrays instead of using a Matrix object.\r\nIt is apparently translated from http://stitchpanorama.sourceforge.net/Python/svd.py\r\n*/\r\n\r\nnumeric.svd= function svd(A) {\r\n    var temp;\r\n//Compute the thin SVD from G. H. Golub and C. Reinsch, Numer. Math. 14, 403-420 (1970)\r\n\tvar prec= numeric.epsilon; //Math.pow(2,-52) // assumes double prec\r\n\tvar tolerance= 1.e-64/prec;\r\n\tvar itmax= 50;\r\n\tvar c=0;\r\n\tvar i=0;\r\n\tvar j=0;\r\n\tvar k=0;\r\n\tvar l=0;\r\n\t\r\n\tvar u= numeric.clone(A);\r\n\tvar m= u.length;\r\n\t\r\n\tvar n= u[0].length;\r\n\t\r\n\tif (m < n) throw \"Need more rows than columns\"\r\n\t\r\n\tvar e = new Array(n);\r\n\tvar q = new Array(n);\r\n\tfor (i=0; i<n; i++) e[i] = q[i] = 0.0;\r\n\tvar v = numeric.rep([n,n],0);\r\n//\tv.zero();\r\n\t\r\n \tfunction pythag(a,b)\r\n \t{\r\n\t\ta = Math.abs(a)\r\n\t\tb = Math.abs(b)\r\n\t\tif (a > b)\r\n\t\t\treturn a*Math.sqrt(1.0+(b*b/a/a))\r\n\t\telse if (b == 0.0) \r\n\t\t\treturn a\r\n\t\treturn b*Math.sqrt(1.0+(a*a/b/b))\r\n\t}\r\n\r\n\t//Householder's reduction to bidiagonal form\r\n\r\n\tvar f= 0.0;\r\n\tvar g= 0.0;\r\n\tvar h= 0.0;\r\n\tvar x= 0.0;\r\n\tvar y= 0.0;\r\n\tvar z= 0.0;\r\n\tvar s= 0.0;\r\n\t\r\n\tfor (i=0; i < n; i++)\r\n\t{\t\r\n\t\te[i]= g;\r\n\t\ts= 0.0;\r\n\t\tl= i+1;\r\n\t\tfor (j=i; j < m; j++) \r\n\t\t\ts += (u[j][i]*u[j][i]);\r\n\t\tif (s <= tolerance)\r\n\t\t\tg= 0.0;\r\n\t\telse\r\n\t\t{\t\r\n\t\t\tf= u[i][i];\r\n\t\t\tg= Math.sqrt(s);\r\n\t\t\tif (f >= 0.0) g= -g;\r\n\t\t\th= f*g-s\r\n\t\t\tu[i][i]=f-g;\r\n\t\t\tfor (j=l; j < n; j++)\r\n\t\t\t{\r\n\t\t\t\ts= 0.0\r\n\t\t\t\tfor (k=i; k < m; k++) \r\n\t\t\t\t\ts += u[k][i]*u[k][j]\r\n\t\t\t\tf= s/h\r\n\t\t\t\tfor (k=i; k < m; k++) \r\n\t\t\t\t\tu[k][j]+=f*u[k][i]\r\n\t\t\t}\r\n\t\t}\r\n\t\tq[i]= g\r\n\t\ts= 0.0\r\n\t\tfor (j=l; j < n; j++) \r\n\t\t\ts= s + u[i][j]*u[i][j]\r\n\t\tif (s <= tolerance)\r\n\t\t\tg= 0.0\r\n\t\telse\r\n\t\t{\t\r\n\t\t\tf= u[i][i+1]\r\n\t\t\tg= Math.sqrt(s)\r\n\t\t\tif (f >= 0.0) g= -g\r\n\t\t\th= f*g - s\r\n\t\t\tu[i][i+1] = f-g;\r\n\t\t\tfor (j=l; j < n; j++) e[j]= u[i][j]/h\r\n\t\t\tfor (j=l; j < m; j++)\r\n\t\t\t{\t\r\n\t\t\t\ts=0.0\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\ts += (u[j][k]*u[i][k])\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\tu[j][k]+=s*e[k]\r\n\t\t\t}\t\r\n\t\t}\r\n\t\ty= Math.abs(q[i])+Math.abs(e[i])\r\n\t\tif (y>x) \r\n\t\t\tx=y\r\n\t}\r\n\t\r\n\t// accumulation of right hand gtransformations\r\n\tfor (i=n-1; i != -1; i+= -1)\r\n\t{\t\r\n\t\tif (g != 0.0)\r\n\t\t{\r\n\t\t \th= g*u[i][i+1]\r\n\t\t\tfor (j=l; j < n; j++) \r\n\t\t\t\tv[j][i]=u[i][j]/h\r\n\t\t\tfor (j=l; j < n; j++)\r\n\t\t\t{\t\r\n\t\t\t\ts=0.0\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\ts += u[i][k]*v[k][j]\r\n\t\t\t\tfor (k=l; k < n; k++) \r\n\t\t\t\t\tv[k][j]+=(s*v[k][i])\r\n\t\t\t}\t\r\n\t\t}\r\n\t\tfor (j=l; j < n; j++)\r\n\t\t{\r\n\t\t\tv[i][j] = 0;\r\n\t\t\tv[j][i] = 0;\r\n\t\t}\r\n\t\tv[i][i] = 1;\r\n\t\tg= e[i]\r\n\t\tl= i\r\n\t}\r\n\t\r\n\t// accumulation of left hand transformations\r\n\tfor (i=n-1; i != -1; i+= -1)\r\n\t{\t\r\n\t\tl= i+1\r\n\t\tg= q[i]\r\n\t\tfor (j=l; j < n; j++) \r\n\t\t\tu[i][j] = 0;\r\n\t\tif (g != 0.0)\r\n\t\t{\r\n\t\t\th= u[i][i]*g\r\n\t\t\tfor (j=l; j < n; j++)\r\n\t\t\t{\r\n\t\t\t\ts=0.0\r\n\t\t\t\tfor (k=l; k < m; k++) s += u[k][i]*u[k][j];\r\n\t\t\t\tf= s/h\r\n\t\t\t\tfor (k=i; k < m; k++) u[k][j]+=f*u[k][i];\r\n\t\t\t}\r\n\t\t\tfor (j=i; j < m; j++) u[j][i] = u[j][i]/g;\r\n\t\t}\r\n\t\telse\r\n\t\t\tfor (j=i; j < m; j++) u[j][i] = 0;\r\n\t\tu[i][i] += 1;\r\n\t}\r\n\t\r\n\t// diagonalization of the bidiagonal form\r\n\tprec= prec*x\r\n\tfor (k=n-1; k != -1; k+= -1)\r\n\t{\r\n\t\tfor (var iteration=0; iteration < itmax; iteration++)\r\n\t\t{\t// test f splitting\r\n\t\t\tvar test_convergence = false\r\n\t\t\tfor (l=k; l != -1; l+= -1)\r\n\t\t\t{\t\r\n\t\t\t\tif (Math.abs(e[l]) <= prec)\r\n\t\t\t\t{\ttest_convergence= true\r\n\t\t\t\t\tbreak \r\n\t\t\t\t}\r\n\t\t\t\tif (Math.abs(q[l-1]) <= prec)\r\n\t\t\t\t\tbreak \r\n\t\t\t}\r\n\t\t\tif (!test_convergence)\r\n\t\t\t{\t// cancellation of e[l] if l>0\r\n\t\t\t\tc= 0.0\r\n\t\t\t\ts= 1.0\r\n\t\t\t\tvar l1= l-1\r\n\t\t\t\tfor (i =l; i<k+1; i++)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tf= s*e[i]\r\n\t\t\t\t\te[i]= c*e[i]\r\n\t\t\t\t\tif (Math.abs(f) <= prec)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tg= q[i]\r\n\t\t\t\t\th= pythag(f,g)\r\n\t\t\t\t\tq[i]= h\r\n\t\t\t\t\tc= g/h\r\n\t\t\t\t\ts= -f/h\r\n\t\t\t\t\tfor (j=0; j < m; j++)\r\n\t\t\t\t\t{\t\r\n\t\t\t\t\t\ty= u[j][l1]\r\n\t\t\t\t\t\tz= u[j][i]\r\n\t\t\t\t\t\tu[j][l1] =  y*c+(z*s)\r\n\t\t\t\t\t\tu[j][i] = -y*s+(z*c)\r\n\t\t\t\t\t} \r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\t// test f convergence\r\n\t\t\tz= q[k]\r\n\t\t\tif (l== k)\r\n\t\t\t{\t//convergence\r\n\t\t\t\tif (z<0.0)\r\n\t\t\t\t{\t//q[k] is made non-negative\r\n\t\t\t\t\tq[k]= -z\r\n\t\t\t\t\tfor (j=0; j < n; j++)\r\n\t\t\t\t\t\tv[j][k] = -v[j][k]\r\n\t\t\t\t}\r\n\t\t\t\tbreak  //break out of iteration loop and move on to next k value\r\n\t\t\t}\r\n\t\t\tif (iteration >= itmax-1)\r\n\t\t\t\tthrow 'Error: no convergence.'\r\n\t\t\t// shift from bottom 2x2 minor\r\n\t\t\tx= q[l]\r\n\t\t\ty= q[k-1]\r\n\t\t\tg= e[k-1]\r\n\t\t\th= e[k]\r\n\t\t\tf= ((y-z)*(y+z)+(g-h)*(g+h))/(2.0*h*y)\r\n\t\t\tg= pythag(f,1.0)\r\n\t\t\tif (f < 0.0)\r\n\t\t\t\tf= ((x-z)*(x+z)+h*(y/(f-g)-h))/x\r\n\t\t\telse\r\n\t\t\t\tf= ((x-z)*(x+z)+h*(y/(f+g)-h))/x\r\n\t\t\t// next QR transformation\r\n\t\t\tc= 1.0\r\n\t\t\ts= 1.0\r\n\t\t\tfor (i=l+1; i< k+1; i++)\r\n\t\t\t{\t\r\n\t\t\t\tg= e[i]\r\n\t\t\t\ty= q[i]\r\n\t\t\t\th= s*g\r\n\t\t\t\tg= c*g\r\n\t\t\t\tz= pythag(f,h)\r\n\t\t\t\te[i-1]= z\r\n\t\t\t\tc= f/z\r\n\t\t\t\ts= h/z\r\n\t\t\t\tf= x*c+g*s\r\n\t\t\t\tg= -x*s+g*c\r\n\t\t\t\th= y*s\r\n\t\t\t\ty= y*c\r\n\t\t\t\tfor (j=0; j < n; j++)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tx= v[j][i-1]\r\n\t\t\t\t\tz= v[j][i]\r\n\t\t\t\t\tv[j][i-1] = x*c+z*s\r\n\t\t\t\t\tv[j][i] = -x*s+z*c\r\n\t\t\t\t}\r\n\t\t\t\tz= pythag(f,h)\r\n\t\t\t\tq[i-1]= z\r\n\t\t\t\tc= f/z\r\n\t\t\t\ts= h/z\r\n\t\t\t\tf= c*g+s*y\r\n\t\t\t\tx= -s*g+c*y\r\n\t\t\t\tfor (j=0; j < m; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\ty= u[j][i-1]\r\n\t\t\t\t\tz= u[j][i]\r\n\t\t\t\t\tu[j][i-1] = y*c+z*s\r\n\t\t\t\t\tu[j][i] = -y*s+z*c\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\te[l]= 0.0\r\n\t\t\te[k]= f\r\n\t\t\tq[k]= x\r\n\t\t} \r\n\t}\r\n\t\t\r\n\t//vt= transpose(v)\r\n\t//return (u,q,vt)\r\n\tfor (i=0;i<q.length; i++) \r\n\t  if (q[i] < prec) q[i] = 0\r\n\t  \r\n\t//sort eigenvalues\t\r\n\tfor (i=0; i< n; i++)\r\n\t{\t \r\n\t//writeln(q)\r\n\t for (j=i-1; j >= 0; j--)\r\n\t {\r\n\t  if (q[j] < q[i])\r\n\t  {\r\n\t//  writeln(i,'-',j)\r\n\t   c = q[j]\r\n\t   q[j] = q[i]\r\n\t   q[i] = c\r\n\t   for(k=0;k<u.length;k++) { temp = u[k][i]; u[k][i] = u[k][j]; u[k][j] = temp; }\r\n\t   for(k=0;k<v.length;k++) { temp = v[k][i]; v[k][i] = v[k][j]; v[k][j] = temp; }\r\n//\t   u.swapCols(i,j)\r\n//\t   v.swapCols(i,j)\r\n\t   i = j\t   \r\n\t  }\r\n\t }\t\r\n\t}\r\n\t\r\n\treturn {U:u,S:q,V:v}\r\n};\r\n\r\n","<svelte:options tag=\"fds-image-transform-corners\"></svelte:options>\n<script>\n  import {warpImage} from './warpImage'\n  import numeric from 'numeric';\n  import {onMount} from 'svelte'\n\n\n  export let imageurl = '';\n  let imageel;\n  export let position;\n  export let resultCanvas;\n  export let resultdim;\n  export let layerimagedata;\n  export let zoom = 100;\n  export let ratio = window.devicePixelRatio;\n  export let opacity = 100;\n  if (globalThis.gyre && globalThis.gyre.paletteValues.selectedLayer) opacity = globalThis.gyre.paletteValues.selectedLayer.opacity;\n  if (globalThis.gyre) layerimagedata = globalThis.gyre.paletteValues.selectedLayer;\n  if (globalThis.gyre) zoom = globalThis.gyre?.canvas.zoom;\n  if (globalThis.gyre) imageurl = layerimagedata.url;\n\n  let p = parseFloat(zoom) / 100 / ratio\n\n  // Rotation angle in degrees\n  let rotationAngle = 0;\n\n  // Initial corner positions (unrotated)\n  let originalCorners = [];\n\n  let noscalecorners = [];\n\n  // User-adjustable corners (initialize to originalCorners)\n  let corners = [...originalCorners];\n\n  let isDragging = false;\n  let selectedCorner = null;\n  let container;\n  let transformMatrix = ''; // Reactive variable for the transform\n\n  function reCalc(num) {\n    let newCoord = num / p;\n    return newCoord\n  }\n\n\n  $: if (globalThis.gyre?.canvas.zoom) console.log(\"zoooom\", globalThis.gyre?.canvas.zoom);\n\n  $: if (container && !position && layerimagedata){\n    position = {}\n    setPosition();\n    update();\n  }\n\n/*\n  $: if (container && position) {\n\n  }\n*/\n\n  onMount(() => {\n    resultCanvas = document.createElement('canvas');\n\n  })\n\n\n  export function refresh() {\n    if (globalThis.gyre && globalThis.gyre.paletteValues.selectedLayer) opacity = globalThis.gyre.paletteValues.selectedLayer.opacity;\n    if (globalThis.gyre) layerimagedata = globalThis.gyre.paletteValues.selectedLayer;\n    if (globalThis.gyre) zoom = globalThis.gyre?.canvas.zoom;\n    if (globalThis.gyre) imageurl = layerimagedata.url;\n    p = parseFloat(zoom) / 100 / ratio\n    setPosition();\n    update();\n  }\n\n  function setPosition() {\n    position.x = layerimagedata._x;\n    position.y = layerimagedata._y;\n    position.width = layerimagedata._width;\n    position.height = layerimagedata._height;\n  }\n\n  function update() {\n\n    positionToCorners();\n    updateTransform();\n    container.style.top = layerimagedata._y + \"px\";\n    container.style.left = layerimagedata._x + \"px\";\n    container.style.width = layerimagedata._width + \"px\";\n    container.style.height = layerimagedata._height + \"px\";\n  }\n\n\n  function positionToCorners() {\n    originalCorners = [\n      {x: 0, y: 0},        // top-left\n      {x: position.width, y: 0},      // top-right\n      {x: position.width, y: position.height},    // bottom-right\n      {x: 0, y: position.height}       // bottom-left\n    ];\n\n\n    if(noscalecorners.length){\n      corners = noscalecorners.map((corner) =>{\n                       return {x:(corner.x*p), y:(corner.y*p)}\n      });\n    } else {\n      corners = [...originalCorners];\n    }\n\n\n    noscalecorners = [\n      {x: 0, y: 0},        // top-left\n      {x: parseInt(position.width/p), y: 0},      // top-right\n      {x: parseInt(position.width/p), y: parseInt(position.height/p)},    // bottom-right\n      {x: 0, y: parseInt(position.height/p)}       // bottom-left\n    ];\n\n\n    rotationAngle = position.rotation || 0;\n  }\n\n\n  function getCenterFromCorners(corners) {\n    // Top-left corner is the first element\n    const topLeft = corners[0];\n    // Bottom-right corner is the third element\n    const bottomRight = corners[2];\n    const centerX = (topLeft.x + bottomRight.x) / 2;\n    const centerY = (topLeft.y + bottomRight.y) / 2;\n    return [centerX, centerY];\n  }\n\n  // Helper function to calculate the perspective transformation matrix\n  function getPerspectiveTransformMatrix(src, dst, angle) {\n\n    // Convert angle to radians\n    const radians = -angle;\n    //const radians = (Math.PI / 180) * angle;\n    const cosA = Math.cos(radians);\n    const sinA = Math.sin(radians);\n\n    // Rotate source points around the center\n    let [centerX, centerY] = getCenterFromCorners(src);\n\n    const rotatedSrc = src.map(({x, y}) => {\n      const dx = x - centerX;\n      const dy = y - centerY;\n      const xRot = dx * cosA - dy * sinA + centerX;\n      const yRot = dx * sinA + dy * cosA + centerY;\n      return {x: xRot, y: yRot};\n    });\n\n    const matrix = [];\n    for (let i = 0; i < 8; i++) matrix[i] = [];\n\n    for (let i = 0; i < 4; i++) {\n      matrix[i][0] = matrix[i + 4][3] = rotatedSrc[i].x;\n      matrix[i][1] = matrix[i + 4][4] = rotatedSrc[i].y;\n      matrix[i][2] = matrix[i + 4][5] = 1;\n      matrix[i][3] = matrix[i][4] = matrix[i][5] = 0;\n      matrix[i + 4][0] = matrix[i + 4][1] = matrix[i + 4][2] = 0;\n      matrix[i][6] = -rotatedSrc[i].x * dst[i].x;\n      matrix[i][7] = -rotatedSrc[i].y * dst[i].x;\n      matrix[i + 4][6] = -rotatedSrc[i].x * dst[i].y;\n      matrix[i + 4][7] = -rotatedSrc[i].y * dst[i].y;\n    }\n\n    const results = [\n      dst[0].x,\n      dst[1].x,\n      dst[2].x,\n      dst[3].x,\n      dst[0].y,\n      dst[1].y,\n      dst[2].y,\n      dst[3].y\n    ];\n\n    // Solving the system of linear equations to find the transformation matrix\n    const h = numeric.solve(matrix, results).concat(1);\n\n    return `matrix3d(${h[0]}, ${h[3]}, 0, ${h[6]}, ${h[1]}, ${h[4]}, 0, ${h[7]}, 0, 0, 1, 0, ${h[2]}, ${h[5]}, 0, 1)`;\n  }\n\n\n  function handleMouseDown(index, event) {\n    isDragging = true;\n    selectedCorner = index;\n  }\n\n  function handleMouseUp() {\n    isDragging = false;\n    selectedCorner = null;\n  }\n\n  function handleMouseMove(event) {\n    if (!isDragging || selectedCorner === null) return;\n\n    const rect = container.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    noscalecorners = noscalecorners.map((corner, index) =>\n            index === selectedCorner\n                    ? {x:(x/p), y:(y/p)}\n                    : corner\n    );\n\n    corners = corners.map((corner, index) =>\n            index === selectedCorner\n                    ? {x, y}\n                    : corner\n    );\n\n    // Update the transform matrix when the corners are moved\n    updateTransform();\n  }\n\n  function updateTransform() {\n    const transform = getPerspectiveTransformMatrix(originalCorners, corners, rotationAngle);\n    transformMatrix = transform;\n  }\n\n\n  function makeImage() {\n\n    let scaledcorners = corners.map((el) => {\n      el.x = reCalc(el.x)\n      el.y = reCalc(el.y)\n      return el;\n    })\n    warpImage(image, scaledcorners, resultCanvas, rotationAngle);\n    var dminX = Math.min(...scaledcorners.map(p => p.x));\n    var dmaxX = Math.max(...scaledcorners.map(p => p.x));\n    var dminY = Math.min(...scaledcorners.map(p => p.y));\n    var dmaxY = Math.max(...scaledcorners.map(p => p.y));\n\n    resultdim = {x: dminX, y: dminY, width: dmaxX - dminX, height: dmaxY - dminY}\n\n  }\n\n  let image\n\n  // Update transform when rotationAngle changes\n  $: if (rotationAngle) updateTransform();\n\n\n  export function csstoimage() {\n    makeImage();\n  }\n\n\n</script>\n\n<style>\n\n  .container {\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n    transform: rotate(0rad);\n  }\n\n  img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    transform-origin: top left;\n    user-select: none;\n  }\n\n  image {\n    transform-origin: top left;\n  }\n\n  .corner {\n    position: absolute;\n    width: 10px;\n    height: 10px;\n    background-color: red;\n    border-radius: 50%;\n    cursor: pointer;\n    user-select: none;\n  }\n</style>\n\n<div bind:this={container} class=\"container\">\n  <div style=\"position: relative; width: 100%; height: 100% \">\n    <!-- Apply the transformation to the image -->\n    <img style=\"opacity:{(opacity/100)}; transform: {transformMatrix};\" bind:this={imageel} src={imageurl}>\n\n    {#each corners as {x, y}, index}\n      <div\n              class=\"corner\"\n              style=\"left: {x - 5}px; top: {y - 5}px;\"\n              on:mousedown={() => handleMouseDown(index)}\n      ></div>\n    {/each}\n  </div>\n</div>\n\n<!-- Optional rotation control -->\n\n\n<!--\n<input type=\"range\" min=\"0\" max=\"360\" bind:value={rotationAngle} style=\"margin-top:200px\" />\n<button on:click={makeImage} width=\"800\" height=\"450\">Make Image</button>\n-->\n\n\n<img\n        bind:this={image}\n        src=\"{imageurl}\"\n        style=\"visibility:hidden\"\n/>\n<svelte:window\n        on:pointermove={handleMouseMove}\n        on:pointerup={handleMouseUp}\n/>","/** Dispatch event on click outside of node */\nexport function clickOutside(node) {\n\n    const handleClick = event => {\n        if (node && !node.contains(event.target) && !event.defaultPrevented) {\n            node.dispatchEvent(\n                new CustomEvent('click_outside', node)\n            )\n        }\n    }\n\n    document.addEventListener('click', handleClick, true);\n\n    return {\n        destroy() {\n            document.removeEventListener('click', handleClick, true);\n        }\n    }\n}","<svelte:options tag=\"fds-coord-dialog\"></svelte:options>\n<script>\n    import {get_current_component} from \"svelte/internal\"\n    import {clickOutside} from \"./clickOutside\";\n    import {toollayer} from \"./stores\";\n    import {onMount} from 'svelte'\n    let host = get_current_component().$$.root.host\n    let foldertype = false;\n    export let coordinates = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        rotation: 0\n    }\n\n\n    function change(name, value) {\n        if (name!='flipHorizontal' && name!='flipVertical' && name!='foldermovedone' && name!='foldermovecancel'  && isNaN(value)) return;\n\n        if (name!='foldermovedone' && name!='foldermovecancel' && name!='destructmovetool'){\n            $toollayer[name] = parseInt(value);\n        }\n\n\n        if (name == 'rotation' || name == 'opacity') {\n            $toollayer[name] = parseFloat(value);\n        }\n        host.dispatchEvent(new CustomEvent(\"change\", {detail: {name: name, value: value}}))\n    }\n\n    $: if ($toollayer) {\n        refresh();\n    }\n\n    $: if(globalThis.gyre && globalThis.gyre.paletteValues.selectedLayer && globalThis.gyre.paletteValues.selectedLayer.type=='folder'){\n        foldertype = true;\n    }\n\n    onMount(() => {\n       return ()=>{\n           change('destructmovetool',1);\n           setTimeout(() => {\n               if(globalThis.gyre && globalThis.gyre.paletteValues.selectedLayer){\n                   //globalThis.gyre.paletteValues.selectedLayer.nocache = false;\n                   globalThis.gyre.layerManager.traverseLayers((layer)=> {\n                       layer.nocache = false;\n                   })\n               }\n           }, 40);\n       }\n    })\n\n\n    function handleClickOutside() {\n        //editcoord=false\n    }\n\n\n    export let editcoord\n\n    export function refresh() {\n        coordinates = $toollayer;\n    }\n</script>\n\n<div class=\"show\" style=\"display: inline-flex;\">\n    {#if coordinates}\n        <div style=\"display:flex;align-items: center\">\n            <!-- svelte-ignore a11y-click-events-have-key-events -->\n            <fds-image-editor-button\n                    icon=\"flipHorizontal\"\n                    title=\"Flip Horizontal\"\n                    on:click={() => {\n                change('flipHorizontal')\n            }}\n            />\n\n            <!-- svelte-ignore a11y-click-events-have-key-events -->\n            <fds-image-editor-button\n                    icon=\"flipVertical\"\n                    title=\"Flip Vertical\"\n                    on:click={() => {\n                  change('flipVertical')\n            }}\n            />\n            <!-- svelte-ignore a11y-click-events-have-key-events -->\n            <fds-image-editor-button type=\"button\"\n                                     on:click={() => { editcoord=!editcoord; change('editcoord',editcoord); }}>\n                Coordinates\n            </fds-image-editor-button>\n            {#if foldertype}\n                <fds-image-editor-button type=\"button\"\n                                         on:click={() => {   change('foldermovedone',1); }}>\n                    Done\n                </fds-image-editor-button>\n                <fds-image-editor-button type=\"button\"\n                                         on:click={() => {   change('foldermovecancel',1); }}>\n                   Cancel\n                </fds-image-editor-button>\n\n\n            {/if}\n\n        </div>\n    {/if}\n\n    {#if editcoord && coordinates }\n        <div class=\"editcoord\" use:clickOutside on:click_outside={handleClickOutside}>\n            <div class=\"formRow\">\n\n                <div class=\"formLine\">\n                    <label for=\"x\" class=\"more-label\">X:</label>\n                    <input value={parseInt(coordinates.x)}\n                           on:change={(e) => {coordinates.x=e.target.value;coordinates=coordinates;change(\"x\",e.target.value) }}\n                           type=\"text\" class=\"formInput\" placeholder=\"\"\n                           style=\"font-size: 12px; width: 220px; display: inline-block;\">\n                </div>\n\n                <div class=\"formLine\">\n                    <label for=\"y\" class=\"more-label\">Y:</label>\n                    <input value={parseInt(coordinates.y)}\n                           on:change={(e) => { coordinates.y=e.target.value;coordinates=coordinates;change(\"y\",e.target.value) }}\n                           type=\"text\" class=\"formInput\" placeholder=\"\"\n                           style=\"font-size: 12px; width: 220px; display: inline-block;\">\n                </div>\n            </div>\n            <div class=\"formRow\">\n                <div class=\"formLine\">\n                    <label for=\"width\" class=\"more-label\">Width:</label>\n                    <input value={parseInt(coordinates.width)}\n                           on:change={(e) => {  coordinates.width=e.target.value;coordinates=coordinates;change(\"width\",e.target.value) }}\n                           type=\"text\" class=\"formInput\" placeholder=\"\"\n                           style=\"font-size: 12px; width: 220px; display: inline-block;\">\n                </div>\n\n                <div class=\"formLine\">\n                    <div class=\"formLine\">\n                        <label for=\"height\" class=\"more-label\">Height:</label>\n                        <input value={parseInt(coordinates.height)}\n                               on:change={(e) => { coordinates.height=e.target.value;coordinates=coordinates;change(\"height\",e.target.value) }}\n                               type=\"text\" class=\"formInput\" placeholder=\"\"\n                               style=\"font-size: 12px; width: 220px; display: inline-block;\">\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"formLine\">\n                <label for=\"rotation\" class=\"more-label\">Rotation:</label>\n                <input value={((coordinates.rotation * 180.0) / Math.PI).toFixed(2)}\n                       on:change={(e) => { coordinates.rotation=e.target.value;coordinates=coordinates;change(\"rotation\", parseInt(e.target.value) * (Math.PI/180)) }}\n                       type=\"text\" class=\"formInput\" placeholder=\"\"\n                       style=\"font-size: 12px; width: 220px; display: inline-block;\">\n            </div>\n\n\n        </div>\n    {/if}\n\n</div>\n\n<style>\n    * {\n        box-sizing: border-box;\n    }\n\n\n    .editcoord {\n        min-width: 330px;\n        min-height: 100px;\n        box-shadow: 0 0 1rem 0 rgba(255, 255, 255, .2);\n        border-radius: 8px;\n        background-color: rgba(0, 0, 0, .65);\n        backdrop-filter: blur(10px);\n        color: rgba(255, 255, 255, 0.6);\n        position: absolute;\n        left: 0px;\n        top: 50px;\n        padding: 14px;\n        font-family: \"Segoe UI\", Roboto, system-ui;\n        z-index: 2000;\n    }\n\n    .formLine {\n        display: flex;\n        align-items: center;\n        margin-bottom: 5px;\n    }\n\n    .formLine label {\n        margin-right: 10px;\n        width: 60px; /* Adjust the width as needed */\n    }\n\n    .formLine input {\n        flex: 1;\n        min-width: 0;\n    }\n\n    .formRow {\n        display: flex;\n        justify-content: space-between;\n        gap: 20px; /* Space between the two sets of inputs */\n        margin-bottom: 20px;\n    }\n\n    .formInput {\n        width: 100%;\n        max-width: 80px;\n        outline: 0;\n        border: 0;\n        border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n        padding: 5px;\n        font-size: 14px;\n        font-weight: normal;\n        border-radius: 3px;\n        color: rgba(255, 255, 255, 0.9);\n        margin-bottom: 10px;\n        display: block;\n        background: none;\n        font-family: system-ui, \"Segoe UI\", Roboto;\n\n    }\n\n    .show {\n        display: block;\n    }\n\n\n</style>","<svelte:options tag=\"fds-four-corners-dialog\"></svelte:options>\n<script>\n    import {get_current_component} from \"svelte/internal\"\n\n    let host = get_current_component().$$.root.host\n\n    function change(name, value) {\n        host.dispatchEvent(new CustomEvent(\"change\", {detail: {name: name, value: value}}))\n    }\n</script>\n\n<div class=\"show\" style=\"display: inline-flex;\">\n\n            <div style=\"display:flex;align-items: center\">\n                <!-- svelte-ignore a11y-click-events-have-key-events -->\n                <fds-image-editor-button type=\"button\" on:click={() => {change('csstoimage'); }}>Done\n                </fds-image-editor-button>\n            </div>\n\n            <div style=\"display:flex;align-items: center\">\n                <!-- svelte-ignore a11y-click-events-have-key-events -->\n                <fds-image-editor-button type=\"button\" on:click={() => {change('changeview',true);}}>Cancel</fds-image-editor-button>\n            </div>\n</div>\n\n<style>\n    * {\n        box-sizing: border-box;\n    }\n\n    .buttoncontainer {\n        margin-top: 10px;\n        margin-bottom: 10px;\n        padding-bottom: 5px;;\n        border-bottom: 1px solid white;\n    }\n\n    button {\n        color: white;\n        background-color: transparent;\n    }\n\n    .editcoord {\n        min-width: 330px;\n        min-height: 100px;\n        box-shadow: 0 0 1rem 0 rgba(255, 255, 255, .2);\n        border-radius: 8px;\n        background-color: rgba(0, 0, 0, .65);\n        backdrop-filter: blur(10px);\n        color: rgba(255, 255, 255, 0.6);\n        position: absolute;\n        left: 0px;\n        top: 50px;\n        padding: 14px;\n        font-family: \"Segoe UI\", Roboto, system-ui;\n        z-index: 2000;\n    }\n\n    .formLine {\n        displaY: block;\n        margin-bottom: 20px;\n    }\n\n    .slider {\n        vertical-align: middle;\n    }\n\n    .values3 {\n        width: 30px;\n        text-align: right;\n        display: inline-block;\n    }\n\n    .formInput {\n        width: 100%;\n        outline: 0;\n        border: 0;\n        border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n        padding: 5px;\n        font-size: 14px;\n        font-weight: normal;\n        border-radius: 3px;\n        color: rgba(255, 255, 255, 0.9);\n        margin-bottom: 10px;\n        display: block;\n        background: none;\n        font-family: system-ui, \"Segoe UI\", Roboto;\n\n    }\n\n    .formInput::placeholder {\n        font-weight: normal;\n        opacity: 0.5;\n        color: rgba(255, 255, 255, 0.7);\n    }\n\n    .formLine {\n        margin-bottom: 5px;\n    }\n\n    .dropdown {\n        position: relative;\n        display: inline-block;\n    }\n\n    .dropdown-content {\n        display: none;\n        position: absolute;\n        background-color: #f1f1f1;\n        min-width: 160px;\n        overflow: auto;\n        box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);\n        z-index: 1;\n        max-height: calc(100vh / 2);\n        margin-top: 5px;\n        border-radius: 6px;\n    }\n\n    .dropdown-content a {\n        color: black;\n        padding: 12px 16px;\n        text-decoration: none;\n        display: block;\n        font-size: 20px;\n    }\n\n    .dropdown a:hover {\n        background-color: #ddd;\n    }\n\n    .show {\n        display: block;\n    }\n\n    .font-preview {\n        display: inline-block;\n        width: 200px;\n        color: black;\n        background-color: white;\n        font-size: 20px;\n        padding: 16px;\n        border: none;\n        cursor: pointer;\n        border-radius: 6px;\n    }\n\n</style>","<svelte:options tag=\"fds-image-transform\"></svelte:options>\n<script>\n    /*\n      A freely user-transformable wrapper component.\n\n      Size, position and rotation can be adjusted via handles or multi-touch gesture.\n      Place content in the default slot.\n      Handles can be overridden via the \"handle\" and \"rotator\" slots.\n\n      The immediate parent must be a positioned element\n      (i.e. styled with \"position: relative/absolute/fixed/etc\").\n    */\n\n    import {onMount} from 'svelte'\n    import vector from './vector.js'\n    import {createEventDispatcher, tick} from 'svelte';\n    import {toollayer} from \"./stores\";\n\n    let endDrag = false;\n    let newlayer\n    import {get_current_component} from \"svelte/internal\";\n    import magneticLinesClass from \"./magneticLines.js\"\n    // eslint-disable-next-line no-unused-vars\n    import FourCornersTransformation from \"./FourCornersTransformation.svelte\"\n\n    let host = get_current_component()\n    // eslint-disable-next-line no-unused-vars\n    import Dialog from './Dialog.svelte'\n    // eslint-disable-next-line no-unused-vars\n    import Dialogf from './DialogFourCorners.svelte'\n\n    const svelteDispatch = createEventDispatcher()\n\n    const dispatch = (name, detail) => {\n        detail = internalposition;\n        $toollayer = internalposition;\n        detail.endDrag = !!endDrag;\n        if (!!endDrag) {\n            endDrag = !endDrag;\n        }\n        name = 'transformchange';\n        // console.log(\"dispatch\",name,detail);\n        svelteDispatch(name, detail);\n        host.dispatchEvent &&\n        host.dispatchEvent(new CustomEvent(name, {detail}));\n    };\n\n\n    // the position at the start of each gesture\n    // transformations are calculated relative to this\n    let startPosition = {\n        x: null,\n        y: null,\n        width: null,\n        height: null,\n        rotation: null\n    }\n\n    $: if($toollayer){\n        refresh();\n    }\n\n    export function refresh() {\n        setInitalPosition();\n        internalposition = $toollayer;\n    }\n\n\n\n    // props\n    //export let position = { x: 0, y: 0, w: 0, h: 0, r: 0 }\n    // Magnetic tolerance distance for snapping\n    const magneticTolerance = 10;\n\n    // Layers array to store all layers\n    export let layers = []\n\n    export let demo = false\n    export let layerimagedata = {};\n    export let internalposition = startPosition;\n    export let position;\n    export let target = null\n    export let container = null\n    export let rotatorEnabled = true // Show a separate handle for rotation\n    export let rotatorBar = false // Draw a line from the rotator handle to the frame\n    export let handleMode = 'resize' // 'resize' or 'rotate'. Controls corner handle behaviour\n    export let lockAspect = false // Is the aspect ratio fixed?\n    export let lockTouchResize = false // Can the size be changed by multitouch gestures?\n    export let captureClicks = true // allow clicks on the content area? if false, clicks fall through\n    export let zoom = 100;\n    export let ratio = window.devicePixelRatio;\n    export let imageurl;\n    export let imagesvg;\n    export let svgcolor;\n    // primitives\n    export let type;\n    export let initialposition;\n\n    let lastzoom\n    let imageel;\n    let transformArea;\n    let transformInProgress = false\n    let magneticLines = [];\n\n\n    function setInitalPosition(){\n        if(!initialposition && internalposition.x!==null) {initialposition=noZoomPosition({...internalposition});}\n\n    }\n\n    function addMagneticLine(side, linePosition, lineOrientation, box) {\n        let ml = new magneticLinesClass()\n        let line = ml.calcMagneticLine(side, linePosition, lineOrientation, box)\n        magneticLines.push(line)\n    }\n\n    // Snapping helpers\n    function getClosestSnappingPosition(layers, newPos, tolerance) {\n        let snappedPosition = {...newPos};\n\n        layers.forEach(layer => {\n            if (layer !== internalposition) {\n                // Horizontal snapping (x-axis)\n                if (Math.abs(newPos.x - layer.x) < tolerance) {\n                    addMagneticLine(\"left\", \"side\", \"vertical\", layer.originalData)\n                    snappedPosition.x = layer.x\n                } else if (Math.abs((newPos.x + newPos.width) - (layer.x + layer.width)) < tolerance) {\n                    addMagneticLine(\"right\", \"side\", \"vertical\", layer.originalData)\n                    snappedPosition.x = layer.x + layer.width - newPos.width\n                } else if (Math.abs((newPos.x + newPos.width / 2) - (layer.x + layer.width / 2)) < tolerance) {\n                    addMagneticLine(\"\", \"center\", \"vertical\", layer.originalData)\n                    snappedPosition.x = layer.x + layer.width / 2 - newPos.width / 2\n                } else if (Math.abs((newPos.x) - (layer.x + layer.width)) < tolerance) {\n                    snappedPosition.x = layer.x + layer.width\n                    addMagneticLine(\"right\", \"side\", \"vertical\", layer.originalData)\n                } else if (Math.abs((newPos.x + newPos.width) - (layer.x)) < tolerance) {\n                    snappedPosition.x = layer.x - newPos.width\n                    addMagneticLine(\"left\", \"side\", \"\", layer.originalData)\n                }\n                // console.log(Math.abs(newPos.y-layer.y))\n                // Vertical snapping (y-axis)\n                if (Math.abs(newPos.y - layer.y) < tolerance) {\n                    snappedPosition.y = layer.y\n                    addMagneticLine(\"top\", \"side\", \"\", layer.originalData)\n                } else if (Math.abs((newPos.y + newPos.height) - (layer.y + layer.height)) < tolerance) {\n                    snappedPosition.y = layer.y + layer.height - newPos.height\n                    addMagneticLine(\"bottom\", \"side\", \"\", layer.originalData)\n                } else if (Math.abs((newPos.y + newPos.height / 2) - (layer.y + layer.height / 2)) < tolerance) {\n                    snappedPosition.y = layer.y + layer.height / 2 - newPos.height / 2\n                    addMagneticLine(\"\", \"center\", \"horizontal\", layer.originalData)\n                } else if (Math.abs((newPos.y) - (layer.y + layer.height)) < tolerance) {\n                    snappedPosition.y = layer.y + layer.height\n                    addMagneticLine(\"bottom\", \"side\", \"\", layer.originalData)\n                } else if (Math.abs((newPos.y + newPos.height) - (layer.y)) < tolerance) {\n                    snappedPosition.y = layer.y - newPos.height\n                    addMagneticLine(\"top\", \"side\", \"\", layer.originalData)\n                }\n            }\n        })\n\n        return snappedPosition\n    }\n\n    // Add logic to detect same rotation layers\n    function getClosestSnappingPositionWithRotation(layers, newPos, tolerance) {\n        let snappedPosition = {...newPos}\n        let noRotationLayers = [];\n        let sameRotationLayers = [];\n\n        // Check if the current rotation ot matche any other layer's rotation or is  0\n        layers.forEach(layer => {\n            if (layer !== internalposition && (layer.rotation !== internalposition.rotation || layer.rotation === 0)) {\n                let l = JSON.parse(JSON.stringify(layer))\n                l.rotation = 0\n                l.originalData = JSON.parse(JSON.stringify(l))\n                noRotationLayers.push(l)\n            }\n        });\n        // First, do snapping like before\n        snappedPosition = getClosestSnappingPosition(noRotationLayers, newPos, tolerance)\n\n        // Check if the current rotation matches any other layer's rotation and isn't 0\n        layers.forEach(layer => {\n            if (layer !== internalposition && layer.rotation === internalposition.rotation && layer.rotation !== 0) {\n                let l = JSON.parse(JSON.stringify(layer))\n                l.originalData = JSON.parse(JSON.stringify(layer)) // add box as it shows on the screen with rotation\n                sameRotationLayers.push(l)\n            }\n        });\n\n        // If we have layers with the same rotation, normalize their positions\n        if (sameRotationLayers.length > 0) {\n            let rotation = sameRotationLayers[0].rotation\n            sameRotationLayers.push(JSON.parse(JSON.stringify(newPos)))\n            let ml = new magneticLinesClass()\n            ml.rotateBoxesToZero(sameRotationLayers, rotation)      // make scenario as rotation is set to 0 for easier snapping logic\n            let normalizedCurrentPos = sameRotationLayers.pop()\n            // Perform snapping on normalized positions\n            let normalizedSnappedPosition = getClosestSnappingPosition(sameRotationLayers, normalizedCurrentPos, tolerance, rotation)\n            // Rotate back the positions\n            if (magneticLines.length) snappedPosition = ml.rotatePositionBackToOriginal(normalizedSnappedPosition, rotation)\n        }\n\n        return snappedPosition\n    }\n\n\n    // Target element is this component (so apply calculated style directly)\n    let selfStyled = false\n    $: {\n        selfStyled = target === element\n    }\n\n    $: if (imagesvg && svgcolor) {\n        imagesvg = imagesvg.replace(\"<svg \", `<svg style=\"fill:${svgcolor}\" `);\n        layerimagedata.url = imageurl = \"data:image/svg+xml;base64,\" + window.btoa(unescape(encodeURIComponent(imagesvg)));\n    }\n\n    $: if (imagesvg && lockAspect) {\n\n        imagesvg = imagesvg.replace(`preserveAspectRatio=\"none\"`, ` `);\n        imagesvg = imagesvg.replace(`class=\"fullwidthheight\"`, ` `);\n\n        layerimagedata.url = imageurl = \"data:image/svg+xml;base64,\" + window.btoa(unescape(encodeURIComponent(imagesvg)));\n    }\n\n    $: if (imagesvg && !lockAspect) {\n        imagesvg = imagesvg.replace(\"<svg \", `<svg preserveAspectRatio=\"none\" class=\"fullwidthheight\" `);\n        layerimagedata.url = imageurl = \"data:image/svg+xml;base64,\" + window.btoa(unescape(encodeURIComponent(imagesvg)));\n    }\n\n    // DOMRects of the component and parent element, and the FreeTransform element itself\n    let containerBounds, bounds, selfBounds\n    // Map of active pointers\n    const pointers = {}\n    // Number of active pointers\n    let pointerCount = 0\n    // References to DOM elements\n    let element, handleTR, handleTL, handleBR, handleBL, rotatorHandle\n    $: if (mounted && imageel && element && layerimagedata && layerimagedata.url) {\n        if (!target) target = element\n        if (!container) container = target.parentNode\n        initImage();\n    }\n\n    onMount(() => {\n        mounted = true;\n        if (!imageel) return\n        initImage();\n        setInitalPosition();\n    })\n\n    let imagealreadyinit\n    let mounted\n\n    function initImage() {\n\n        if (imagealreadyinit) return;\n        imagealreadyinit = true;\n        imageel.onload = () => {\n            internalposition = {\n                x: imageel.x,\n                y: imageel.y,\n                width: imageel.naturalWidth,\n                height: imageel.naturalHeight,\n                rotation: 0\n            }\n            recalculatePosition();\n            onBoundsChange();\n        }\n        if (!target) target = element\n        if (!container) container = target.parentNode\n    }\n\n    function onKeyUp(e) {\n        if (e.keyCode === 16) {\n            //console.log('Shift key is released');\n            lockAspect = false;\n        }\n    }\n\n\n    function onKeyDown(e) {\n        if (e.keyCode === 16) {\n            //console.log('Shift key is released');\n            lockAspect = true;\n        }\n    }\n\n    function noZoomPosition(obj) {\n        let retobj = {};\n        retobj = {...obj};\n        retobj.x = reCalc(obj.x,'rev');\n        retobj.y = reCalc(obj.y,'rev');\n        retobj.width = reCalc(obj.width,'rev');\n        retobj.height = reCalc(obj.height,'rev');\n        return retobj;\n    }\n\n    function recalculatePosition() {\n\n\n        if (layerimagedata?._x || layerimagedata?._x == 0) internalposition.x = layerimagedata._x;\n        if (layerimagedata?._y || layerimagedata?._y == 0) internalposition.y = layerimagedata._y;\n        if (layerimagedata?._width) internalposition.width = (layerimagedata._width);\n        if (layerimagedata?._height) internalposition.height = (layerimagedata._height);\n\n\n        if (layerimagedata?.x || layerimagedata?.x == 0) internalposition.x = reCalc(layerimagedata.x);\n        if (layerimagedata?.y || layerimagedata?.y == 0) internalposition.y = reCalc(layerimagedata.y);\n        if (layerimagedata?.width) internalposition.width = reCalc(layerimagedata.width);\n        if (layerimagedata?.height) internalposition.height = reCalc(layerimagedata.height);\n        if (layerimagedata?.rotation) internalposition.rotation = layerimagedata.rotation;\n\n\n        if (layerimagedata?.rotation) internalposition.r = layerimagedata.rotation;\n\n\n        if ((layerimagedata?._x || layerimagedata?._x == 0) && layerimagedata._imgwidth) {\n            internalposition.x = reCalc(layerimagedata._imgx);\n            internalposition.y = reCalc(layerimagedata._imgy);\n            internalposition.width = reCalc(layerimagedata._imgwidth);\n            internalposition.height = reCalc(layerimagedata._imgheight);\n            delete layerimagedata._imgx;\n            delete layerimagedata._imgy;\n            delete layerimagedata._imgwidth;\n            delete layerimagedata._imgheight;\n        }\n    }\n\n    function reCalc(num,rev) {\n\n        let p = parseFloat(zoom) / 100 / ratio\n\n        let newCoord;\n        if(rev){\n            newCoord = num / p;\n        } else {\n            newCoord = num * p;\n        }\n        return newCoord\n    }\n\n    function isDragging(pointer) {\n        return pointer && pointer.target && pointer.target.type === 'body' && pointerCount === 1\n    }\n\n    function isRotating(pointer) {\n        return pointer && pointer.target && (pointer.target.type === 'rotate' || (pointer.target.type === 'handle' && handleMode === 'rotate'))\n    }\n\n    function isResizing(pointer) {\n        return pointer && pointer.target && pointer.target.type === 'handle'\n    }\n\n    function isFreeTransforming(pointer) {\n        return pointer && pointer.target && pointer.target.type !== 'handle' && pointerCount > 1\n    }\n\n    $: {\n        console.log(\"position changed!!!!\",internalposition);\n        position = noZoomPosition({...internalposition});\n        internalposition.style = stylePosition(internalposition)\n        //onBoundsChange()\n    }\n    /*    $: {\n            if(layerimagedata && layerimagedata.url){\n                console.log(\"layerimagedata.url changed\",layerimagedata.url);\n            }\n        }*/\n\n    $: if (zoom && zoom != lastzoom) {\n        lastzoom = zoom;\n        recalculatePosition();\n        internalposition.style = stylePosition(internalposition)\n    }\n\n    const stylePropMap = {\n        x: 'left',\n        y: 'top',\n        width: 'width',\n        height: 'height'\n    }\n\n    // Convert position to a CSS style string\n    function stylePosition(pos) {\n\n        return 'position: absolute; ' + ['x', 'y', 'width', 'height'].map(prop => {\n            if (pos[prop] != null) return `${stylePropMap[prop]}: ${pos[prop]}px; `\n            else return ''\n        }).join(' ') + `; transform: rotate(${pos.rotation}rad)`\n    }\n\n    // Calculate the changes required for a resize gesture:\n    // Scales the width and height of the component such that the same points in\n    // component-space lie under the pointer and anchor point before and after the\n    // transformation.\n    // Does not preserve aspect ratio.\n    function calcResizeTransform(pointer, anchor) {\n        const rotation = startPosition.rotation\n        const origin = bounds.center\n        const topLeft = vector.sub(origin, {x: (startPosition.width / 2), y: (startPosition.height / 2)})\n        const unrotatedEnd = vector.rotate(pointer.end, -rotation, anchor)\n        const width = unrotatedEnd.x - anchor.x\n        const height = unrotatedEnd.y - anchor.y\n        const newOrigin = vector.add(topLeft, {x: Math.abs(width / 2), y: Math.abs(height / 2)})\n        const unrotatedAnchor = vector.add(newOrigin, {x: -(width / 2), y: -(height / 2)})\n        const newAnchor = vector.rotate(unrotatedAnchor, rotation, newOrigin)\n\n        const translate = vector.sub(anchor, newAnchor)\n        return {width, height, translate}\n    }\n\n    // Calculate the changes required for a free transform gesture:\n    // Given two pointers, the component is scaled, rotated and translated\n    // such that the same points in component-space lie under the pointers\n    // before and after the transformation\\\n    //\n    // Preserves aspect ratio.\n    //\n    // pointerB may be given as a single coord, instead of a { start, end } map,\n    // allowing operations like 'rotate about the center' or 'resize from a corner'\n    // to be performed using the same transform logic\n    //\n    // noRotate=true locks the current component rotation\n    // noScale=true locks the current component width and height\n    function calcFreeTransform(pointerA, pointerB, origin, noRotate, noScale) {\n        // Handle the case where pointerB is a static point\n        const pointerBStart = pointerB.start ? pointerB.start : pointerB\n        const pointerBEnd = pointerB.end ? pointerB.end : pointerB\n\n        const startAB = vector.sub(pointerBStart, pointerA.start)\n        const endAB = vector.sub(pointerBEnd, pointerA.end)\n        const scale = vector.length(endAB) / vector.length(startAB)\n        const rotate = noRotate ? 0 : vector.direction(startAB) - vector.direction(endAB)\n\n        const center = vector.add(vector.rotate(vector.scale(vector.sub(origin, pointerBStart), scale), rotate, {\n            x: 0,\n            y: 0\n        }), pointerBEnd)\n        const translate = vector.sub(center, origin)\n        return {scale: (noScale ? 1 : scale), rotate, translate, center}\n    }\n\n    // Retrieve a DOMRect from the supplied element\n    // and extend with x, y, and center fields\n    function getFullBounds(element) {\n        const elementBounds = element.getBoundingClientRect()\n        elementBounds.x = elementBounds.left\n        elementBounds.y = elementBounds.top\n        elementBounds.center = {\n            x: (elementBounds.left + elementBounds.right) / 2,\n            y: (elementBounds.top + elementBounds.bottom) / 2\n        }\n        return elementBounds\n    }\n\n    export function changePosition() {\n        if (internalposition.opacity != void 0) layerimagedata.opacity = internalposition.opacity;\n        internalposition.style = stylePosition(internalposition);\n        dispatch('positionChanged', internalposition)\n    }\n\n\n    // Apply a partial drag gesture\n    // Simple translation of the component by the same distance as the pointer\n    function doDrag(pointer) {\n        internalposition.y = startPosition.y + (pointer.end.y - pointer.start.y)\n        internalposition.x = startPosition.x + (pointer.end.x - pointer.start.x)\n        let newPos = {\n            x: startPosition.x + (pointer.end.x - pointer.start.x),\n            y: startPosition.y + (pointer.end.y - pointer.start.y),\n            width: internalposition.width,\n            height: internalposition.height\n        };\n\n        // Apply snapping\n        magneticLines = []\n        const snappedPosition = getClosestSnappingPositionWithRotation(layers, newPos, magneticTolerance)\n\n        internalposition.x = snappedPosition.x\n        internalposition.y = snappedPosition.y\n\n    }\n\n    // Calculate and apply a partial resize gesture\n    // Resizes the width/height of a component relative to an anchor point\n    function doResize(pointer, anchor) {\n        const transform = calcResizeTransform(pointer, anchor, bounds.center)\n        internalposition.x = startPosition.x + transform.translate.x\n        internalposition.y = startPosition.y + transform.translate.y\n        internalposition.width = Math.abs(transform.width)\n        internalposition.height = Math.abs(transform.height)\n    }\n\n    // Calculate and apply a partial free transform gesture\n    function doFreeTransform(pointerA, pointerB, noRotate, noScale) {\n        const transform = calcFreeTransform(pointerA, pointerB, bounds.center, noRotate, noScale)\n        internalposition.width = startPosition.width * transform.scale\n        internalposition.height = startPosition.height * transform.scale\n\n        const tlToOrigin = vector.sub(bounds.center, startPosition)\n        const tlvec = vector.add(vector.add(tlToOrigin, transform.translate), {\n            x: -(internalposition.width / 2),\n            y: -(internalposition.height / 2)\n        })\n        internalposition.x = startPosition.x + tlvec.x - containerBounds.left\n        internalposition.y = startPosition.y + tlvec.y - containerBounds.top\n        internalposition.rotation = startPosition.rotation + transform.rotate\n    }\n\n    // Get the target of a given pointer event\n    function getPointerTarget(evt) {\n        if (handleTR.contains(evt.target)) {\n            return {type: 'handle', top: true, right: true}\n        } else if (handleTL.contains(evt.target)) {\n            return {type: 'handle', top: true, left: true}\n        } else if (handleBR.contains(evt.target)) {\n            return {type: 'handle', bottom: true, right: true}\n        } else if (handleBL.contains(evt.target)) {\n            return {type: 'handle', bottom: true, left: true}\n        } else if (rotatorHandle && rotatorHandle.contains(evt.target)) {\n            return {type: 'rotate'}\n        } else return {type: 'body'}\n    }\n\n    function pointerDown(evt) {\n        let pointerTarget = getPointerTarget(evt)\n        let pointer = pointers[evt.pointerId]\n\n        // Add the pointer to active pointers map\n        if (!pointer) {\n            pointerCount++\n            pointer = {\n                id: evt.pointerId,\n                priority: pointerCount - 1,\n                start: {\n                    x: evt.pageX,\n                    y: evt.pageY\n                },\n                end: {\n                    x: evt.pageX,\n                    y: evt.pageY\n                },\n                target: pointerTarget\n            }\n            pointers[evt.pointerId] = pointer\n        } else { // or update, if it's already there\n            pointer.end.x = evt.pageX\n            pointer.end.y = evt.pageY\n            pointer.target = pointerTarget\n        }\n\n        transformInProgress = false\n\n        // If the pointer is enabled (one of the first two active pointers)\n        if (pointer.priority < 2) {\n            bounds = getFullBounds(target)\n            containerBounds = getFullBounds(container)\n\n            // There's another active enabled pointer\n            if (pointerCount > 1) {\n                // Starting a new multitouch gesture\n                Object.values(pointers).forEach(pointer => {\n                    if (pointer.id !== pointer)\n                        pointer.start.x = pointer.end.x\n                    pointer.start.y = pointer.end.y\n                })\n            }\n\n            // Record the current component state as the gesture starting state\n            startPosition.x = internalposition.x\n            startPosition.y = internalposition.y\n            startPosition.width = internalposition.width\n            startPosition.height = internalposition.height\n            startPosition.rotation = internalposition.rotation\n\n            // If the pointer is dragging a corner handle, record the position of the\n            // opposite corner (to anchor resizing events)\n            if (pointerTarget.type === 'handle') {\n                let oppositeHandle\n                if (pointerTarget.top) {\n                    if (pointerTarget.right) oppositeHandle = handleBL\n                    else oppositeHandle = handleBR\n                } else {\n                    if (pointerTarget.right) oppositeHandle = handleTL\n                    else oppositeHandle = handleTR\n                }\n                // handles are centered on the corresponding corner of the component frame\n                // so we can quickly find the frame corner by calculating the center\n                // of the on-screen bounds of the handle element\n                // (easier than messing with trigonometry when the component is rotated)\n                const oppositeHandleBounds = oppositeHandle.getBoundingClientRect()\n                const oppositeCorner = {\n                    x: (oppositeHandleBounds.left + oppositeHandleBounds.right) / 2,\n                    y: (oppositeHandleBounds.top + oppositeHandleBounds.bottom) / 2\n                }\n                pointers.anchor = oppositeCorner\n            } else {\n                delete pointers.anchor\n            }\n        }\n        onChange()\n    }\n\n    function pointerMove(evt) {\n        endDrag = false;\n        let pointer = pointers[evt.pointerId]\n        // Ignore unless pointer is enabled (one of the first two active pointers)\n        if (pointer && pointer.priority < 2) {\n            transformInProgress = true\n\n            // update the on-screen position\n            pointer.end.x = evt.pageX\n            pointer.end.y = evt.pageY\n\n            // Perform different transformations depending which part of the component is\n            // being dragged/manipulated\n            if (isDragging(pointer))\n                doDrag(pointer);\n\n            else if (isRotating(pointer)) doFreeTransform(pointer, bounds.center, false, true)\n            else if (isResizing(pointer) && !lockAspect) doResize(pointer, pointers.anchor)\n            else if (isResizing(pointer) && lockAspect) doFreeTransform(pointer, pointers.anchor, true)\n            else if (isFreeTransforming(pointer)) {\n                let multitouch = pointerCount > 1\n                let pointerB\n                if (multitouch) {\n                    pointerB = Object.values(pointers).find(p => {\n                        return p.id !== pointer.id\n                    })\n                } else if (pointers.anchor) {\n                    pointerB = pointers.anchor\n                } else {\n                    pointerB = bounds.center\n                }\n                doFreeTransform(pointer, pointerB, false, (multitouch && lockTouchResize))\n            }\n\n\n            onChange()\n        }\n    }\n\n    function pointerUpInside() {\n        if (transformInProgress) {\n            endDrag = true;\n            lockAspect = false;\n            transformInProgress = false;\n            dispatch('positionChanged', internalposition)\n        }\n    }\n\n\n    // Clean up after a pointer is removed and the gesture is ended\n    function pointerUp(evt) {\n\n        let removedPriority = Infinity\n        if (pointers[evt.pointerId]) {\n            pointerCount--\n            removedPriority = pointers[evt.pointerId].priority\n        }\n        // remove the pointer from the active pointers map\n        delete pointers[evt.pointerId]\n        // If there are still some other active pointers\n        if (pointerCount) {\n            // Reset the startPosition to start a new gesture\n            startPosition.y = internalposition.y\n            startPosition.x = internalposition.x\n            startPosition.width = internalposition.width\n            startPosition.height = internalposition.height\n            startPosition.rotation = internalposition.rotation\n            // update the enabled pointer priority queue\n            // and reset the pointer start positions for a new gesture\n            Object.values(pointers).forEach(pointer => {\n                if (pointer.id) {\n                    if (pointer.priority > removedPriority) pointer.priority--\n                    pointer.start.x = pointer.end.x\n                    pointer.start.y = pointer.end.y\n                }\n            })\n        }\n\n    }\n\n    function contentClick(evt) {\n        if (!transformInProgress) {\n            dispatch('click', evt.detail)\n        }\n    }\n\n    async function onChange() {\n        await tick()\n        if (element) {\n            selfBounds = element.getBoundingClientRect();\n        }\n        dispatch('positionChanged', internalposition)\n\n    }\n\n    async function onBoundsChange() {\n        await tick()\n        if (element) {\n            selfBounds = element.getBoundingClientRect()\n            dispatch('boundsChanged', internalposition);\n            if (!transformArea.classList.contains('fade-in-div')) {\n                // If the class doesn't exist, add it\n                transformArea.classList.remove('faded');\n                transformArea.classList.add('fade-in-div');\n            }\n        }\n    }\n</script>\n\n\n<svelte:window\n        on:pointermove={pointerMove}\n        on:pointerup={pointerUp}\n        on:keyup={onKeyUp}\n        on:keydown={onKeyDown}\n/>\n{#if imageurl || layerimagedata.url}\n\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\n    <div on:pointerup={pointerUpInside} on:click={contentClick} class=\"faded transform-area\" bind:this={transformArea}>\n        <div\n                class=\"free-transform\"\n                class:noclicks={!captureClicks}\n                on:pointerdown={pointerDown}\n                bind:this={element}\n                style={selfStyled ? internalposition.style : null}\n        >\n            <div class=\"contents\" style=\"opacity:{(layerimagedata.opacity/100)}\">\n                {#if imagesvg}\n                    {@html imagesvg}\n                {:else}\n                    <!-- svelte-ignore a11y-missing-attribute -->\n                    <img style=\"width: 100%;height: 100%\" bind:this={imageel} src={imageurl || layerimagedata.url}>\n                {/if}\n            </div>\n            <div style=\"width:80px; height:50px; position: sticky; z-index: 5; bottom: 0px; left:0px; align-self:flex-end;\">\n                <slot></slot>\n            </div>\n            <div class=\"frame\">\n                <div class=\"handle corner top right\" bind:this={handleTR}>\n                    <slot name=\"handle\">\n                        <div class=\"handle-shape\"/>\n                    </slot>\n                </div>\n                <div class=\"handle corner bottom right\" bind:this={handleBR}>\n                    <slot name=\"handle\">\n                        <div class=\"handle-shape\"/>\n                    </slot>\n                </div>\n                <div class=\"handle corner bottom left\" bind:this={handleBL}>\n                    <slot name=\"handle\">\n                        <div class=\"handle-shape\"/>\n                    </slot>\n                </div>\n                <div class=\"handle corner top left\" bind:this={handleTL}>\n                    <slot name=\"handle\">\n                        <div class=\"handle-shape\"/>\n                    </slot>\n                </div>\n                {#if rotatorEnabled }\n                    <div class=\"handle rotator\" bind:this={rotatorHandle}>\n                        <slot name=\"rotator\">\n                            <div class=\"handle-shape\"/>\n                        </slot>\n                        {#if rotatorBar }\n                            <div class=\"rotator-bar\"/>\n                        {/if}\n                    </div>\n                {/if}\n            </div>\n        </div>\n        <div class=\"fullwidthheight\" style=\"display: none\"/>\n        {#if demo}\n            <div style=\"position:absolute;top:100px;left:100px;width:400px;height:400px;border: 1px solid grey;transform:rotate(-45deg);transform-origin: center center\"></div>\n            <!--     <div style=\"position:absolute;top:100px;left:100px;width:400px;height:400px;border: 1px solid grey;\"></div> -->\n\n        {/if}\n        {#each magneticLines as line}\n            <div\n                    class=\"line\"\n                    style=\"\n        --x-line: {line.x_line}px;\n        --y-line: {line.y_line}px;\n        --line-length: {line.lineLength}px;\n        --theta-line: {line.theta_line}rad;\n        \"\n            ></div>\n        {/each}\n    </div>\n\n{/if}\n\n<style>\n    :root {\n        --frameBorder: solid 1px cyan;\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n\n    .free-transform {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        transform-origin: center;\n        touch-action: none;\n        display: flex;\n    }\n\n    .free-transform.noclicks {\n        pointer-events: none;\n    }\n\n    .contents {\n        /*border: var(--frameBorder,2px solid #3965c7);*/\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n    }\n\n    .contents:before {\n        content: \"\";\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        border: var(--frameBorder, 2px solid #3965c7);\n        box-sizing: border-box;\n    }\n\n\n    .free-transform.noclicks .contents {\n        pointer-events: none;\n    }\n\n    .frame {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        cursor: move;\n        /*border: var(--frameBorder,2px solid #3965c7);*/\n    }\n\n    .free-transform.noclicks .frame {\n        pointer-events: none;\n    }\n\n    .handle {\n        position: absolute;\n        user-select: none;\n        touch-action: none;\n        cursor: grab;\n        pointer-events: auto;\n    }\n\n    .handle:active {\n        cursor: grabbing;\n    }\n\n    .handle-shape {\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: white;\n        border: var(--frameBorder);\n    }\n\n    .handle.top {\n        top: 0px;\n    }\n\n    .handle.right {\n        right: 0px;\n    }\n\n    .handle.bottom {\n        bottom: 0px;\n    }\n\n    .handle.left {\n        left: 0px;\n    }\n\n    .handle.top.left {\n        transform: translate(-50%, -50%) rotate(-45deg);\n    }\n\n    .handle.top.right {\n        transform: translate(50%, -50%) rotate(45deg);\n    }\n\n    .handle.bottom.left {\n        transform: translate(-50%, 50%) rotate(-135deg);\n    }\n\n    .handle.bottom.right {\n        transform: translate(50%, 50%) rotate(135deg);\n    }\n\n    .handle.rotator {\n        left: 50%;\n        top: -30px;\n        transform: translateX(-50%);\n    }\n\n    .rotator-bar {\n        position: absolute;\n        top: 100%;\n        right: 50%;\n        width: 1px;\n        height: calc(30px - 100%);\n        border-right: var(--frameBorder);\n    }\n\n    .fullwidthheight {\n        width: 100%;\n        height: 100%;\n    }\n\n    .transform-area {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        flex-grow: 1;\n    }\n\n    .faded {\n        opacity: 0.01;\n    }\n\n    .fade-in-div {\n        opacity: 1;\n        animation: fadeIn 0.2s forwards;\n        animation-delay: 0.7s;\n    }\n\n    @keyframes fadeIn {\n        to {\n            opacity: 1;\n        }\n    }\n\n    .line {\n        position: absolute;\n        width: var(--line-length);\n        height: 1px;\n        left: var(--x-line);\n        top: var(--y-line);\n        transform: translate(-50%, -50%) rotate(var(--theta-line));\n        transform-origin: center center;\n        background-color: red;\n    }\n\n</style>\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","src_url_equal","element_src","url","document","createElement","href","is_empty","obj","keys","length","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","set_store_value","ret","value","set","action_destroyer","action_result","destroy","globals","window","globalThis","global","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","d","element","name","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","set_custom_element_data","prop","children","Array","from","childNodes","set_style","key","important","style","removeProperty","setProperty","toggle_class","toggle","classList","custom_event","type","detail","bubbles","cancelable","e","createEvent","initCustomEvent","HtmlTag","constructor","is_svg","this","n","c","html","h","m","nodeName","nodeType","t","tagName","content","innerHTML","p","attribute_to_object","attributes","result","current_component","set_current_component","get_current_component","Error","onMount","on_mount","createEventDispatcher","slice","call","defaultPrevented","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","tick","add_render_callback","seen_callbacks","Set","flushidx","saved_component","update","pop","has","add","clear","fragment","before_update","dirty","ctx","after_update","flush_render_callbacks","filtered","targets","indexOf","outroing","transition_in","block","local","delete","mount_component","customElement","new_on_destroy","map","filter","destroy_component","make_dirty","fill","init","instance","create_fragment","not_equal","props","append_styles","parent_component","bound","on_disconnect","context","Map","skip_bound","root","ready","rest","hydrate","nodes","l","intro","SvelteElement","x","y","subtract","scale","rotate","origin","dx","dy","Math","cos","sin","direction","v","atan","PI","sqrt","HTMLElement","super","attachShadow","mode","connectedCallback","slotted","attributeChangedCallback","_oldValue","newValue","disconnectedCallback","$destroy","$on","index","splice","$set","$$props","$$set","vector","sub","len","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","subscriber","invalidate","size","toollayer","magneticLines","rotatePoint","px","py","angle","cosTheta","sinTheta","calcMagneticLine","side","linePosition","lineOrientation","box","lineCenter","theta_line","x_line","y_line","lineLength","width","height","theta","rotation","x_center","y_center","hypot","rotatePositionBackToOriginal","normalizedSnappedPosition","originalRotation","centerX","centerY","snappedX","snappedY","boxCenterX","boxCenterY","rotateBoxesToZero","boxes","sharedRotation","newX","newY","warpImage","img","dstCoords","canvas","rotationAngle","imgWidth","naturalWidth","imgHeight","naturalHeight","srcCoords","radians","cosA","sinA","getCenterFromCorners","H","computeHomography","dminX","min","dmaxX","max","dminY","reswidth","resheight","ceil","invH","invertHomography","tempCanvas","tempCtx","getContext","drawImage","srcData","getImageData","dstCtx","dstImageData","createImageData","dstData","srcPos","applyHomography","xs","ys","color","sampleBilinear","putImageData","corners","topLeft","bottomRight","src","dst","A","xd","yd","solveHomography","solveLinearSystem","k","maxRow","maxVal","abs","temp","j","det","invDet","denom","x0","floor","y0","x1","y1","xi","yi","c00","getPixel","c10","c01","c11","c0","interpolateColor","c1","numeric","version","bench","f","interval","t1","Date","_myIndexOf","w","myIndexOf","prototype","Function","precision","largeArray","prettyPrint","fmtnum","isNaN","isFinite","log","normalized","pow","basic","toPrecision","parseFloat","toString","foo","join","flag","hasOwnProperty","parseDate","parse","replace","parseCSV","split","pat","patnum","count","baz","bar","match","substr","test","toCSV","row","s","dim","getURL","client","XMLHttpRequest","open","send","imageURL","crc32Array","to","table","crc","s1","s2","adler32","crc32","stream","round","z","q","r","charAt","base64","_dim","mapreduce","body","mapreduce2","setup","same","rep","dotMMsmall","woo","i0","_getCol","dotMMbig","xj","gc","VV","dotVV","dotMV","dotVM","i1","dot","mulVS","mulSV","diag","Ai","getDiag","identity","pointwise","params","fun","avec","thevec","haveret","substring","apply","pointwise2","_biforeach","_biforeach2","_foreach","_foreach2","ops2","mul","div","mod","and","or","eq","neq","lt","gt","leq","geq","band","bor","bxor","lshift","rshift","rrshift","opseq","addeq","subeq","muleq","diveq","modeq","lshifteq","rshifteq","rrshifteq","bandeq","boreq","bxoreq","mathfuns","mathfuns2","ops1","neg","not","bnot","clone","mapreducers","any","all","sum","prod","norm2Squared","norminf","norm1","sup","inf","o","code","codeeq","truncVV","truncVS","truncSV","trunc","inv","Aj","Ii","Ij","I","v0","alpha","k1","transpose","A0","A1","Bj","negtranspose","_random","rnd","random","norm2","linspace","getBlock","setBlock","B","getRange","J","Bi","AI","blockMatrix","X","M","N","Xij","Z","ZI","Xijk","tensor","T","Tbinop","rr","rc","cr","cc","reciprocal","transjugate","Tunop","exp","conj","Aix","Aiy","Ajx","Ajy","Rix","Riy","Rjx","Rjy","d1","ax","ay","bx","by","Rx","Ry","Ax","Ay","get","ik","vx","vy","undefined","getRows","ry","rx","setRows","getRow","setRow","eig","house","toUpperHessenberg","me","C","Ci","Qi","Q","epsilon","QRFrancis","maxiter","tr","Hloc","Hi","iter","QH1","QH2","concat","Q0","p1","disc","n1","n2","QH","QB","R","E","Rk","Rj","lambda","ccsSparse","counts","parseInt","Av","ccsFull","j0","j1","ccsDim","ccsTSolve","bj","dfs","ccsDFS","Pinv","km","k11","ccsLPSolve","Bv","ccsLUP1","threshold","L","U","Li","Lj","Lv","Ui","Uj","Uv","sol","P","ccsDFS0","ccsLPSolve0","ccsLUP0","ccsLUP","ccsGetBlock","jq","flags","q0","q1","ccsDot","sA","sB","Cj","Cv","ccsLUPSolve","LUP","Xi","Xj","Xv","ccsbinop","eval","ccsScatter","Ri","Rv","Aii","ptr","ccsGather","sdim","sclone","sdiag","sidentity","stranspose","sLUP","tol","sdotMM","BTk","accum","reti","BT","sdotMV","sdotVM","sdotVV","sdot","sscatter","V","Vij","sgather","gather","cLU","left","Infinity","right","cLUsolve","lu","cgrid","shape","cdelsq","g","dir","cdotMV","Spline","yl","yr","kl","kr","_at","at","mid","diff","zl","zr","pl","pr","roots","sqr","ai","bi","ci","di","ri","k0","D","stops","z0","z1","zm","t0","tm","spline","kn","fftpow2","xe","ye","xo","yo","si","_ifftpow2","ifftpow2","convpow2","axi","bxi","ayi","byi","fft","log2","cx","cy","Y","ifft","gradient","f0","f1","f2","t2","d2","it","uncmin","maxit","grad","df0","step","g0","g1","H1","Hinv","Hy","nstep","ten","isfinite","msg","solution","invHessian","message","Dopri","ymid","events","xh","yh","dopri","k2","k3","k4","k5","k6","k7","er","erinf","e0","e1","ev","A3","A4","A5","A6","bm","xl","xr","en","ei","sl","sr","LU","fast","absAjk","Akk","Ak","Pk","LUsolve","Pi","LUi","tmp","solve","echelonize","__solveLP","unbounded","svd","dotcc","a1","Ag","_solveLP","b0","NaN","solveLP","Aeq","beq","Aeq2","A2","b4","c2","c4","S","x2","MPStoLP","MPS","String","state","states","rows","sign","rl","vars","nv","err","w0","seedrandom","pool","math","chunks","significance","overflow","startdenom","ARC4","u","keylen","lowbits","flatten","depth","typ","mixkey","seed","smear","charCodeAt","fromCharCode","use_entropy","arc4","arguments","getTime","exports","base0to1","base1to0","qpgen2","dmat","dvec","fddmat","crval","amat","bvec","fdamat","meq","iact","nact","work","ierr","l1","info","it1","iwzv","iwrv","iwrm","iwsv","iwuv","nvl","iwnbv","tt","gs","nu","t1inf","t2min","vsmall","tmpa","tmpb","go","lda","jm1","dpofa","kb","dposl","kp1","dpori","fn_goto_50","fn_goto_55","fn_goto_797","fn_goto_798","fn_goto_799","solveQP","Dmat","Amat","factorized","unconstrained_solution","prec","tolerance","pythag","iteration","test_convergence","itmax","img0","img0_src_value","img1","img1_src_value","div1","div0","imageel","imageurl","position","resultCanvas","resultdim","layerimagedata","zoom","ratio","devicePixelRatio","opacity","gyre","paletteValues","selectedLayer","container","image","originalCorners","noscalecorners","isDragging","selectedCorner","transformMatrix","reCalc","num","setPosition","$$invalidate","_x","_y","_width","_height","corner","positionToCorners","updateTransform","top","handleMouseDown","transform","rotatedSrc","matrix","results","getPerspectiveTransformMatrix","rect","getBoundingClientRect","clientX","clientY","scaledcorners","el","dmaxY","makeImage","$$value","clickOutside","handleClick","contains","dispatchEvent","CustomEvent","create_if_block_2","fds_image_editor_button0","fds_image_editor_button1","fds_image_editor_button2","toFixed","div8","div2","label0","input0","label1","input1","div6","div3","label2","input2","div5","div4","label3","input3","div7","label4","input4","handleClickOutside","input0_value_value","input1_value_value","input2_value_value","input3_value_value","input4_value_value","create_if_block_1","if_block1","create_if_block","host","foldertype","coordinates","change","$toollayer","setTimeout","layerManager","traverseLayers","layer","nocache","editcoord","refresh","create_if_block_4","div13","div11","div10","div9","div12","img_src_value","create_if_block_3","slot","magneticTolerance","isResizing","pointer","getFullBounds","elementBounds","center","bottom","endDrag","svelteDispatch","dispatch","internalposition","startPosition","setInitalPosition","lastzoom","transformArea","layers","demo","rotatorEnabled","rotatorBar","handleMode","lockAspect","lockTouchResize","captureClicks","imagesvg","svgcolor","initialposition","transformInProgress","noZoomPosition","addMagneticLine","line","magneticLinesClass","getClosestSnappingPosition","newPos","snappedPosition","originalData","containerBounds","bounds","selfStyled","pointers","handleTR","handleTL","handleBR","handleBL","rotatorHandle","imagealreadyinit","mounted","pointerCount","initImage","onload","recalculatePosition","remove","onBoundsChange","retobj","_imgwidth","_imgx","_imgy","_imgheight","rev","newCoord","stylePropMap","stylePosition","pos","doDrag","end","noRotationLayers","sameRotationLayers","JSON","stringify","ml","normalizedCurrentPos","getClosestSnappingPositionWithRotation","doResize","unrotatedEnd","newOrigin","unrotatedAnchor","newAnchor","translate","calcResizeTransform","doFreeTransform","pointerA","pointerB","noRotate","noScale","pointerBStart","pointerBEnd","startAB","endAB","calcFreeTransform","tlToOrigin","tlvec","onChange","btoa","unescape","encodeURIComponent","keyCode","evt","pointerTarget","getPointerTarget","pointerId","pageX","pageY","id","priority","values","oppositeHandle","oppositeHandleBounds","oppositeCorner","isRotating","isFreeTransforming","multitouch","find","removedPriority"],"mappings":"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"}